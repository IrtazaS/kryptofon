<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>VoIP Kryptofon: CryptoPhoneApp Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pac-attribs">Package Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a>  </div>
  <div class="headertitle">
<h1>CryptoPhoneApp Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="CryptoPhoneApp" --><!-- doxytag: inherits="javax::swing::JFrame,java::awt::event::ActionListener,java::awt::event::KeyListener" -->
<p>The Swing based GUI front-end of the Kryptofon application that implements simple VoIP phone and chat client with encrypted peer-to-peer communication.  
<a href="#_details">More...</a></p>
<!-- startSectionHeader --><div class="dynheader">
Inheritance diagram for CryptoPhoneApp:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="class_crypto_phone_app__inherit__graph.png" border="0" usemap="#_crypto_phone_app_inherit__map" alt="Inheritance graph"/></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center><!-- endSectionContent --></div>
<!-- startSectionHeader --><div class="dynheader">
Collaboration diagram for CryptoPhoneApp:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="class_crypto_phone_app__coll__graph.png" border="0" usemap="#_crypto_phone_app_coll__map" alt="Collaboration graph"/></div>
<map name="_crypto_phone_app_coll__map" id="_crypto_phone_app_coll__map">
<area shape="rect" id="node16" href="classui_1_1_j_sec_state.html" title="Image indicating security state (unsecured/secured&#45;unverified/secured&#45;trusted)." alt="" coords="295,761,420,951"/><area shape="rect" id="node54" href="classui_1_1_j_image_button.html" title="JButton with transparent images and no borders." alt="" coords="444,770,569,942"/><area shape="rect" id="node22" href="classprotocol_1_1_datagram_channel.html" title="Binds the UDP port." alt="" coords="1717,657,1933,1055"/><area shape="rect" id="node26" href="classprotocol_1_1_remote_peer.html" title="Encapsulates the link between the UDP channel and a CallContext." alt="" coords="1843,1729,2005,2109"/><area shape="rect" id="node33" href="classprotocol_1_1_call_context.html" title="CallContext deals with all the packets that are part of a specific call." alt="" coords="1729,2662,1921,3250"/><area shape="rect" id="node36" href="interfaceaudio_1_1_audio_interface.html" title="The abstract audio interface." alt="" coords="1523,701,1693,1011"/><area shape="rect" id="node38" href="classcrypto_1_1_symmetric_cipher.html" title="Instances of the Symmetric cipher class arew used to cipher peer&#45;to&#45;peer datagram packets..." alt="" coords="1831,167,1993,495"/><area shape="rect" id="node61" href="classcrypto_1_1_public_encryptor.html" title="Implements public part of the asymmetric cipher (with public key) used to send encrypted local secret..." alt="" coords="1004,158,1244,503"/><area shape="rect" id="node45" href="classpbx_1_1_p_b_x_client.html" title="Encapsulates rudimentary functionality of a PBX to list and invite users (peers) to secure calls..." alt="" coords="1299,605,1499,1107"/><area shape="rect" id="node51" href="interfacepbx_1_1_p_b_x_client_1_1_context.html" title="Provides a call&#45;back context for the instance of PBXClient." alt="" coords="1375,219,1580,443"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center><!-- endSectionContent --></div>

<p><a href="class_crypto_phone_app-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#af095f99b8ba1f94596f5b38ecd5f294f">CryptoPhoneApp</a> (String args[])</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new instance of the <code><a class="el" href="class_crypto_phone_app.html" title="The Swing based GUI front-end of the Kryptofon application that implements simple VoIP phone and chat...">CryptoPhoneApp</a></code>.  <a href="#af095f99b8ba1f94596f5b38ecd5f294f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#aa1176bb75422d98acbc0c4f3a8ac35b6">startKryptofonServices</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts audio interface and UDP peer-to-peer channel.  <a href="#aa1176bb75422d98acbc0c4f3a8ac35b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a5e90f40ce9d3ea59675f792c5c7afeae">stopKryptofonServices</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops audio interface and UDP peer-to-peer channel.  <a href="#a5e90f40ce9d3ea59675f792c5c7afeae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#af39c55f8243a998c604f9d0e110fb0e7">keyPressed</a> (KeyEvent ke)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements <code>KeyListener</code>'s key pressed event.  <a href="#af39c55f8243a998c604f9d0e110fb0e7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a7704e7a931a77e85c42c90d5b9302597">keyReleased</a> (KeyEvent ke)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements <code>KeyListener</code>'s key released event.  <a href="#a7704e7a931a77e85c42c90d5b9302597"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#aaa44462f6641fb37035bbb0812ae9283">keyTyped</a> (KeyEvent ke)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements <code>KeyListener</code>'s key typed event.  <a href="#aaa44462f6641fb37035bbb0812ae9283"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#aa57b98fefa93ec098ee44b3c1a2d1d56">actionPerformed</a> (ActionEvent ae)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles events from Swing timer and buttons.  <a href="#aa57b98fefa93ec098ee44b3c1a2d1d56"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065">logMessage</a> (final String str)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs message formated with limited HTML (limited because of JEditorPane)  <a href="#aa443f1b7f508ff5f4a520ac21acc1065"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#aa5bfa56e527b8d58eaf55336761c7f8f">attention</a> (String message)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays attention messages to the user from Log subsystem.  <a href="#aa5bfa56e527b8d58eaf55336761c7f8f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#ac90d3daccce7d2003633305b3d4b6087">getUserId</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns configured user ID (username).  <a href="#ac90d3daccce7d2003633305b3d4b6087"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a3344f60177a1feeabca118383244cb53">setPbxStatus</a> (String str)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates status message by updating window title.  <a href="#a3344f60177a1feeabca118383244cb53"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30">report</a> (String cssClass, String str)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reports a system message to log.  <a href="#a365d37a3730d1a2b3276f2b0bb4f5b30"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a3e002ea8ef5e007c280b23ffc0b592f3">reportIncomingTextMessage</a> (String cssClass, String <a class="el" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>, String message)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reports incoming message.  <a href="#a3e002ea8ef5e007c280b23ffc0b592f3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#ad108bb27ddd3d6004bc0ae5c81bb9446">onInvite</a> (final PBXClient.ControlMessage m)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles on INVITE call-back from the PBXClient.  <a href="#ad108bb27ddd3d6004bc0ae5c81bb9446"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a01669bed809387eb549401705cef818a">onRing</a> (final PBXClient.ControlMessage m)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles on RING call-back from the PBXClient.  <a href="#a01669bed809387eb549401705cef818a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a85bdfbdcbf235bff83f587018a561a17">onAccept</a> (final PBXClient.ControlMessage m)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles on ACCEPT call-back from the PBXClient.  <a href="#a85bdfbdcbf235bff83f587018a561a17"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a245764c5308b9be52a00d57ed74af67f">onBye</a> (final PBXClient.ControlMessage m)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles on BYE call-back from the PBXClient.  <a href="#a245764c5308b9be52a00d57ed74af67f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a94350c6fc34e9e2888324fbaa1704d97">onInstantMessage</a> (final PBXClient.ControlMessage m)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles on IMSG call-back from the PBXClient.  <a href="#a94350c6fc34e9e2888324fbaa1704d97"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#adfdb1b2d2bc5d721f6158a67517beaaf">deferredOnInvite</a> (final PBXClient.ControlMessage m)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">On INVITE call-back is triggered when PBXClient receives inviting message (indicating that someone is calling us).  <a href="#adfdb1b2d2bc5d721f6158a67517beaaf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a5912b56b6a4d48c6b81c1c867f760a93">deferredOnRing</a> (final PBXClient.ControlMessage m)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">On RING call-back is triggered when PBXClient receives ringing message (indicating that the peer is alerting end-user).  <a href="#a5912b56b6a4d48c6b81c1c867f760a93"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a5df57190d95f3874e0d4a4a9cb92db61">deferredOnAccept</a> (final PBXClient.ControlMessage m)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">On ACCEPT call-back is triggered when PBXClient receives accepting message (indicating that the peer has accepted our invite).  <a href="#a5df57190d95f3874e0d4a4a9cb92db61"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a2b5c3d4a45a33d1f19a2ed765d5b8205">deferredOnBye</a> (final PBXClient.ControlMessage m)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">On BYE call-back is triggered when PBXClient receives 'bye' message (indicating that the peer is clearing i.e.  <a href="#a2b5c3d4a45a33d1f19a2ed765d5b8205"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#aa5c2ce41e5a2695668be72948f1b207f">deferredOnInstantMessage</a> (final PBXClient.ControlMessage m)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">On IMSG call-back is triggered when PBXClient receives private instant message (encrypted with session's secret key).  <a href="#aa5c2ce41e5a2695668be72948f1b207f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#aa077462dde1d5c2dd2e1d6f4e933b8ba">dumpLogArea</a> (String fileName)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dumps log area into html file.  <a href="#aa077462dde1d5c2dd2e1d6f4e933b8ba"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">StringBuffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a8a69b95f6b5cfb28e716ba5ddebb9372">getContentsFromResourceOrFile</a> (String path)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads contents of the text file using URL class.  <a href="#a8a69b95f6b5cfb28e716ba5ddebb9372"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#ae54e727b812f203eaf6615e6c40e6de8">clearLogArea</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears log area (with the contents of the "empty" template)  <a href="#ae54e727b812f203eaf6615e6c40e6de8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a8192190231b7f7c752022508fa2ef893">displayUsage</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays usage information.  <a href="#a8192190231b7f7c752022508fa2ef893"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a2751b7e1be8e8d88ba6cd8d0b429c7a9">displayHelp</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays help.  <a href="#a2751b7e1be8e8d88ba6cd8d0b429c7a9"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#af09e2a7a032d624146b4b46347840b8a">main</a> (final String args[])</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Main entry point.  <a href="#af09e2a7a032d624146b4b46347840b8a"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pac-attribs"></a>
Package Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcrypto_1_1_public_encryptor.html">PublicEncryptor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c">remotePublicKey</a> = null</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The last public key received from remote peer.  <a href="#af912ec478a2b110219b8bae631f8f84c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#ac8264aeb03fe1e690d7ad285c08447ad">createLayout</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates layout of the GUI components.  <a href="#ac8264aeb03fe1e690d7ad285c08447ad"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#aa1f8269dab7943299f3537ceb9425211">createEventListeners</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates event listeners.  <a href="#aa1f8269dab7943299f3537ceb9425211"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#af2074d18d0a0c7091ebd7b4ea24ab0ab">sendButton_Clicked</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses input text entered by the user in inputMsg.  <a href="#af2074d18d0a0c7091ebd7b4ea24ab0ab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#aecaed7d05976953fa24924ba9f6ac7dd">listPeersButton_Clicked</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs :list command.  <a href="#aecaed7d05976953fa24924ba9f6ac7dd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a3c3f09a2e2f64f505746bb118e46215d">dialButton_Clicked</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs :invite command.  <a href="#a3c3f09a2e2f64f505746bb118e46215d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a655f5dd1ce1998f22b45b4854a5f8c85">secureDialButton_Clicked</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs :invite+ command.  <a href="#a655f5dd1ce1998f22b45b4854a5f8c85"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#ab43da0d80aad6296253e5ede356738e9">hangupButton_Clicked</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs :bye command.  <a href="#ab43da0d80aad6296253e5ede356738e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a7490652207cab4965f13ea019ee66cbe">formWindowClosing</a> (WindowEvent evt)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes application by gracefully terminating all threads.  <a href="#a7490652207cab4965f13ea019ee66cbe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#ad8e7fbdd972917b6601716fb4753549d">mainTimerEvent</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles events from application's mainTimer (an instance of the Swing timer).  <a href="#ad8e7fbdd972917b6601716fb4753549d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">String[]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a5a5980643392e77e922cc2b4045bdf58">tokenizeInputMessage</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tokenizes inputMsg into words and returns array of strings.  <a href="#a5a5980643392e77e922cc2b4045bdf58"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a2daa0d1e0ed86309df9d2d51f5010fc1">parseInputMessage</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses input message from inputMsg and sends it to chat server.  <a href="#a2daa0d1e0ed86309df9d2d51f5010fc1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a8551798b8de4dd77d8190ddcae8e1869">sendInstantMessage</a> (String message, boolean forceUnencrypted)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends chat message (encrypted if we have established secure channel with the user).  <a href="#a8551798b8de4dd77d8190ddcae8e1869"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#aa05db4cf04f0da872d4bf5e2d3b44123">executeCommand</a> (String cmd, String[] args)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses commands prefixed with ':' character.  <a href="#aa05db4cf04f0da872d4bf5e2d3b44123"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcrypto_1_1_public_encryptor.html">PublicEncryptor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a781502d3e62bb8d8ad78fd0388472c2a">tryToVerifyInvitingCall</a> (boolean silent)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies invitor's public key (signed by invitor's private key) against the public keys from authorized keys file.  <a href="#a781502d3e62bb8d8ad78fd0388472c2a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a22263d1bb4efd460d3332a533afdcfe7">acceptIncomingCall</a> (boolean securedIfPossible)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Accepts incoming invite.  <a href="#a22263d1bb4efd460d3332a533afdcfe7"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a6db74f3877792c5613221defef4e4447">serverName</a> = &quot;atlas.dsv.su.se&quot;</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The host name or IP address of the remote chat server.  <a href="#a6db74f3877792c5613221defef4e4447"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#afce08401731d533ad12121ef22fd1b28">serverPort</a> = 9494</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The TCP port where to connect to on remote chat server.  <a href="#afce08401731d533ad12121ef22fd1b28"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classpbx_1_1_p_b_x_client.html">PBXClient</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf">pbxChannel</a> = null</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The instance of PBX client connected to remote chat server.  <a href="#a9ab2a4d37cf0042fdcd8c846546185bf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a92d666e527bb56bc298a903e12f8069e">pbxChannelStatus</a> = &quot;&quot;</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The last status message of the PBX channel (posted by the <a class="el" href="class_crypto_phone_app.html#a3344f60177a1feeabca118383244cb53" title="Updates status message by updating window title.">setPbxStatus()</a>).  <a href="#a92d666e527bb56bc298a903e12f8069e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Timer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a790ad94f30f231bd6bcfed75b2836ad2">mainTimer</a> = null</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Main timer (elapses every 1000 ms)  <a href="#a790ad94f30f231bd6bcfed75b2836ad2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a2cd1707c917afbfad5a75482a22670b5">reconnectTimeout</a> = -1</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The reconnect delay timer (for timing delay between two reconnections).  <a href="#a2cd1707c917afbfad5a75482a22670b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a35e52a134d8ccabb268198f9d6af6f88">reconnectRetryCount</a> = 0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retry counter of number of failed reconnecting attempts.  <a href="#a35e52a134d8ccabb268198f9d6af6f88"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a46bae86a63b1548d96e5218f369713f6">localUdpPort</a> = 47000</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The default local UDP port.  <a href="#a46bae86a63b1548d96e5218f369713f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classprotocol_1_1_datagram_channel.html">DatagramChannel</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0">udpChannel</a> = null</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons.  <a href="#a5d2d026ee9a1963f17e68b3b9c4edda0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="interfaceaudio_1_1_audio_interface.html">AudioInterface</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a7eaf4402df3b1abb3bde0c0cef34204b">audioInterface</a> = null</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The instance of the Audio interface used to access microphone and speaker.  <a href="#a7eaf4402df3b1abb3bde0c0cef34204b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">PBXClient.ControlMessage&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5">lastMessageFromPBX</a> = null</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The last PBX control message sent to us (waiting to be handled)  <a href="#a8f8600b37452eafeb3fddf841a52f8b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934">currentInvite</a> = null</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The remote peer (its user id) that we are currently inviting to a call.  <a href="#a275596983900ad20ee6c1ba4387de934"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#ab791babb2bcfea431164e9ca91cb496c">inviteTimeout</a> = -1</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer used to detect unresolved invite (i.e.  <a href="#ab791babb2bcfea431164e9ca91cb496c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#aab94ceafb0b41e812419d2ef860b15da">monitorIfPeerIsSendingVoice</a> = false</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether to monitor if peer is sending voice PDUs to us.  <a href="#aab94ceafb0b41e812419d2ef860b15da"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">JEditorPane&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#aa3da814a861bc895c842f67845ce7c8c">logArea</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The log area formatted in HTML.  <a href="#aa3da814a861bc895c842f67845ce7c8c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classui_1_1_j_sec_state.html">JSecState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#abb25aaecf1b0f6f47afd12b38bf40f3b">securityState</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classui_1_1_j_image_button.html">JImageButton</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a1cf30ea362184c2bd05a4c3e5129fee3">sendButton</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classui_1_1_j_image_button.html">JImageButton</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a4c28f027fd2c4797c024ac4f2bf38104">listPeersButton</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classui_1_1_j_image_button.html">JImageButton</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a4f9c849a4193e21cd8414e4ada971000">dialButton</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classui_1_1_j_image_button.html">JImageButton</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a70d95304c59a86fd1eed973e295b2928">secureDialButton</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classui_1_1_j_image_button.html">JImageButton</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#ac01e5b11a36144035b25200bbc1fab61">hangupButton</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">JLabel&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#acb3acad1016510c342c2756d038852c0">imsgLabel</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">JTextField&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">JLabel&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a04c29b8a2c04bd8bfdaefd118cdba087">idLabel</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">JTextField&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">JCheckBox&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a5302f5b8ebbcff39390cbbb21e2b06b9">autoAnswer</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static final long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a68fa32f8d1659681f4a2a262f2a110c2">serialVersionUID</a> = -1830703904673318918L</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements java.io.Serializable interface.  <a href="#a68fa32f8d1659681f4a2a262f2a110c2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static final String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a4ff8f52c4cd52c0786221b1af5969ae7">appTitle</a> = &quot;IP1-10: Kryptofon&quot;</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The common application title prefix.  <a href="#a4ff8f52c4cd52c0786221b1af5969ae7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static final String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a8a6cb43a9dcb7a42a85b92b9cae15420">defaultInputMsg</a> = &quot;&lt;type in message, command or command arguments here&gt;&quot;</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The initial message content of the input text message field.  <a href="#a8a6cb43a9dcb7a42a85b92b9cae15420"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static final String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_crypto_phone_app.html#a573f49c1366d9a92b77e39266a85a771">defaultLogAreaDumpFilename</a> = &quot;mykf-log-area-&quot;</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The default file name where to dump log area contents with <code>:dump</code> command.  <a href="#a573f49c1366d9a92b77e39266a85a771"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The Swing based GUI front-end of the Kryptofon application that implements simple VoIP phone and chat client with encrypted peer-to-peer communication. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Mikica B Kocic </dd></dl>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00066">66</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af095f99b8ba1f94596f5b38ecd5f294f"></a><!-- doxytag: member="CryptoPhoneApp::CryptoPhoneApp" ref="af095f99b8ba1f94596f5b38ecd5f294f" args="(String args[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CryptoPhoneApp.CryptoPhoneApp </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>args</em>[]&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new instance of the <code><a class="el" href="class_crypto_phone_app.html" title="The Swing based GUI front-end of the Kryptofon application that implements simple VoIP phone and chat...">CryptoPhoneApp</a></code>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td>the command line arguments passed to main </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00195">195</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00077">appTitle</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00188">autoAnswer</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l02031">clearLogArea()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00478">createEventListeners()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00376">createLayout()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00082">defaultInputMsg</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00181">dialButton</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l02045">displayUsage()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00872">getUserId()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00183">hangupButton</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00186">idLabel</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00184">imsgLabel</a>, <a class="el" href="_cipher_engine_8java_source.html#l00132">crypto.CipherEngine.initialize()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00185">inputMsg</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00180">listPeersButton</a>, <a class="el" href="_j_image_button_8java_source.html#l00052">ui.JImageButton.loadIcon()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00174">logArea</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00114">mainTimer</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00104">pbxChannel</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00182">secureDialButton</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00178">securityState</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00179">sendButton</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00094">serverName</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00099">serverPort</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00229">pbx.PBXClient.start()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00532">startKryptofonServices()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00187">userId</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l02072">main()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        super( <a class="code" href="class_crypto_phone_app.html#a4ff8f52c4cd52c0786221b1af5969ae7" title="The common application title prefix.">appTitle</a> );
        
        setDefaultCloseOperation( WindowConstants.EXIT_ON_CLOSE );
<span class="comment"></span>
<span class="comment">        //////////////////////////////////////////////////////// Create GUI elements /////</span>
<span class="comment"></span>        
        <span class="comment">/* Fonts and colors</span>
<span class="comment">         */</span>
        Font textFont = <span class="keyword">new</span> Font( Font.SANS_SERIF, Font.PLAIN, 14 );
        UIManager.put( <span class="stringliteral">&quot;ToolTip.background&quot;</span>, <span class="keyword">new</span> ColorUIResource( 0xFF, 0xFF, 0xC7 ) );

        <span class="comment">/* Application icons</span>
<span class="comment">         */</span>
        List&lt;Image&gt; icons = <span class="keyword">new</span> LinkedList&lt;Image&gt; ();
        icons.add( <a class="code" href="classui_1_1_j_image_button.html" title="JButton with transparent images and no borders.">JImageButton</a>.<a class="code" href="classui_1_1_j_image_button.html#a008b0370fe8befcea1f5c0abadca0fb3" title="Loads icon from resources or file system.">loadIcon</a>( <span class="keyword">this</span>, <span class="stringliteral">&quot;favicon48.png&quot;</span> ).getImage () );
        icons.add( <a class="code" href="classui_1_1_j_image_button.html" title="JButton with transparent images and no borders.">JImageButton</a>.<a class="code" href="classui_1_1_j_image_button.html#a008b0370fe8befcea1f5c0abadca0fb3" title="Loads icon from resources or file system.">loadIcon</a>( <span class="keyword">this</span>, <span class="stringliteral">&quot;favicon24.png&quot;</span> ).getImage () );
        icons.add( <a class="code" href="classui_1_1_j_image_button.html" title="JButton with transparent images and no borders.">JImageButton</a>.<a class="code" href="classui_1_1_j_image_button.html#a008b0370fe8befcea1f5c0abadca0fb3" title="Loads icon from resources or file system.">loadIcon</a>( <span class="keyword">this</span>, <span class="stringliteral">&quot;favicon16.png&quot;</span> ).getImage () );
        setIconImages( icons );
         
        <span class="comment">/* Components</span>
<span class="comment">         */</span>
        <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a> = <span class="keyword">new</span> JTextField( <a class="code" href="class_crypto_phone_app.html#a8a6cb43a9dcb7a42a85b92b9cae15420" title="The initial message content of the input text message field.">defaultInputMsg</a>, 30 );
        <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>.setFont( textFont );
        <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>.selectAll ();
        <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>.setToolTipText( 
                <span class="stringliteral">&quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;&quot;</span>
                + <span class="stringliteral">&quot;Enter a text message or command here, then press &lt;tt&gt;Enter&lt;/tt&gt;&lt;br/&gt;&quot;</span>
                + <span class="stringliteral">&quot;If you are going to use command buttons or command mnemonics,&lt;br/&gt;&quot;</span>
                + <span class="stringliteral">&quot;then put command arguments here (or leave this field empty).&quot;</span>
                + <span class="stringliteral">&quot;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span>
                );
        
        <a class="code" href="class_crypto_phone_app.html#acb3acad1016510c342c2756d038852c0">imsgLabel</a> = <span class="keyword">new</span> JLabel (); <span class="comment">// without the text; holds only mnemonic for the field</span>
        <a class="code" href="class_crypto_phone_app.html#acb3acad1016510c342c2756d038852c0">imsgLabel</a>.setFont( textFont );
        <a class="code" href="class_crypto_phone_app.html#acb3acad1016510c342c2756d038852c0">imsgLabel</a>.setDisplayedMnemonic( KeyEvent.VK_I );
        <a class="code" href="class_crypto_phone_app.html#acb3acad1016510c342c2756d038852c0">imsgLabel</a>.setLabelFor( <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a> );

        <a class="code" href="class_crypto_phone_app.html#abb25aaecf1b0f6f47afd12b38bf40f3b">securityState</a> = <span class="keyword">new</span> <a class="code" href="classui_1_1_j_sec_state.html" title="Image indicating security state (unsecured/secured-unverified/secured-trusted).">JSecState</a>( <span class="keyword">this</span> );
        
        <a class="code" href="class_crypto_phone_app.html#a1cf30ea362184c2bd05a4c3e5129fee3">sendButton</a> = <span class="keyword">new</span> <a class="code" href="classui_1_1_j_image_button.html" title="JButton with transparent images and no borders.">JImageButton</a>( <span class="keyword">this</span>,
                <span class="stringliteral">&quot;Send message&quot;</span>, <span class="stringliteral">&quot;chat.png&quot;</span>, <span class="stringliteral">&quot;chat2.png&quot;</span> );
        <a class="code" href="class_crypto_phone_app.html#a1cf30ea362184c2bd05a4c3e5129fee3">sendButton</a>.setMnemonic( KeyEvent.VK_ENTER );
        
        <a class="code" href="class_crypto_phone_app.html#a4c28f027fd2c4797c024ac4f2bf38104">listPeersButton</a> = <span class="keyword">new</span> <a class="code" href="classui_1_1_j_image_button.html" title="JButton with transparent images and no borders.">JImageButton</a>( <span class="keyword">this</span>,
                <span class="stringliteral">&quot;List kryptofon users (Alt + L)&quot;</span>, <span class="stringliteral">&quot;listPeers.png&quot;</span>, <span class="stringliteral">&quot;listPeers2.png&quot;</span> );
        <a class="code" href="class_crypto_phone_app.html#a4c28f027fd2c4797c024ac4f2bf38104">listPeersButton</a>.setMnemonic( KeyEvent.VK_L );
        
        <a class="code" href="class_crypto_phone_app.html#a4f9c849a4193e21cd8414e4ada971000">dialButton</a> = <span class="keyword">new</span> <a class="code" href="classui_1_1_j_image_button.html" title="JButton with transparent images and no borders.">JImageButton</a>( <span class="keyword">this</span>,
                <span class="stringliteral">&quot;Make a call (Alt+C)&quot;</span>, <span class="stringliteral">&quot;dial.png&quot;</span>, <span class="stringliteral">&quot;dial2.png&quot;</span> );
        <a class="code" href="class_crypto_phone_app.html#a4f9c849a4193e21cd8414e4ada971000">dialButton</a>.setMnemonic( KeyEvent.VK_C );
        
        <a class="code" href="class_crypto_phone_app.html#a70d95304c59a86fd1eed973e295b2928">secureDialButton</a> = <span class="keyword">new</span> <a class="code" href="classui_1_1_j_image_button.html" title="JButton with transparent images and no borders.">JImageButton</a>( <span class="keyword">this</span>,
                <span class="stringliteral">&quot;Make a secure call (Alt+S)&quot;</span>, <span class="stringliteral">&quot;secureDial.png&quot;</span>, <span class="stringliteral">&quot;secureDial2.png&quot;</span> );
        <a class="code" href="class_crypto_phone_app.html#a70d95304c59a86fd1eed973e295b2928">secureDialButton</a>.setMnemonic( KeyEvent.VK_S );
        
        <a class="code" href="class_crypto_phone_app.html#ac01e5b11a36144035b25200bbc1fab61">hangupButton</a> = <span class="keyword">new</span> <a class="code" href="classui_1_1_j_image_button.html" title="JButton with transparent images and no borders.">JImageButton</a>( <span class="keyword">this</span>,
                <span class="stringliteral">&quot;Clear or reject the call (Alt+H)&quot;</span>, <span class="stringliteral">&quot;hangup.png&quot;</span>, <span class="stringliteral">&quot;hangup2.png&quot;</span> );
        <a class="code" href="class_crypto_phone_app.html#ac01e5b11a36144035b25200bbc1fab61">hangupButton</a>.setMnemonic( KeyEvent.VK_H );
        
        <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a> = <span class="keyword">new</span> JTextField ();
        <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>.setFont( textFont );
        <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>.setText( <a class="code" href="class_crypto_phone_app.html#ac90d3daccce7d2003633305b3d4b6087" title="Returns configured user ID (username).">getUserId</a> () ); <span class="comment">// set default user id</span>
        <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>.setToolTipText( 
                <span class="stringliteral">&quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;&quot;</span>
                + <span class="stringliteral">&quot;Enter name, which will be used to identify you to other kryptofon peers.&lt;br/&gt;&quot;</span>
                + <span class="stringliteral">&quot;The name should be unique and possibly without whitespaces.&quot;</span>
                + <span class="stringliteral">&quot;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span>
                );
        
        <a class="code" href="class_crypto_phone_app.html#a04c29b8a2c04bd8bfdaefd118cdba087">idLabel</a> = <span class="keyword">new</span> JLabel( <span class="stringliteral">&quot;My Name:&quot;</span> );
        <a class="code" href="class_crypto_phone_app.html#a04c29b8a2c04bd8bfdaefd118cdba087">idLabel</a>.setFont( textFont );
        <a class="code" href="class_crypto_phone_app.html#a04c29b8a2c04bd8bfdaefd118cdba087">idLabel</a>.setDisplayedMnemonic( KeyEvent.VK_N );
        <a class="code" href="class_crypto_phone_app.html#a04c29b8a2c04bd8bfdaefd118cdba087">idLabel</a>.setLabelFor( <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a> );

        <a class="code" href="class_crypto_phone_app.html#a5302f5b8ebbcff39390cbbb21e2b06b9">autoAnswer</a> = <span class="keyword">new</span> JCheckBox( <span class="stringliteral">&quot;Autoanswer&quot;</span> );
        <a class="code" href="class_crypto_phone_app.html#a5302f5b8ebbcff39390cbbb21e2b06b9">autoAnswer</a>.setMnemonic( KeyEvent.VK_A );
        <a class="code" href="class_crypto_phone_app.html#a5302f5b8ebbcff39390cbbb21e2b06b9">autoAnswer</a>.setToolTipText( <span class="stringliteral">&quot;Toggle auto-answer mode (Alt+A)&quot;</span> );

        <a class="code" href="class_crypto_phone_app.html#aa3da814a861bc895c842f67845ce7c8c" title="The log area formatted in HTML.">logArea</a> = <span class="keyword">new</span> JEditorPane ();
        <a class="code" href="class_crypto_phone_app.html#aa3da814a861bc895c842f67845ce7c8c" title="The log area formatted in HTML.">logArea</a>.setFont( textFont );
        <a class="code" href="class_crypto_phone_app.html#aa3da814a861bc895c842f67845ce7c8c" title="The log area formatted in HTML.">logArea</a>.setEditable( <span class="keyword">false</span> );
        <a class="code" href="class_crypto_phone_app.html#aa3da814a861bc895c842f67845ce7c8c" title="The log area formatted in HTML.">logArea</a>.setToolTipText( 
                <span class="stringliteral">&quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;&quot;</span>
                + <span class="stringliteral">&quot;&lt;strong&gt;Log Area&lt;/strong&gt;&lt;br/&gt;&quot;</span>
                + <span class="stringliteral">&quot;Use &lt;tt&gt;:dump&lt;/tt&gt; command to save contents into a file&quot;</span>
                + <span class="stringliteral">&quot;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span>
                );

        <a class="code" href="class_crypto_phone_app.html#ae54e727b812f203eaf6615e6c40e6de8" title="Clears log area (with the contents of the &amp;quot;empty&amp;quot; template)">clearLogArea</a> ();
<span class="comment"></span>
<span class="comment">        //////////////////////////////////////////////////////// GUI Layout //////////////</span>
<span class="comment"></span>
        <a class="code" href="class_crypto_phone_app.html#ac8264aeb03fe1e690d7ad285c08447ad" title="Creates layout of the GUI components.">createLayout</a> ();

        <span class="comment">/* Set inputMsg field ready for user to type in something...</span>
<span class="comment">         */</span>
        <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>.requestFocus ();
<span class="comment"></span>
<span class="comment">        //////////////////////////////////////////////////////// Event listeners /////////</span>
<span class="comment"></span>        
        <a class="code" href="class_crypto_phone_app.html#aa1f8269dab7943299f3537ceb9425211" title="Creates event listeners.">createEventListeners</a> ();
<span class="comment"></span>
<span class="comment">        //////////////////////////////////////////////////////// Window Size /////////////</span>
<span class="comment"></span>        
        <span class="comment">/* Adjust window dimensions not to exceed screen dimensions ...</span>
<span class="comment">         */</span>
        Dimension win = <span class="keyword">new</span> Dimension( 1024, 600 );
        Dimension scsz = Toolkit.getDefaultToolkit().getScreenSize();
        win.width  = Math.min( win.width, scsz.width );
        win.height = Math.min( win.height, scsz.height - 40 );
        setSize( win );
        setMinimumSize( <span class="keyword">new</span> Dimension( 600, 400 ) );
        
        <span class="comment">/* ... then center window on the screen.</span>
<span class="comment">         */</span>
        setLocation( ( scsz.width - win.width )/2, ( scsz.height - 40 - win.height )/2 );
<span class="comment"></span>
<span class="comment">        //////////////////////////////////////////////////////// Enable Logging //////////</span>
<span class="comment"></span>
        <span class="comment">/* Enable Log</span>
<span class="comment">         */</span>
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.setEnabled( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.ALL   , <span class="keyword">false</span> );
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.setEnabled( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.VERB  , <span class="keyword">false</span> );
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.setEnabled( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.PDU   , <span class="keyword">false</span> );
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.setEnabled( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.AUDIO , <span class="keyword">false</span> );
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.setEnabled( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.DEBUG , <span class="keyword">false</span> );
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.setEnabled( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.ATTN  , <span class="keyword">true</span>  );
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.setEnabled( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.TRACE , <span class="keyword">true</span>  );
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.setEnabled( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.INFO  , <span class="keyword">true</span>  );
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.setEnabled( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.WARN  , <span class="keyword">true</span>  );
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.setEnabled( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.ERROR , <span class="keyword">true</span>  );

        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.attn = <span class="keyword">this</span>; <span class="comment">// catch messages in &#39;attention&#39; channel</span>

        <span class="comment">/* Display initial contents in the log area</span>
<span class="comment">         */</span>
        <a class="code" href="class_crypto_phone_app.html#a8192190231b7f7c752022508fa2ef893" title="Displays usage information.">displayUsage</a> ();
<span class="comment"></span>
<span class="comment">        //////////////////////////////////////////////////////// Start services //////////</span>
<span class="comment"></span>        
        <span class="comment">/* Parse arguments: [ &lt;host&gt; [ &lt;port&gt; ] ]</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( args.length &gt;= 1 )
        {
            <a class="code" href="class_crypto_phone_app.html#a6db74f3877792c5613221defef4e4447" title="The host name or IP address of the remote chat server.">serverName</a> = args[ 0 ];
            <span class="keywordflow">if</span>( args.length &gt;= 2 ) <span class="keywordflow">try</span> {
                <a class="code" href="class_crypto_phone_app.html#afce08401731d533ad12121ef22fd1b28" title="The TCP port where to connect to on remote chat server.">serverPort</a> = Integer.parseInt( args[ 1 ] );
            } <span class="keywordflow">catch</span> ( NumberFormatException e ) {
                <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.warn( <span class="stringliteral">&quot;Using the default destination TCP port: &quot;</span> + <a class="code" href="class_crypto_phone_app.html#afce08401731d533ad12121ef22fd1b28" title="The TCP port where to connect to on remote chat server.">serverPort</a> );
            }
        }

        <span class="comment">/* Load authorized public keys and initializes asymmetric and symmetric </span>
<span class="comment">         * ciphering engines</span>
<span class="comment">         */</span>
        <a class="code" href="classcrypto_1_1_cipher_engine.html" title="Common ciphering engine (for the whole application) providing:">CipherEngine</a>.<a class="code" href="classcrypto_1_1_cipher_engine.html#ab26ea3dd20fb07e00104c42651cb2d23" title="Loads authorized public keys and initializes asymmetric and symmetric ciphering engines, where:">initialize</a> ();
        
        <span class="comment">/* Start UDP listener and audio interface...</span>
<span class="comment">         */</span>
        <a class="code" href="class_crypto_phone_app.html#aa1176bb75422d98acbc0c4f3a8ac35b6" title="Starts audio interface and UDP peer-to-peer channel.">startKryptofonServices</a> ();
        
        <span class="comment">/* Open communication link to server...</span>
<span class="comment">         */</span>
        <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a> = <span class="keyword">new</span> <a class="code" href="classpbx_1_1_p_b_x_client.html" title="Encapsulates rudimentary functionality of a PBX to list and invite users (peers) to secure calls...">PBXClient</a>( <a class="code" href="class_crypto_phone_app.html#a6db74f3877792c5613221defef4e4447" title="The host name or IP address of the remote chat server.">serverName</a>, <a class="code" href="class_crypto_phone_app.html#afce08401731d533ad12121ef22fd1b28" title="The TCP port where to connect to on remote chat server.">serverPort</a>, <span class="keyword">this</span> );
        <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a62086db6e1497d23af966f87c148945e" title="Starts the thread.">start</a> ();

        <span class="comment">/* Instantiate connection monitor timer (for reconnect supervision)</span>
<span class="comment">         */</span>
        <a class="code" href="class_crypto_phone_app.html#a790ad94f30f231bd6bcfed75b2836ad2" title="Main timer (elapses every 1000 ms)">mainTimer</a> = <span class="keyword">new</span> Timer( 1000, <span class="keyword">this</span> );
        <a class="code" href="class_crypto_phone_app.html#a790ad94f30f231bd6bcfed75b2836ad2" title="Main timer (elapses every 1000 ms)">mainTimer</a>.start ();

        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.trace( <span class="stringliteral">&quot;Created instance of the &quot;</span> + this.getClass().toString () );
    }
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a22263d1bb4efd460d3332a533afdcfe7"></a><!-- doxytag: member="CryptoPhoneApp::acceptIncomingCall" ref="a22263d1bb4efd460d3332a533afdcfe7" args="(boolean securedIfPossible)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.acceptIncomingCall </td>
          <td>(</td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"> <em>securedIfPossible</em>&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Accepts incoming invite. </p>
<p>Procedure is called either automatically from <a class="el" href="class_crypto_phone_app.html#adfdb1b2d2bc5d721f6158a67517beaaf" title="On INVITE call-back is triggered when PBXClient receives inviting message (indicating that someone is...">deferredOnInvite()</a> when the auto-answer is turned on, or manually by the user from :accept command).</p>
<p>It first verifies invitor's public key (signed by invitor's private key) against the public keys from authorized keys file.</p>
<p>It then signs local secret key with the local private key, then encrypts signed secret key with our with verified invitor's public key and serializes it as Base64 string.</p>
<p>It sends ACCEPTING message to the peer with the information how to rich us (local IP address and UDP port as well serialized encrypted secret key) and signed/encrypted/encoded secret key.</p>
<p>At the end it creates instance for the call (CallContext class) and the remote peer (RemotePeer class), and binds them to specific CODEC of the audio interface and UDP channel.</p>
<p>The call is finally established at this point. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l01857">1857</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_voice_p_d_u_8java_source.html#l00019">protocol.VoicePDU.ALAW</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00077">appTitle</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00141">audioInterface</a>, <a class="el" href="_public_encryptor_8java_source.html#l00394">crypto.PublicEncryptor.encryptAndSerialize()</a>, <a class="el" href="interfaceaudio_1_1_audio_interface.html#afef6f8a11863a389a5d8841e555a571f">audio.AudioInterface.getByFormat()</a>, <a class="el" href="_cipher_engine_8java_source.html#l00090">crypto.CipherEngine.getCipher()</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00220">pbx.PBXClient.getLocalAddress()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00089">protocol.DatagramChannel.getLocalPort()</a>, <a class="el" href="_cipher_engine_8java_source.html#l00098">crypto.CipherEngine.getSignedSecretKey()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00125">protocol.DatagramChannel.hasRemotePeer()</a>, <a class="el" href="_public_encryptor_8java_source.html#l00308">crypto.PublicEncryptor.isActive()</a>, <a class="el" href="_public_encryptor_8java_source.html#l00316">crypto.PublicEncryptor.isVerified()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00146">lastMessageFromPBX</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00169">monitorIfPeerIsSendingVoice</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00104">pbxChannel</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00151">remotePublicKey</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00922">report()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00178">securityState</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00583">pbx.PBXClient.sendAccept()</a>, <a class="el" href="_call_context_8java_source.html#l00151">protocol.CallContext.setCallEstablished()</a>, <a class="el" href="_j_sec_state_8java_source.html#l00072">ui.JSecState.setState()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01775">tryToVerifyInvitingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00136">udpChannel</a>, and <a class="el" href="_datagram_channel_8java_source.html#l00097">protocol.DatagramChannel.useSymmetricCipher()</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01501">deferredOnInvite()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00609">dialButton_Clicked()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00624">secureDialButton_Clicked()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( this.<a class="code" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5" title="The last PBX control message sent to us (waiting to be handled)">lastMessageFromPBX</a> == null ) { <span class="comment">// There is no INVITE to accept</span>
            <span class="keywordflow">return</span>;
        }
        
        <a class="code" href="classpbx_1_1_p_b_x_client.html" title="Encapsulates rudimentary functionality of a PBX to list and invite users (peers) to secure calls...">PBXClient</a>.ControlMessage m = this.<a class="code" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5" title="The last PBX control message sent to us (waiting to be handled)">lastMessageFromPBX</a>;
        String verboseRemote = m.getVerboseRemote ();

        <span class="comment">/* Can accept only if there is no call in progress.</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a221b7dbd0fef9631bb96cff8fc871cb2" title="Returns if there is active remote peer.">hasRemotePeer</a> () ) {
            <span class="keywordflow">return</span>;
        }
        
        <span class="comment">/* Resolve peers IP address</span>
<span class="comment">         */</span>
        InetAddress peerAddr = null;
        <span class="keywordflow">try</span> {
            peerAddr = InetAddress.getByName( m.peerAddr );
        } <span class="keywordflow">catch</span>( UnknownHostException e ) {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.exception( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.ERROR, e );
            this.<a class="code" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5" title="The last PBX control message sent to us (waiting to be handled)">lastMessageFromPBX</a> = null;
            <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logError&quot;</span>, <span class="stringliteral">&quot;Unknown remote host &#39;&quot;</span> + m.peerAddr 
                    + <span class="stringliteral">&quot;&#39;; clearing the call...&quot;</span> );
            <span class="keywordflow">return</span>;
        }

        <span class="comment">/* Deserialize remote public key and encrypt our secret key with it.</span>
<span class="comment">         * Deserialization also verifies the public key against authorized keys.</span>
<span class="comment">         * \see constructor of the PublicEncryptor</span>
<span class="comment">         */</span>
        String mySecret = null;
        <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a> = null;
        <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a126ecd1b608a2e495e93ffc6d768c91b" title="Sets cipher to be used for PDU ciphering.">useSymmetricCipher</a>( null );
        
        <span class="keywordflow">if</span> ( securedIfPossible )
        {
            <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a> = <a class="code" href="class_crypto_phone_app.html#a781502d3e62bb8d8ad78fd0388472c2a" title="Verifies invitor&amp;#39;s public key (signed by invitor&amp;#39;s private key) against the public keys from ...">tryToVerifyInvitingCall</a>( <span class="comment">/*silent*/</span> <span class="keyword">true</span> );
            
            <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a> != null &amp;&amp; <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a>.<a class="code" href="classcrypto_1_1_public_encryptor.html#aed1f1bdf60dd9fd2122b822ef38a0e11" title="Returns if cipher is properly initialized.">isActive</a> () ) 
            {
                mySecret = <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a>.<a class="code" href="classcrypto_1_1_public_encryptor.html#a6878ebbadfd0bb40aba369d2068e2b2f" title="Returns Base64 of encrypted (using our public key) object.">encryptAndSerialize</a>( <a class="code" href="classcrypto_1_1_cipher_engine.html" title="Common ciphering engine (for the whole application) providing:">CipherEngine</a>.<a class="code" href="classcrypto_1_1_cipher_engine.html#a7bb9b8a2f297c37b2e72005260f758fa" title="Returns secret key signed with our private key.">getSignedSecretKey</a>() );
                
                <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a126ecd1b608a2e495e93ffc6d768c91b" title="Sets cipher to be used for PDU ciphering.">useSymmetricCipher</a>( <a class="code" href="classcrypto_1_1_cipher_engine.html" title="Common ciphering engine (for the whole application) providing:">CipherEngine</a>.<a class="code" href="classcrypto_1_1_cipher_engine.html#aaa906efe34d4247419b18e7dc7138b59" title="Returns local symmetric ciphering engine.">getCipher</a> () );
            }
        }

        <span class="comment">/* Send accepting message to remote peer</span>
<span class="comment">         */</span>
        <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a712b7b704d26d0974da6a6161f7eff6d" title="Broadcasts ACCEPT message.">sendAccept</a>( m.peerUserId,  <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a908e59a5f96ac724317c402a4f7ba744" title="Returns local IP address.">getLocalAddress</a> (), 
                <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a6655236f8322711b91ef0f9b799f892f" title="Returns used local UDP port.">getLocalPort</a> (), mySecret );

        <span class="comment">/* Create necessary objects needed to establish the call:</span>
<span class="comment">         * instances of the RemotePeer and CallContext. </span>
<span class="comment">         */</span>
        <a class="code" href="classprotocol_1_1_remote_peer.html" title="Encapsulates the link between the UDP channel and a CallContext.">RemotePeer</a> remotePeer = <span class="keyword">new</span> <a class="code" href="classprotocol_1_1_remote_peer.html" title="Encapsulates the link between the UDP channel and a CallContext.">RemotePeer</a>( this.<a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>, 
                m.peerUserId, peerAddr, m.peerPort );
        
        <a class="code" href="interfaceaudio_1_1_audio_interface.html" title="The abstract audio interface.">AudioInterface</a> codec = this.<a class="code" href="class_crypto_phone_app.html#a7eaf4402df3b1abb3bde0c0cef34204b" title="The instance of the Audio interface used to access microphone and speaker.">audioInterface</a>.<a class="code" href="interfaceaudio_1_1_audio_interface.html#afef6f8a11863a389a5d8841e555a571f" title="Creates new instance of the interface by choosing specified CODEC format.">getByFormat</a>( <a class="code" href="classprotocol_1_1_voice_p_d_u.html" title="VoicePDU - The PDU that carries voice payload.">VoicePDU</a>.<a class="code" href="classprotocol_1_1_voice_p_d_u.html#a3fb2387bfa40101a67b9171f2110c587" title="Voice PDU Subclass: G.711 a-Law.">ALAW</a> );
        
        <a class="code" href="classprotocol_1_1_call_context.html" title="CallContext deals with all the packets that are part of a specific call.">CallContext</a> call = <span class="keyword">new</span> <a class="code" href="classprotocol_1_1_call_context.html" title="CallContext deals with all the packets that are part of a specific call.">CallContext</a>( remotePeer, codec );
        call.<a class="code" href="classprotocol_1_1_call_context.html#a3bf9927065117525cf312d746b449618" title="Sets if this call is established.">setCallEstablished</a>( <span class="keyword">true</span> );
        <a class="code" href="class_crypto_phone_app.html#aab94ceafb0b41e812419d2ef860b15da" title="Indicates whether to monitor if peer is sending voice PDUs to us.">monitorIfPeerIsSendingVoice</a> = <span class="keyword">true</span>;
        
        <span class="comment">/* Report what we&#39;ve done.</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a> != null &amp;&amp; <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a>.<a class="code" href="classcrypto_1_1_public_encryptor.html#aed1f1bdf60dd9fd2122b822ef38a0e11" title="Returns if cipher is properly initialized.">isActive</a> () )
        {
            <span class="keywordflow">if</span> ( ! <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a>.<a class="code" href="classcrypto_1_1_public_encryptor.html#aa74763a92a6776fe395082648042ba4a" title="Returns if public key was verified.">isVerified</a> () ) {
                <a class="code" href="class_crypto_phone_app.html#abb25aaecf1b0f6f47afd12b38bf40f3b">securityState</a>.<a class="code" href="classui_1_1_j_sec_state.html#a6e54470d9ef9f2d8128565482f15c4f2" title="Stes new security state.">setState</a>( <a class="code" href="classui_1_1_j_sec_state.html" title="Image indicating security state (unsecured/secured-unverified/secured-trusted).">JSecState</a>.<a class="code" href="classui_1_1_j_sec_state.html#af9971acc8fd5f2ffaf51b61eac45883c" title="Possible security states.">State</a>.UNVERIFIED );
            } <span class="keywordflow">else</span>  {
                <a class="code" href="class_crypto_phone_app.html#abb25aaecf1b0f6f47afd12b38bf40f3b">securityState</a>.<a class="code" href="classui_1_1_j_sec_state.html#a6e54470d9ef9f2d8128565482f15c4f2" title="Stes new security state.">setState</a>( <a class="code" href="classui_1_1_j_sec_state.html" title="Image indicating security state (unsecured/secured-unverified/secured-trusted).">JSecState</a>.<a class="code" href="classui_1_1_j_sec_state.html#af9971acc8fd5f2ffaf51b61eac45883c" title="Possible security states.">State</a>.VERIFIED );
            }
            
            <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logOk&quot;</span>, <span class="stringliteral">&quot;***** Encrypted call established *****&quot;</span> );
            setTitle( <a class="code" href="class_crypto_phone_app.html#a4ff8f52c4cd52c0786221b1af5969ae7" title="The common application title prefix.">appTitle</a> + <span class="stringliteral">&quot;; Established ENCRYPTED call with &quot;</span> + verboseRemote ); 
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_crypto_phone_app.html#abb25aaecf1b0f6f47afd12b38bf40f3b">securityState</a>.<a class="code" href="classui_1_1_j_sec_state.html#a6e54470d9ef9f2d8128565482f15c4f2" title="Stes new security state.">setState</a>( <a class="code" href="classui_1_1_j_sec_state.html" title="Image indicating security state (unsecured/secured-unverified/secured-trusted).">JSecState</a>.<a class="code" href="classui_1_1_j_sec_state.html#af9971acc8fd5f2ffaf51b61eac45883c" title="Possible security states.">State</a>.UNSECURED );
            <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logError&quot;</span>, <span class="stringliteral">&quot;***** Un-encrypted call established *****&quot;</span> );
            setTitle( <a class="code" href="class_crypto_phone_app.html#a4ff8f52c4cd52c0786221b1af5969ae7" title="The common application title prefix.">appTitle</a> + <span class="stringliteral">&quot;; Established PLAIN call with &quot;</span> + verboseRemote ); 
        }

        this.<a class="code" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5" title="The last PBX control message sent to us (waiting to be handled)">lastMessageFromPBX</a> = null;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aa57b98fefa93ec098ee44b3c1a2d1d56"></a><!-- doxytag: member="CryptoPhoneApp::actionPerformed" ref="aa57b98fefa93ec098ee44b3c1a2d1d56" args="(ActionEvent ae)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.actionPerformed </td>
          <td>(</td>
          <td class="paramtype">ActionEvent&#160;</td>
          <td class="paramname"> <em>ae</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handles events from Swing timer and buttons. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00703">703</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00181">dialButton</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00609">dialButton_Clicked()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00183">hangupButton</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00639">hangupButton_Clicked()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00180">listPeersButton</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00601">listPeersButton_Clicked()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00114">mainTimer</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00738">mainTimerEvent()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00182">secureDialButton</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00624">secureDialButton_Clicked()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00179">sendButton</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00589">sendButton_Clicked()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( ae.getSource () == <a class="code" href="class_crypto_phone_app.html#a790ad94f30f231bd6bcfed75b2836ad2" title="Main timer (elapses every 1000 ms)">mainTimer</a> ) {
            <a class="code" href="class_crypto_phone_app.html#ad8e7fbdd972917b6601716fb4753549d" title="Handles events from application&amp;#39;s mainTimer (an instance of the Swing timer).">mainTimerEvent</a> ();
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ae.getSource () == <a class="code" href="class_crypto_phone_app.html#a1cf30ea362184c2bd05a4c3e5129fee3">sendButton</a> ) {
            <a class="code" href="class_crypto_phone_app.html#af2074d18d0a0c7091ebd7b4ea24ab0ab" title="Parses input text entered by the user in inputMsg.">sendButton_Clicked</a> ();
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ae.getSource () == <a class="code" href="class_crypto_phone_app.html#a4c28f027fd2c4797c024ac4f2bf38104">listPeersButton</a> ) {
            <a class="code" href="class_crypto_phone_app.html#aecaed7d05976953fa24924ba9f6ac7dd" title="Performs :list command.">listPeersButton_Clicked</a> ();
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ae.getSource () == <a class="code" href="class_crypto_phone_app.html#a4f9c849a4193e21cd8414e4ada971000">dialButton</a> ) {
            <a class="code" href="class_crypto_phone_app.html#a3c3f09a2e2f64f505746bb118e46215d" title="Performs :invite command.">dialButton_Clicked</a> ();
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ae.getSource () == <a class="code" href="class_crypto_phone_app.html#a70d95304c59a86fd1eed973e295b2928">secureDialButton</a> ) {
            <a class="code" href="class_crypto_phone_app.html#a655f5dd1ce1998f22b45b4854a5f8c85" title="Performs :invite+ command.">secureDialButton_Clicked</a> ();
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ae.getSource () == <a class="code" href="class_crypto_phone_app.html#ac01e5b11a36144035b25200bbc1fab61">hangupButton</a> ) {
            <a class="code" href="class_crypto_phone_app.html#ab43da0d80aad6296253e5ede356738e9" title="Performs :bye command.">hangupButton_Clicked</a> ();
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aa5bfa56e527b8d58eaf55336761c7f8f"></a><!-- doxytag: member="CryptoPhoneApp::attention" ref="aa5bfa56e527b8d58eaf55336761c7f8f" args="(String message)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.attention </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>message</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Displays attention messages to the user from Log subsystem. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00857">857</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00922">report()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( message.startsWith( <span class="stringliteral">&quot;Error&quot;</span> ) ) {
            <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logError&quot;</span>, message );
        } <span class="keywordflow">else</span> {
            <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logInfo&quot;</span>, message );
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ae54e727b812f203eaf6615e6c40e6de8"></a><!-- doxytag: member="CryptoPhoneApp::clearLogArea" ref="ae54e727b812f203eaf6615e6c40e6de8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.clearLogArea </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Clears log area (with the contents of the "empty" template) </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l02031">2031</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l01982">getContentsFromResourceOrFile()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00174">logArea</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="class_crypto_phone_app.html#aa3da814a861bc895c842f67845ce7c8c" title="The log area formatted in HTML.">logArea</a>.setContentType( <span class="stringliteral">&quot;text/html&quot;</span> );
        StringBuffer sb = <a class="code" href="class_crypto_phone_app.html#a8a69b95f6b5cfb28e716ba5ddebb9372" title="Reads contents of the text file using URL class.">getContentsFromResourceOrFile</a>( <span class="stringliteral">&quot;resources/empty.html&quot;</span> );
        <span class="keywordflow">if</span> ( sb != null ) {
            <a class="code" href="class_crypto_phone_app.html#aa3da814a861bc895c842f67845ce7c8c" title="The log area formatted in HTML.">logArea</a>.setText( sb.toString () );
        } <span class="keywordflow">else</span> {
            <a class="code" href="class_crypto_phone_app.html#aa3da814a861bc895c842f67845ce7c8c" title="The log area formatted in HTML.">logArea</a>.setText( <span class="stringliteral">&quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span> );
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aa1f8269dab7943299f3537ceb9425211"></a><!-- doxytag: member="CryptoPhoneApp::createEventListeners" ref="aa1f8269dab7943299f3537ceb9425211" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.createEventListeners </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates event listeners. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00478">478</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00188">autoAnswer</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00181">dialButton</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00647">formWindowClosing()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00872">getUserId()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00183">hangupButton</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00185">inputMsg</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00180">listPeersButton</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00174">logArea</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00182">secureDialButton</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00179">sendButton</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00187">userId</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        addWindowListener( <span class="keyword">new</span> java.awt.event.WindowAdapter () {
            <span class="keyword">public</span> <span class="keywordtype">void</span> windowClosing( java.awt.event.WindowEvent evt ) {
                <a class="code" href="class_crypto_phone_app.html#a7490652207cab4965f13ea019ee66cbe" title="Closes application by gracefully terminating all threads.">formWindowClosing</a>( evt );
            }
        } );

        <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>.addKeyListener( <span class="keyword">this</span> );
        <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>.addKeyListener( <span class="keyword">this</span> );
        <a class="code" href="class_crypto_phone_app.html#a5302f5b8ebbcff39390cbbb21e2b06b9">autoAnswer</a>.addKeyListener( <span class="keyword">this</span> );
        <a class="code" href="class_crypto_phone_app.html#aa3da814a861bc895c842f67845ce7c8c" title="The log area formatted in HTML.">logArea</a>.addKeyListener( <span class="keyword">this</span> );

        <a class="code" href="class_crypto_phone_app.html#a1cf30ea362184c2bd05a4c3e5129fee3">sendButton</a>.addKeyListener( <span class="keyword">this</span> );
        <a class="code" href="class_crypto_phone_app.html#a4c28f027fd2c4797c024ac4f2bf38104">listPeersButton</a>.addKeyListener( <span class="keyword">this</span> );
        <a class="code" href="class_crypto_phone_app.html#a4f9c849a4193e21cd8414e4ada971000">dialButton</a>.addKeyListener( <span class="keyword">this</span> );
        <a class="code" href="class_crypto_phone_app.html#a70d95304c59a86fd1eed973e295b2928">secureDialButton</a>.addKeyListener( <span class="keyword">this</span> );
        <a class="code" href="class_crypto_phone_app.html#ac01e5b11a36144035b25200bbc1fab61">hangupButton</a>.addKeyListener( <span class="keyword">this</span> );
        
        <a class="code" href="class_crypto_phone_app.html#a1cf30ea362184c2bd05a4c3e5129fee3">sendButton</a>.addActionListener( <span class="keyword">this</span> );
        <a class="code" href="class_crypto_phone_app.html#a4c28f027fd2c4797c024ac4f2bf38104">listPeersButton</a>.addActionListener( <span class="keyword">this</span> );
        <a class="code" href="class_crypto_phone_app.html#a4f9c849a4193e21cd8414e4ada971000">dialButton</a>.addActionListener( <span class="keyword">this</span> );
        <a class="code" href="class_crypto_phone_app.html#a70d95304c59a86fd1eed973e295b2928">secureDialButton</a>.addActionListener( <span class="keyword">this</span> );
        <a class="code" href="class_crypto_phone_app.html#ac01e5b11a36144035b25200bbc1fab61">hangupButton</a>.addActionListener( <span class="keyword">this</span> );

        <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>.addFocusListener(
                <span class="keyword">new</span> FocusListener () {
                    <span class="keyword">public</span> <span class="keywordtype">void</span> focusGained( FocusEvent evt ) {
                        <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>.selectAll ();
                    }
                    <span class="keyword">public</span> <span class="keywordtype">void</span> focusLost( FocusEvent evt ) {
                    }
                }
            );

        <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>.addFocusListener(
                <span class="keyword">new</span> FocusListener () {
                    <span class="keyword">public</span> <span class="keywordtype">void</span> focusGained( FocusEvent evt ) {
                        <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>.selectAll ();
                    }
                    <span class="keyword">public</span> <span class="keywordtype">void</span> focusLost( FocusEvent evt ) {
                        <span class="keyword">synchronized</span>( <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a> ) {
                            <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>.setText( <a class="code" href="class_crypto_phone_app.html#ac90d3daccce7d2003633305b3d4b6087" title="Returns configured user ID (username).">getUserId</a> () );
                        }
                    }
                }
            );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ac8264aeb03fe1e690d7ad285c08447ad"></a><!-- doxytag: member="CryptoPhoneApp::createLayout" ref="ac8264aeb03fe1e690d7ad285c08447ad" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.createLayout </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates layout of the GUI components. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00376">376</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00181">dialButton</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00183">hangupButton</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00186">idLabel</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00184">imsgLabel</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00185">inputMsg</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00180">listPeersButton</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00174">logArea</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00182">secureDialButton</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00178">securityState</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00179">sendButton</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00187">userId</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="comment">/*  Upper: status, inputMsg | buttons | idLabel, userId </span>
<span class="comment">         *  Lower: scrolled logArea </span>
<span class="comment">         */</span>
        GroupLayout layout = <span class="keyword">new</span> GroupLayout( getContentPane () );
        getContentPane().setLayout( layout );
        layout.setAutoCreateContainerGaps( <span class="keyword">true</span> );
        layout.setAutoCreateGaps( <span class="keyword">true</span> );
        
        JScrollPane logPane = <span class="keyword">new</span> JScrollPane ();
        logPane.setViewportView( <a class="code" href="class_crypto_phone_app.html#aa3da814a861bc895c842f67845ce7c8c" title="The log area formatted in HTML.">logArea</a> );

        JSeparator vertS1 = <span class="keyword">new</span> JSeparator( JSeparator.VERTICAL );
        JSeparator vertS2 = <span class="keyword">new</span> JSeparator( JSeparator.VERTICAL );

        <span class="keywordtype">int</span> textH = 26; <span class="comment">// fixed text field height</span>
        <span class="keywordtype">int</span> iconH = 32; <span class="comment">// fixed icon height</span>
        <span class="keywordtype">int</span> iconW = 32; <span class="comment">// fixed icon width</span>
        
        layout.setHorizontalGroup
        (
            layout
                .createParallelGroup( GroupLayout.Alignment.LEADING )
                .addGroup
                ( 
                    layout
                        .createSequentialGroup ()
                        .addGroup
                        ( 
                            layout
                                .createParallelGroup( GroupLayout.Alignment.LEADING )
                                .addGroup
                                (
                                    GroupLayout.Alignment.TRAILING, 
                                    layout
                                        .createSequentialGroup ()
                                        .addComponent( <a class="code" href="class_crypto_phone_app.html#abb25aaecf1b0f6f47afd12b38bf40f3b">securityState</a> )
                                        .addGap( 5 )
                                        .addComponent( <a class="code" href="class_crypto_phone_app.html#acb3acad1016510c342c2756d038852c0">imsgLabel</a> )
                                        .addGap( 0 )
                                        .addComponent( <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a> )
                                        .addComponent( <a class="code" href="class_crypto_phone_app.html#a1cf30ea362184c2bd05a4c3e5129fee3">sendButton</a>, iconW, iconW, iconW )
                                        .addGap( 15 )
                                        .addComponent( vertS1, 4, 4, 4 )
                                        .addGap( 10 )
                                        .addComponent( <a class="code" href="class_crypto_phone_app.html#a4c28f027fd2c4797c024ac4f2bf38104">listPeersButton</a>, iconW, iconW, iconW )
                                        .addComponent( <a class="code" href="class_crypto_phone_app.html#a4f9c849a4193e21cd8414e4ada971000">dialButton</a>, iconW, iconW, iconW )
                                        .addComponent( <a class="code" href="class_crypto_phone_app.html#a70d95304c59a86fd1eed973e295b2928">secureDialButton</a>, iconW, iconW, iconW )
                                        .addComponent( <a class="code" href="class_crypto_phone_app.html#ac01e5b11a36144035b25200bbc1fab61">hangupButton</a>, iconW, iconW, iconW )
                                        .addGap( 15 )
                                        <span class="comment">// .addComponent( autoAnswer )</span>
                                        <span class="comment">// .addGap( 10 )</span>
                                        .addComponent( vertS2, 4, 4, 4 )
                                        .addGap( 10 )
                                        .addComponent( <a class="code" href="class_crypto_phone_app.html#a04c29b8a2c04bd8bfdaefd118cdba087">idLabel</a> )
                                        .addGap( 5 )
                                        .addComponent( <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a> )
                                )
                                .addComponent( logPane )
                        )
                )
        );
        
        layout.setVerticalGroup
        (
            layout
                .createParallelGroup( GroupLayout.Alignment.LEADING )
                .addGroup
                (
                    layout
                        .createSequentialGroup ()
                        .addGroup
                        (
                            layout
                                .createParallelGroup( GroupLayout.Alignment.CENTER )
                                .addComponent( <a class="code" href="class_crypto_phone_app.html#abb25aaecf1b0f6f47afd12b38bf40f3b">securityState</a> )
                                .addComponent( <a class="code" href="class_crypto_phone_app.html#acb3acad1016510c342c2756d038852c0">imsgLabel</a> )
                                .addComponent( <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>, textH, textH, textH )
                                .addComponent( <a class="code" href="class_crypto_phone_app.html#a1cf30ea362184c2bd05a4c3e5129fee3">sendButton</a>, iconH, iconH, iconH )
                                .addComponent( vertS1, iconH, iconH, iconH )
                                .addComponent( <a class="code" href="class_crypto_phone_app.html#a4c28f027fd2c4797c024ac4f2bf38104">listPeersButton</a>, iconH, iconH, iconH )
                                .addComponent( <a class="code" href="class_crypto_phone_app.html#a4f9c849a4193e21cd8414e4ada971000">dialButton</a>, iconH, iconH, iconH )
                                .addComponent( <a class="code" href="class_crypto_phone_app.html#a70d95304c59a86fd1eed973e295b2928">secureDialButton</a>, iconH, iconH, iconH )
                                .addComponent( <a class="code" href="class_crypto_phone_app.html#ac01e5b11a36144035b25200bbc1fab61">hangupButton</a>, iconH, iconH, iconH )
                                .addComponent( vertS2, iconH, iconH, iconH )
                                .addComponent( <a class="code" href="class_crypto_phone_app.html#a04c29b8a2c04bd8bfdaefd118cdba087">idLabel</a> )
                                .addComponent( <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>, textH, textH, textH )
                                <span class="comment">//.addComponent( autoAnswer )</span>
                        )
                        .addComponent( logPane )
                )
        );
        
        pack();
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a5df57190d95f3874e0d4a4a9cb92db61"></a><!-- doxytag: member="CryptoPhoneApp::deferredOnAccept" ref="a5df57190d95f3874e0d4a4a9cb92db61" args="(final PBXClient.ControlMessage m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.deferredOnAccept </td>
          <td>(</td>
          <td class="paramtype">final PBXClient.ControlMessage&#160;</td>
          <td class="paramname"> <em>m</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>On ACCEPT call-back is triggered when PBXClient receives accepting message (indicating that the peer has accepted our invite). </p>
<p>It deserializes encrypted secret key used for peer-to-peer communication (if any) and creates instance for the call (CallContext class) as well the remote peer (RemotePeer class), and binds them to specific CODEC (of the audio interface) and the UDP channel (for voice transmission).</p>
<p>The call is finally established at this point. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l01624">1624</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_voice_p_d_u_8java_source.html#l00019">protocol.VoicePDU.ALAW</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00077">appTitle</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00141">audioInterface</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00157">currentInvite</a>, <a class="el" href="_cipher_engine_8java_source.html#l00112">crypto.CipherEngine.deserializeEncryptedSecretKey()</a>, <a class="el" href="interfaceaudio_1_1_audio_interface.html#afef6f8a11863a389a5d8841e555a571f">audio.AudioInterface.getByFormat()</a>, <a class="el" href="_symmetric_cipher_8java_source.html#l00160">crypto.SymmetricCipher.getVerificatorName()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00125">protocol.DatagramChannel.hasRemotePeer()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00163">inviteTimeout</a>, <a class="el" href="_symmetric_cipher_8java_source.html#l00142">crypto.SymmetricCipher.isActive()</a>, <a class="el" href="_symmetric_cipher_8java_source.html#l00150">crypto.SymmetricCipher.isVerified()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00146">lastMessageFromPBX</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00169">monitorIfPeerIsSendingVoice</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00922">report()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00178">securityState</a>, <a class="el" href="_call_context_8java_source.html#l00151">protocol.CallContext.setCallEstablished()</a>, <a class="el" href="_j_sec_state_8java_source.html#l00072">ui.JSecState.setState()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00136">udpChannel</a>, and <a class="el" href="_datagram_channel_8java_source.html#l00097">protocol.DatagramChannel.useSymmetricCipher()</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00983">onAccept()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( m.peerPort &lt; 1 || m.peerPort &gt; 65535 ) {
            <span class="keywordflow">return</span>;
        }
        
        String verboseRemote = m.getVerboseRemote ();
        
        <span class="comment">/* Ignore message if we already have the call in progress.</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a221b7dbd0fef9631bb96cff8fc871cb2" title="Returns if there is active remote peer.">hasRemotePeer</a> () ) {
            <span class="keywordflow">return</span>;
        }
        
        <a class="code" href="class_crypto_phone_app.html#ab791babb2bcfea431164e9ca91cb496c" title="Timer used to detect unresolved invite (i.e.">inviteTimeout</a> = -1;
        <a class="code" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934" title="The remote peer (its user id) that we are currently inviting to a call.">currentInvite</a> = null;
        
        <span class="comment">/* Resolve peers IP address</span>
<span class="comment">         */</span>
        InetAddress peerAddr = null;
        <span class="keywordflow">try</span> {
            peerAddr = InetAddress.getByName( m.peerAddr );
        } <span class="keywordflow">catch</span>( UnknownHostException e ) {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.exception( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.ERROR, e );
            this.<a class="code" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5" title="The last PBX control message sent to us (waiting to be handled)">lastMessageFromPBX</a> = null;
            <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logError&quot;</span>, <span class="stringliteral">&quot;Unknown remote host &#39;&quot;</span> + m.peerAddr 
                    + <span class="stringliteral">&quot;&#39;; clearing the call...&quot;</span> );
            <span class="keywordflow">return</span>;
        }

        <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logInfo&quot;</span>, <span class="stringliteral">&quot;User &quot;</span> + verboseRemote + <span class="stringliteral">&quot; has accepted our invite&quot;</span> );
        
        <span class="comment">/* Deserialize encrypted remote secret key and decrypt it with our private key</span>
<span class="comment">         */</span>
        <a class="code" href="classcrypto_1_1_symmetric_cipher.html" title="Instances of the Symmetric cipher class arew used to cipher peer-to-peer datagram packets...">SymmetricCipher</a> cipher = null;
        <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a126ecd1b608a2e495e93ffc6d768c91b" title="Sets cipher to be used for PDU ciphering.">useSymmetricCipher</a>( null );

        <span class="keywordflow">if</span> ( m.secret != null ) 
        {
            cipher = <a class="code" href="classcrypto_1_1_cipher_engine.html" title="Common ciphering engine (for the whole application) providing:">CipherEngine</a>.<a class="code" href="classcrypto_1_1_cipher_engine.html#ac894772649ab2e9cf4bf60eebb27872c" title="Reconstructs secret key from Base64 respresentation of encrypted (using our public key) serialized se...">deserializeEncryptedSecretKey</a>( m.secret );
            
            <span class="keywordflow">if</span> ( cipher.<a class="code" href="classcrypto_1_1_symmetric_cipher.html#af44da0b10c949758bd23c76b8f0cd4ca" title="Returns if cipher is properly initialized.">isActive</a> () ) {
                <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a126ecd1b608a2e495e93ffc6d768c91b" title="Sets cipher to be used for PDU ciphering.">useSymmetricCipher</a>( cipher );
            } <span class="keywordflow">else</span> {
                cipher = null;
            }
        }

        <span class="comment">/* Create necessary objects needed to establish the call</span>
<span class="comment">         */</span>
        <a class="code" href="classprotocol_1_1_remote_peer.html" title="Encapsulates the link between the UDP channel and a CallContext.">RemotePeer</a> remotePeer = <span class="keyword">new</span> <a class="code" href="classprotocol_1_1_remote_peer.html" title="Encapsulates the link between the UDP channel and a CallContext.">RemotePeer</a>( this.<a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>, m.peerUserId, 
                peerAddr, m.peerPort );
        
        <a class="code" href="interfaceaudio_1_1_audio_interface.html" title="The abstract audio interface.">AudioInterface</a> codec = this.<a class="code" href="class_crypto_phone_app.html#a7eaf4402df3b1abb3bde0c0cef34204b" title="The instance of the Audio interface used to access microphone and speaker.">audioInterface</a>.<a class="code" href="interfaceaudio_1_1_audio_interface.html#afef6f8a11863a389a5d8841e555a571f" title="Creates new instance of the interface by choosing specified CODEC format.">getByFormat</a>( <a class="code" href="classprotocol_1_1_voice_p_d_u.html" title="VoicePDU - The PDU that carries voice payload.">VoicePDU</a>.<a class="code" href="classprotocol_1_1_voice_p_d_u.html#a3fb2387bfa40101a67b9171f2110c587" title="Voice PDU Subclass: G.711 a-Law.">ALAW</a> );
        
        <a class="code" href="classprotocol_1_1_call_context.html" title="CallContext deals with all the packets that are part of a specific call.">CallContext</a> call = <span class="keyword">new</span> <a class="code" href="classprotocol_1_1_call_context.html" title="CallContext deals with all the packets that are part of a specific call.">CallContext</a>( remotePeer, codec );
        call.<a class="code" href="classprotocol_1_1_call_context.html#a3bf9927065117525cf312d746b449618" title="Sets if this call is established.">setCallEstablished</a>( <span class="keyword">true</span> );
        <a class="code" href="class_crypto_phone_app.html#aab94ceafb0b41e812419d2ef860b15da" title="Indicates whether to monitor if peer is sending voice PDUs to us.">monitorIfPeerIsSendingVoice</a> = <span class="keyword">true</span>;

        <span class="keywordflow">if</span> ( cipher != null &amp;&amp; cipher.<a class="code" href="classcrypto_1_1_symmetric_cipher.html#af44da0b10c949758bd23c76b8f0cd4ca" title="Returns if cipher is properly initialized.">isActive</a> () )
        {
            <span class="keywordflow">if</span> ( ! cipher.<a class="code" href="classcrypto_1_1_symmetric_cipher.html#a235c1ba9bb69890e20ea102c5e6e5752" title="Returns if public key was verified.">isVerified</a> () ) 
            {
                <a class="code" href="class_crypto_phone_app.html#abb25aaecf1b0f6f47afd12b38bf40f3b">securityState</a>.<a class="code" href="classui_1_1_j_sec_state.html#a6e54470d9ef9f2d8128565482f15c4f2" title="Stes new security state.">setState</a>( <a class="code" href="classui_1_1_j_sec_state.html" title="Image indicating security state (unsecured/secured-unverified/secured-trusted).">JSecState</a>.<a class="code" href="classui_1_1_j_sec_state.html#af9971acc8fd5f2ffaf51b61eac45883c" title="Possible security states.">State</a>.UNVERIFIED );
                <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logError&quot;</span>, <span class="stringliteral">&quot;Secret key from &quot;</span> + verboseRemote
                        + <span class="stringliteral">&quot; could not be authenticated.&quot;</span> );
            }
            <span class="keywordflow">else</span> 
            {
                <a class="code" href="class_crypto_phone_app.html#abb25aaecf1b0f6f47afd12b38bf40f3b">securityState</a>.<a class="code" href="classui_1_1_j_sec_state.html#a6e54470d9ef9f2d8128565482f15c4f2" title="Stes new security state.">setState</a>( <a class="code" href="classui_1_1_j_sec_state.html" title="Image indicating security state (unsecured/secured-unverified/secured-trusted).">JSecState</a>.<a class="code" href="classui_1_1_j_sec_state.html#af9971acc8fd5f2ffaf51b61eac45883c" title="Possible security states.">State</a>.VERIFIED );
                <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logOk&quot;</span>, <span class="stringliteral">&quot;Secret key from &quot;</span> + verboseRemote
                        + <span class="stringliteral">&quot; authenticated with public key &#39;&quot;</span> 
                        + cipher.<a class="code" href="classcrypto_1_1_symmetric_cipher.html#ac86936243e91c456b8ee999cc708f637" title="Returns if name of the verificator from authorized keys that verified this public key...">getVerificatorName</a> () + <span class="stringliteral">&quot;&#39;&quot;</span> );
            }
            
            <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logOk&quot;</span>, <span class="stringliteral">&quot;***** Encrypted call established *****&quot;</span> );
            setTitle( <a class="code" href="class_crypto_phone_app.html#a4ff8f52c4cd52c0786221b1af5969ae7" title="The common application title prefix.">appTitle</a> + <span class="stringliteral">&quot;; Established ENCRYPTED call with &quot;</span> + verboseRemote );
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_crypto_phone_app.html#abb25aaecf1b0f6f47afd12b38bf40f3b">securityState</a>.<a class="code" href="classui_1_1_j_sec_state.html#a6e54470d9ef9f2d8128565482f15c4f2" title="Stes new security state.">setState</a>( <a class="code" href="classui_1_1_j_sec_state.html" title="Image indicating security state (unsecured/secured-unverified/secured-trusted).">JSecState</a>.<a class="code" href="classui_1_1_j_sec_state.html#af9971acc8fd5f2ffaf51b61eac45883c" title="Possible security states.">State</a>.UNSECURED );
            <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logError&quot;</span>, <span class="stringliteral">&quot;***** Un-encrypted call established *****&quot;</span> );
            setTitle( <a class="code" href="class_crypto_phone_app.html#a4ff8f52c4cd52c0786221b1af5969ae7" title="The common application title prefix.">appTitle</a> + <span class="stringliteral">&quot;; Established PLAIN call with &quot;</span> + verboseRemote ); 
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a2b5c3d4a45a33d1f19a2ed765d5b8205"></a><!-- doxytag: member="CryptoPhoneApp::deferredOnBye" ref="a2b5c3d4a45a33d1f19a2ed765d5b8205" args="(final PBXClient.ControlMessage m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.deferredOnBye </td>
          <td>(</td>
          <td class="paramtype">final PBXClient.ControlMessage&#160;</td>
          <td class="paramname"> <em>m</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>On BYE call-back is triggered when PBXClient receives 'bye' message (indicating that the peer is clearing i.e. </p>
<p>hanging-up the call). </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l01714">1714</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00141">audioInterface</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00157">currentInvite</a>, <a class="el" href="_datagram_channel_8java_source.html#l00125">protocol.DatagramChannel.hasRemotePeer()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00163">inviteTimeout</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00146">lastMessageFromPBX</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00833">logMessage()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00109">pbxChannelStatus</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00151">remotePublicKey</a>, <a class="el" href="_datagram_channel_8java_source.html#l00153">protocol.DatagramChannel.removePeer()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00922">report()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00178">securityState</a>, <a class="el" href="_j_sec_state_8java_source.html#l00072">ui.JSecState.setState()</a>, <a class="el" href="interfaceaudio_1_1_audio_interface.html#ab4c03087d55a96be90fc4531f359a06e">audio.AudioInterface.stopRinging()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00136">udpChannel</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00187">userId</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00998">onBye()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        String verboseRemote = m.getVerboseRemote ();
        
        <span class="comment">/* If we do not have a call, than remote has rejected our earlier invite</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( ! <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a221b7dbd0fef9631bb96cff8fc871cb2" title="Returns if there is active remote peer.">hasRemotePeer</a> () &amp;&amp; <a class="code" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934" title="The remote peer (its user id) that we are currently inviting to a call.">currentInvite</a> != null ) 
        {
            <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logInfo&quot;</span>, <span class="stringliteral">&quot;User &quot;</span> + verboseRemote + <span class="stringliteral">&quot; rejected our invite&quot;</span> );
        }
        <span class="keywordflow">else</span> <span class="comment">/* otheresie, it is a hang-up of the existing call */</span>
        {
            <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logInfo&quot;</span>, <span class="stringliteral">&quot;User &quot;</span> + verboseRemote + <span class="stringliteral">&quot; is clearing the call&quot;</span> );
            <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a353a747cc114cba3204e1fc2ecfc7ffc" title="Detaches peer and all its call from the UDP receiver.">removePeer</a> ();
        }

        <a class="code" href="class_crypto_phone_app.html#a7eaf4402df3b1abb3bde0c0cef34204b" title="The instance of the Audio interface used to access microphone and speaker.">audioInterface</a>.<a class="code" href="interfaceaudio_1_1_audio_interface.html#ab4c03087d55a96be90fc4531f359a06e" title="Stops ringing signal.">stopRinging</a> ();
        <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>.setEnabled( <span class="keyword">true</span> ); <span class="comment">// enable back changing user ID</span>
        
        <a class="code" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5" title="The last PBX control message sent to us (waiting to be handled)">lastMessageFromPBX</a> = null;
        <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a> = null;
        
        <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logInfo&quot;</span>, <span class="stringliteral">&quot;***** Call Ended *****&quot;</span> );
        <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>( <span class="stringliteral">&quot;&lt;hr/&gt;&quot;</span> );
        
        <a class="code" href="class_crypto_phone_app.html#abb25aaecf1b0f6f47afd12b38bf40f3b">securityState</a>.<a class="code" href="classui_1_1_j_sec_state.html#a6e54470d9ef9f2d8128565482f15c4f2" title="Stes new security state.">setState</a>( <a class="code" href="classui_1_1_j_sec_state.html" title="Image indicating security state (unsecured/secured-unverified/secured-trusted).">JSecState</a>.<a class="code" href="classui_1_1_j_sec_state.html#af9971acc8fd5f2ffaf51b61eac45883c" title="Possible security states.">State</a>.UNSECURED );
        setTitle( <a class="code" href="class_crypto_phone_app.html#a92d666e527bb56bc298a903e12f8069e" title="The last status message of the PBX channel (posted by the setPbxStatus()).">pbxChannelStatus</a> );
        
        <a class="code" href="class_crypto_phone_app.html#ab791babb2bcfea431164e9ca91cb496c" title="Timer used to detect unresolved invite (i.e.">inviteTimeout</a> = -1;
        <a class="code" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934" title="The remote peer (its user id) that we are currently inviting to a call.">currentInvite</a> = null;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aa5c2ce41e5a2695668be72948f1b207f"></a><!-- doxytag: member="CryptoPhoneApp::deferredOnInstantMessage" ref="aa5c2ce41e5a2695668be72948f1b207f" args="(final PBXClient.ControlMessage m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.deferredOnInstantMessage </td>
          <td>(</td>
          <td class="paramtype">final PBXClient.ControlMessage&#160;</td>
          <td class="paramname"> <em>m</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>On IMSG call-back is triggered when PBXClient receives private instant message (encrypted with session's secret key). </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l01750">1750</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_symmetric_cipher_8java_source.html#l00228">crypto.SymmetricCipher.decrypt()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00109">protocol.DatagramChannel.getUsedSymmetricCipher()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00936">reportIncomingTextMessage()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00136">udpChannel</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01013">onInstantMessage()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="comment">/* Get symmetric ciphering engine for PDUs and messages (if any).</span>
<span class="comment">         */</span>
        <a class="code" href="classcrypto_1_1_symmetric_cipher.html" title="Instances of the Symmetric cipher class arew used to cipher peer-to-peer datagram packets...">SymmetricCipher</a> cipher = <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a5396fcc387e78a8bb6c318153683069e" title="Gets current cipher used for PDU ciphering.">getUsedSymmetricCipher</a> ();
        <span class="keywordflow">if</span> ( cipher == null ) {
            <span class="keywordflow">return</span>;
        }

        <span class="comment">/* Decrypt instant message and display highlighted contents to the user</span>
<span class="comment">         */</span>
        String clearText = cipher.<a class="code" href="classcrypto_1_1_symmetric_cipher.html#a187df34331cae73fc1cd1129965236d1" title="Decrypts cipher text first then discards random preamble of the given length.">decrypt</a>( m.secret );
        <span class="keywordflow">if</span> ( clearText != null ) 
        {
            <span class="comment">/* </span>
<span class="comment">             */</span>
            <a class="code" href="class_crypto_phone_app.html#a3e002ea8ef5e007c280b23ffc0b592f3" title="Reports incoming message.">reportIncomingTextMessage</a>( <span class="stringliteral">&quot;secureMessage&quot;</span>, 
                    m.peerUserId + <span class="stringliteral">&quot; [encrypted]&quot;</span>, clearText ); 
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="adfdb1b2d2bc5d721f6158a67517beaaf"></a><!-- doxytag: member="CryptoPhoneApp::deferredOnInvite" ref="adfdb1b2d2bc5d721f6158a67517beaaf" args="(final PBXClient.ControlMessage m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.deferredOnInvite </td>
          <td>(</td>
          <td class="paramtype">final PBXClient.ControlMessage&#160;</td>
          <td class="paramname"> <em>m</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>On INVITE call-back is triggered when PBXClient receives inviting message (indicating that someone is calling us). </p>
<p>It starts ringing and if the application is in auto-answer mode, it accepts incoming call immediately. Otherwise it presents alerting message to the user with information about who's calling. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l01501">1501</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l01857">acceptIncomingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00077">appTitle</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00141">audioInterface</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00188">autoAnswer</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00220">pbx.PBXClient.getLocalAddress()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00089">protocol.DatagramChannel.getLocalPort()</a>, <a class="el" href="_cipher_engine_8java_source.html#l00066">crypto.CipherEngine.getSignedPublicKey()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00125">protocol.DatagramChannel.hasRemotePeer()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00146">lastMessageFromPBX</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00833">logMessage()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00104">pbxChannel</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00922">report()</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00595">pbx.PBXClient.sendBye()</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00571">pbx.PBXClient.sendRing()</a>, <a class="el" href="interfaceaudio_1_1_audio_interface.html#a1fdd6ac91cb5c8deb9706a3575deb672">audio.AudioInterface.startRinging()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01775">tryToVerifyInvitingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00136">udpChannel</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00187">userId</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00953">onInvite()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( m.peerPort &lt; 1 || m.peerPort &gt; 65535 ) {
            <span class="keywordflow">return</span>;
        }
        
        String verboseRemote = m.getVerboseRemote ();

        <span class="comment">/* Reject new calls if we already have the call in progress</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a221b7dbd0fef9631bb96cff8fc871cb2" title="Returns if there is active remote peer.">hasRemotePeer</a> () ) 
        {
            <span class="comment">/* Send &#39;bye&#39; message to remote peer who is inviting us</span>
<span class="comment">             */</span>
            <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a0d3465a16cbcbe10f04292cb091d0699" title="Broadcasts BYE message.">sendBye</a>( m.peerUserId, <span class="stringliteral">&quot;0.0.0.0&quot;</span>, 0 );  
            <span class="keywordflow">return</span>;
        }

        this.<a class="code" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5" title="The last PBX control message sent to us (waiting to be handled)">lastMessageFromPBX</a> = m;
        
        <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>( <span class="stringliteral">&quot;&lt;hr/&gt;&quot;</span> );
        <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logInfo&quot;</span>, <span class="stringliteral">&quot;User &quot;</span> + verboseRemote + <span class="stringliteral">&quot; is inviting us...&quot;</span> );

        <span class="keywordflow">if</span> ( m.secret == null ) {
            setTitle( <a class="code" href="class_crypto_phone_app.html#a4ff8f52c4cd52c0786221b1af5969ae7" title="The common application title prefix.">appTitle</a> + <span class="stringliteral">&quot;; Incoming PLAIN call from &quot;</span> + verboseRemote ); 
        } <span class="keywordflow">else</span> {
            setTitle( <a class="code" href="class_crypto_phone_app.html#a4ff8f52c4cd52c0786221b1af5969ae7" title="The common application title prefix.">appTitle</a> + <span class="stringliteral">&quot;; Incoming ENCRYPTED call from &quot;</span> + verboseRemote ); 
        }
        
        this.<a class="code" href="class_crypto_phone_app.html#a7eaf4402df3b1abb3bde0c0cef34204b" title="The instance of the Audio interface used to access microphone and speaker.">audioInterface</a>.<a class="code" href="interfaceaudio_1_1_audio_interface.html#a1fdd6ac91cb5c8deb9706a3575deb672" title="Starts ringing signal.">startRinging</a> ();
        <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>.setEnabled( <span class="keyword">false</span> ); <span class="comment">// disable changing user ID</span>

        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a5302f5b8ebbcff39390cbbb21e2b06b9">autoAnswer</a>.isSelected () )
        {
            <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logInfo&quot;</span>, <span class="stringliteral">&quot;Auto-answering the call...&quot;</span> );
            <a class="code" href="class_crypto_phone_app.html#a22263d1bb4efd460d3332a533afdcfe7" title="Accepts incoming invite.">acceptIncomingCall</a>( <span class="comment">/*secured*/</span> <span class="keyword">true</span> );
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_crypto_phone_app.html#a781502d3e62bb8d8ad78fd0388472c2a" title="Verifies invitor&amp;#39;s public key (signed by invitor&amp;#39;s private key) against the public keys from ...">tryToVerifyInvitingCall</a>( <span class="comment">/*silent*/</span> <span class="keyword">false</span> );
            <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logInfo&quot;</span>, <span class="stringliteral">&quot;Respond with :accept to answer the call!&quot;</span> );
            
            <span class="comment">/* Send &#39;ringing&#39; message to remote peer with our public key</span>
<span class="comment">             */</span>
            <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#ac80b3f374d478cc3e2333baaa6905840" title="Broadcasts RING message.">sendRing</a>( m.peerUserId,  <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a908e59a5f96ac724317c402a4f7ba744" title="Returns local IP address.">getLocalAddress</a> (), 
                    <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a6655236f8322711b91ef0f9b799f892f" title="Returns used local UDP port.">getLocalPort</a> (), <a class="code" href="classcrypto_1_1_cipher_engine.html" title="Common ciphering engine (for the whole application) providing:">CipherEngine</a>.<a class="code" href="classcrypto_1_1_cipher_engine.html#a38f67ebc9042fb87a889aa9f1cecc60b" title="Returns serialized signed public key (used for encryption of datagrams) as Base64 string...">getSignedPublicKey</a> () );
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a5912b56b6a4d48c6b81c1c867f760a93"></a><!-- doxytag: member="CryptoPhoneApp::deferredOnRing" ref="a5912b56b6a4d48c6b81c1c867f760a93" args="(final PBXClient.ControlMessage m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.deferredOnRing </td>
          <td>(</td>
          <td class="paramtype">final PBXClient.ControlMessage&#160;</td>
          <td class="paramname"> <em>m</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>On RING call-back is triggered when PBXClient receives ringing message (indicating that the peer is alerting end-user). </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l01554">1554</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00141">audioInterface</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00157">currentInvite</a>, <a class="el" href="_public_encryptor_8java_source.html#l00326">crypto.PublicEncryptor.getVerificatorName()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00125">protocol.DatagramChannel.hasRemotePeer()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00163">inviteTimeout</a>, <a class="el" href="_public_encryptor_8java_source.html#l00308">crypto.PublicEncryptor.isActive()</a>, <a class="el" href="_public_encryptor_8java_source.html#l00316">crypto.PublicEncryptor.isVerified()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00151">remotePublicKey</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00922">report()</a>, <a class="el" href="interfaceaudio_1_1_audio_interface.html#a1fdd6ac91cb5c8deb9706a3575deb672">audio.AudioInterface.startRinging()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00136">udpChannel</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00187">userId</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00968">onRing()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( m.peerPort &lt; 1 || m.peerPort &gt; 65535 ) {
            <span class="keywordflow">return</span>;
        }
        
        String verboseRemote = m.getVerboseRemote ();
        
        <span class="comment">/* Ignore the message if we already have the call in progress.</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a221b7dbd0fef9631bb96cff8fc871cb2" title="Returns if there is active remote peer.">hasRemotePeer</a> () ) {
            <span class="keywordflow">return</span>;
        }
        
        <span class="comment">/* Ignore the message if the remote peer is not that we are inviting to a call</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934" title="The remote peer (its user id) that we are currently inviting to a call.">currentInvite</a> == null || ! <a class="code" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934" title="The remote peer (its user id) that we are currently inviting to a call.">currentInvite</a>.equalsIgnoreCase( m.peerUserId ) ) {
            <span class="keywordflow">return</span>;
        }

        <span class="comment">/* Deserialize remote public key.</span>
<span class="comment">         * Deserialization also verifies the public key against authorized keys.</span>
<span class="comment">         * \see constructor of the PublicEncryptor</span>
<span class="comment">         */</span>
        <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a> = null;

        <span class="keywordflow">if</span> ( m.secret != null ) 
        {
            <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a> = <span class="keyword">new</span> <a class="code" href="classcrypto_1_1_public_encryptor.html" title="Implements public part of the asymmetric cipher (with public key) used to send encrypted local secret...">PublicEncryptor</a>( m.secret, m.peerUserId );
            <span class="keywordflow">if</span> ( ! <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a>.<a class="code" href="classcrypto_1_1_public_encryptor.html#aed1f1bdf60dd9fd2122b822ef38a0e11" title="Returns if cipher is properly initialized.">isActive</a> () ) {
                <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a> = null;
            }
        }

        <span class="comment">/* Cancel inviteTimeout timer and give information and ringing tone to our user</span>
<span class="comment">         */</span>
        <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logInfo&quot;</span>, <span class="stringliteral">&quot;User &quot;</span> + verboseRemote + <span class="stringliteral">&quot; is alerted...&quot;</span> );
        
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a> != null &amp;&amp; <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a>.<a class="code" href="classcrypto_1_1_public_encryptor.html#aed1f1bdf60dd9fd2122b822ef38a0e11" title="Returns if cipher is properly initialized.">isActive</a> () )
        {
            <span class="keywordflow">if</span> ( ! <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a>.<a class="code" href="classcrypto_1_1_public_encryptor.html#aa74763a92a6776fe395082648042ba4a" title="Returns if public key was verified.">isVerified</a> () ) 
            {
                <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logError&quot;</span>, <span class="stringliteral">&quot;Reply from &quot;</span> + verboseRemote
                        + <span class="stringliteral">&quot; could not be authenticated.&quot;</span> );
            }
            <span class="keywordflow">else</span> 
            {
                <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logOk&quot;</span>, <span class="stringliteral">&quot;Reply from &quot;</span> + verboseRemote
                        + <span class="stringliteral">&quot; authenticated with public key &#39;&quot;</span> 
                        + <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a>.<a class="code" href="classcrypto_1_1_public_encryptor.html#a1810fce92903f30a71a66a2f044bc879" title="Returns if name of the verificator from authorized keys that verified this public key...">getVerificatorName</a> () + <span class="stringliteral">&quot;&#39;&quot;</span> );
            }
        }

        <a class="code" href="class_crypto_phone_app.html#ab791babb2bcfea431164e9ca91cb496c" title="Timer used to detect unresolved invite (i.e.">inviteTimeout</a> = -1; <span class="comment">// Reset only invite timeout (do not reset currentInvite)</span>

        this.<a class="code" href="class_crypto_phone_app.html#a7eaf4402df3b1abb3bde0c0cef34204b" title="The instance of the Audio interface used to access microphone and speaker.">audioInterface</a>.<a class="code" href="interfaceaudio_1_1_audio_interface.html#a1fdd6ac91cb5c8deb9706a3575deb672" title="Starts ringing signal.">startRinging</a> ();
        <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>.setEnabled( <span class="keyword">false</span> ); <span class="comment">// disable changing user ID</span>
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a3c3f09a2e2f64f505746bb118e46215d"></a><!-- doxytag: member="CryptoPhoneApp::dialButton_Clicked" ref="a3c3f09a2e2f64f505746bb118e46215d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.dialButton_Clicked </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Performs :invite command. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00609">609</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l01857">acceptIncomingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00146">lastMessageFromPBX</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01029">tokenizeInputMessage()</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00703">actionPerformed()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="comment">/* If there is outstanding INVITE waiting to be accepted,</span>
<span class="comment">         * do accept incoming call instead of making new outgoing call.</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( this.<a class="code" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5" title="The last PBX control message sent to us (waiting to be handled)">lastMessageFromPBX</a> == null ) {
            <a class="code" href="class_crypto_phone_app.html#aa05db4cf04f0da872d4bf5e2d3b44123" title="Parses commands prefixed with &amp;#39;:&amp;#39; character.">executeCommand</a>( <span class="stringliteral">&quot;:invite&quot;</span>, <a class="code" href="class_crypto_phone_app.html#a5a5980643392e77e922cc2b4045bdf58" title="Tokenizes inputMsg into words and returns array of strings.">tokenizeInputMessage</a> () );
        } <span class="keywordflow">else</span> {
            <a class="code" href="class_crypto_phone_app.html#a22263d1bb4efd460d3332a533afdcfe7" title="Accepts incoming invite.">acceptIncomingCall</a>( <span class="comment">/*secured*/</span> <span class="keyword">false</span> );
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a2751b7e1be8e8d88ba6cd8d0b429c7a9"></a><!-- doxytag: member="CryptoPhoneApp::displayHelp" ref="a2751b7e1be8e8d88ba6cd8d0b429c7a9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.displayHelp </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Displays help. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l02057">2057</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l01982">getContentsFromResourceOrFile()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00833">logMessage()</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        StringBuffer sb = <a class="code" href="class_crypto_phone_app.html#a8a69b95f6b5cfb28e716ba5ddebb9372" title="Reads contents of the text file using URL class.">getContentsFromResourceOrFile</a>( <span class="stringliteral">&quot;resources/help.html&quot;</span> );
        
        <span class="keywordflow">if</span> ( sb != null &amp;&amp; sb.length () &gt; 0 ) {
            <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>( sb.toString () );
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a8192190231b7f7c752022508fa2ef893"></a><!-- doxytag: member="CryptoPhoneApp::displayUsage" ref="a8192190231b7f7c752022508fa2ef893" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.displayUsage </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Displays usage information. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l02045">2045</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l01982">getContentsFromResourceOrFile()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00833">logMessage()</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        StringBuffer sb = <a class="code" href="class_crypto_phone_app.html#a8a69b95f6b5cfb28e716ba5ddebb9372" title="Reads contents of the text file using URL class.">getContentsFromResourceOrFile</a>( <span class="stringliteral">&quot;resources/usage.html&quot;</span> );
        
        <span class="keywordflow">if</span> ( sb != null &amp;&amp; sb.length () &gt; 0 ) {
            <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>( sb.toString () );
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aa077462dde1d5c2dd2e1d6f4e933b8ba"></a><!-- doxytag: member="CryptoPhoneApp::dumpLogArea" ref="aa077462dde1d5c2dd2e1d6f4e933b8ba" args="(String fileName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.dumpLogArea </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>fileName</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dumps log area into html file. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l01950">1950</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00089">defaultLogAreaDumpFilename</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00174">logArea</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00922">report()</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( fileName == null || fileName.isEmpty () ) {
            Calendar cal = Calendar.getInstance ();
            SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat( <span class="stringliteral">&quot;yyyy-MM-dd-HHmmssSSS&quot;</span> );
            fileName = <a class="code" href="class_crypto_phone_app.html#a573f49c1366d9a92b77e39266a85a771" title="The default file name where to dump log area contents with :dump command.">defaultLogAreaDumpFilename</a> + sdf.format( cal.getTime () ) + <span class="stringliteral">&quot;.html&quot;</span>;
        }

        <span class="keywordflow">try</span> 
        {
            BufferedWriter out = <span class="keyword">new</span> BufferedWriter( <span class="keyword">new</span> FileWriter( fileName ) );
            
            <span class="keyword">synchronized</span>( <a class="code" href="class_crypto_phone_app.html#aa3da814a861bc895c842f67845ce7c8c" title="The log area formatted in HTML.">logArea</a> )
            {
                out.write( <a class="code" href="class_crypto_phone_app.html#aa3da814a861bc895c842f67845ce7c8c" title="The log area formatted in HTML.">logArea</a>.getText () );
            }

            out.close ();
            
            <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logInfo&quot;</span>, <span class="stringliteral">&quot;Dumped log area into &#39;&quot;</span> + fileName + <span class="stringliteral">&quot;&#39;&quot;</span> );
        }
        <span class="keywordflow">catch</span>( IOException e )
        {
            <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logError&quot;</span>, <span class="stringliteral">&quot;Failed to dump log area: &quot;</span> + e.getMessage () );
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aa05db4cf04f0da872d4bf5e2d3b44123"></a><!-- doxytag: member="CryptoPhoneApp::executeCommand" ref="aa05db4cf04f0da872d4bf5e2d3b44123" args="(String cmd, String[] args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean CryptoPhoneApp.executeCommand </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String[]&#160;</td>
          <td class="paramname"> <em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Parses commands prefixed with ':' character. </p>
<p>Recognized commands are: </p>
<pre>
  VoIP Calls:</pre><pre>     :inv[ite]    username             aliases: :ca[ll]
     :inv[ite]+   username             aliases: :ca[ll]+
     :acc[ept]                         aliases: :ans[wer]
     :by[e]                            aliases: :ha[ngup]
     :shk[ey]</pre><pre>  VoIP Peers:</pre><pre>     :li[st]    [ username-regex ]</pre><pre>  Chat Messages:</pre><pre>     :br[oadcast]  message</pre><pre>  Connection to Chat Server:</pre><pre>     :clo[se]
     :op[en]    [ host  [ port ] ]</pre><pre>  Application:
     :cl[ear]s[creen]
     :reauth
     :newsecret  [ algorithm [ keysize ] ]
     :du[mp]
     :ex[it]                           aliases: :qu[it]
     :he[lp]
  </pre><dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>command name; must begin with ":" </td></tr>
    <tr><td class="paramname">args</td><td>command arguments; may be null or empty array </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if command is parsed and executed </dd></dl>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l01188">1188</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l01857">acceptIncomingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00141">audioInterface</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l02031">clearLogArea()</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00277">pbx.PBXClient.close()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00157">currentInvite</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l02057">displayHelp()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l02045">displayUsage()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01950">dumpLogArea()</a>, <a class="el" href="_cipher_engine_8java_source.html#l00219">crypto.CipherEngine.generateNewSecret()</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00220">pbx.PBXClient.getLocalAddress()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00089">protocol.DatagramChannel.getLocalPort()</a>, <a class="el" href="_cipher_engine_8java_source.html#l00078">crypto.CipherEngine.getNamedPublicKey()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00133">protocol.DatagramChannel.getRemotePeer()</a>, <a class="el" href="_remote_peer_8java_source.html#l00083">protocol.RemotePeer.getRemoteUserId()</a>, <a class="el" href="_cipher_engine_8java_source.html#l00066">crypto.CipherEngine.getSignedPublicKey()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00125">protocol.DatagramChannel.hasRemotePeer()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00163">inviteTimeout</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00146">lastMessageFromPBX</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00833">logMessage()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00104">pbxChannel</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00109">pbxChannelStatus</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00125">reconnectRetryCount</a>, <a class="el" href="_cipher_engine_8java_source.html#l00209">crypto.CipherEngine.reloadAuthorizedPublicKeys()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00151">remotePublicKey</a>, <a class="el" href="_datagram_channel_8java_source.html#l00153">protocol.DatagramChannel.removePeer()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00922">report()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00178">securityState</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00244">pbx.PBXClient.send()</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00595">pbx.PBXClient.sendBye()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01121">sendInstantMessage()</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00559">pbx.PBXClient.sendInvite()</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00615">pbx.PBXClient.sendListPeers()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00094">serverName</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00099">serverPort</a>, <a class="el" href="_j_sec_state_8java_source.html#l00072">ui.JSecState.setState()</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00229">pbx.PBXClient.start()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00558">stopKryptofonServices()</a>, <a class="el" href="interfaceaudio_1_1_audio_interface.html#ab4c03087d55a96be90fc4531f359a06e">audio.AudioInterface.stopRinging()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00136">udpChannel</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00187">userId</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00609">dialButton_Clicked()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00639">hangupButton_Clicked()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00662">keyPressed()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00601">listPeersButton_Clicked()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01054">parseInputMessage()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00624">secureDialButton_Clicked()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00558">stopKryptofonServices()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        cmd = cmd.trim().toLowerCase();

        <span class="keywordtype">boolean</span> executed = <span class="keyword">false</span>;

        <span class="keywordflow">if</span> ( args == null ) {
            args = <span class="keyword">new</span> String[0];
        }

        <span class="comment">/* Note bellow that we use both equals() and matches() to resolve command.</span>
<span class="comment">         * We need equals() to speed-up lookup for those commands that are executed</span>
<span class="comment">         * internally by directly calling executeCommand() with hard-coded argument</span>
<span class="comment">         * (contrary to when executeCommand() is called with commnands entered by</span>
<span class="comment">         * the user).</span>
<span class="comment">         */</span>

        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:list&quot;</span> ) || cmd.matches( <span class="stringliteral">&quot;^:li(st?)?$&quot;</span> ) )
        {
            <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a3897d8ee1ed84c9946698d33057c4b79" title="Broadcasts LIST message (to list potential peers)">sendListPeers</a>( args.length &gt;= 1 ? args[0] : null );

            executed = <span class="keyword">true</span>;
        }
        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:who&quot;</span> ) )
        {
            <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a445ccab5e5e2ca5ad2ec3b1d1d28fdb2" title="Sends message (appended with new-line) to chat server.">send</a>( <span class="stringliteral">&quot;wwhhoo&quot;</span> );

            executed = <span class="keyword">true</span>;
        }
        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:bye&quot;</span> ) 
               || cmd.matches( <span class="stringliteral">&quot;^:by(e)?$&quot;</span> ) 
               || cmd.matches( <span class="stringliteral">&quot;^:ha(n(g(up?)?)?)?$&quot;</span> ) )
        {
            <a class="code" href="classprotocol_1_1_remote_peer.html" title="Encapsulates the link between the UDP channel and a CallContext.">RemotePeer</a> remotePeer = <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#abe4c6003fc0e76a7082fc2a7e923a2d0" title="Returns the remote peer.">getRemotePeer</a> ();

            <span class="keywordflow">if</span> ( remotePeer != null ) 
            {
                <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logInfo&quot;</span>, <span class="stringliteral">&quot;***** Call Ended *****&quot;</span> );
                <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>( <span class="stringliteral">&quot;&lt;hr/&gt;&quot;</span> );

                <span class="comment">/* Send &#39;bye&#39; message to remote peer</span>
<span class="comment">                 */</span>
                <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a0d3465a16cbcbe10f04292cb091d0699" title="Broadcasts BYE message.">sendBye</a>( remotePeer.<a class="code" href="classprotocol_1_1_remote_peer.html#a1ae75abb703f3e99b1cbfdb53388fb0d" title="Returns remote name (remote userid) of the peer.">getRemoteUserId</a> (),  
                        <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a908e59a5f96ac724317c402a4f7ba744" title="Returns local IP address.">getLocalAddress</a> (), <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a6655236f8322711b91ef0f9b799f892f" title="Returns used local UDP port.">getLocalPort</a> () );
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934" title="The remote peer (its user id) that we are currently inviting to a call.">currentInvite</a> != null )
            {
                <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logInfo&quot;</span>, <span class="stringliteral">&quot;Invite cancelled.&quot;</span> );
                <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>( <span class="stringliteral">&quot;&lt;hr/&gt;&quot;</span> );

                <span class="comment">/* Send &#39;bye&#39; message to remote peer</span>
<span class="comment">                 */</span>
                <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a0d3465a16cbcbe10f04292cb091d0699" title="Broadcasts BYE message.">sendBye</a>( <a class="code" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934" title="The remote peer (its user id) that we are currently inviting to a call.">currentInvite</a>,  
                        <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a908e59a5f96ac724317c402a4f7ba744" title="Returns local IP address.">getLocalAddress</a> (), <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a6655236f8322711b91ef0f9b799f892f" title="Returns used local UDP port.">getLocalPort</a> () );
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( this.<a class="code" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5" title="The last PBX control message sent to us (waiting to be handled)">lastMessageFromPBX</a> != null ) <span class="comment">// call waiting to be accepted</span>
            {
                <a class="code" href="classpbx_1_1_p_b_x_client.html" title="Encapsulates rudimentary functionality of a PBX to list and invite users (peers) to secure calls...">PBXClient</a>.ControlMessage m = this.<a class="code" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5" title="The last PBX control message sent to us (waiting to be handled)">lastMessageFromPBX</a>;
                
                String verboseRemote = m.getVerboseRemote ();
                
                <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logInfo&quot;</span>, <span class="stringliteral">&quot;Rejecting invite from &quot;</span> + verboseRemote );
                <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>( <span class="stringliteral">&quot;&lt;hr/&gt;&quot;</span> );

                <span class="comment">/* Send &#39;bye&#39; message to remote peer</span>
<span class="comment">                 */</span>
                <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a0d3465a16cbcbe10f04292cb091d0699" title="Broadcasts BYE message.">sendBye</a>( m.peerUserId,  
                        <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a908e59a5f96ac724317c402a4f7ba744" title="Returns local IP address.">getLocalAddress</a> (), <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a6655236f8322711b91ef0f9b799f892f" title="Returns used local UDP port.">getLocalPort</a> () );
                
                this.<a class="code" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5" title="The last PBX control message sent to us (waiting to be handled)">lastMessageFromPBX</a> = null;
            }

            <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a353a747cc114cba3204e1fc2ecfc7ffc" title="Detaches peer and all its call from the UDP receiver.">removePeer</a> ();
            <a class="code" href="class_crypto_phone_app.html#a7eaf4402df3b1abb3bde0c0cef34204b" title="The instance of the Audio interface used to access microphone and speaker.">audioInterface</a>.<a class="code" href="interfaceaudio_1_1_audio_interface.html#ab4c03087d55a96be90fc4531f359a06e" title="Stops ringing signal.">stopRinging</a> ();
            <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>.setEnabled( <span class="keyword">true</span> ); <span class="comment">// enable back changing user ID</span>
            
            <a class="code" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5" title="The last PBX control message sent to us (waiting to be handled)">lastMessageFromPBX</a> = null;
            <a class="code" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c" title="The last public key received from remote peer.">remotePublicKey</a> = null;

            <a class="code" href="class_crypto_phone_app.html#abb25aaecf1b0f6f47afd12b38bf40f3b">securityState</a>.<a class="code" href="classui_1_1_j_sec_state.html#a6e54470d9ef9f2d8128565482f15c4f2" title="Stes new security state.">setState</a>( <a class="code" href="classui_1_1_j_sec_state.html" title="Image indicating security state (unsecured/secured-unverified/secured-trusted).">JSecState</a>.<a class="code" href="classui_1_1_j_sec_state.html#af9971acc8fd5f2ffaf51b61eac45883c" title="Possible security states.">State</a>.UNSECURED );
            setTitle( <a class="code" href="class_crypto_phone_app.html#a92d666e527bb56bc298a903e12f8069e" title="The last status message of the PBX channel (posted by the setPbxStatus()).">pbxChannelStatus</a> );
            
            <a class="code" href="class_crypto_phone_app.html#ab791babb2bcfea431164e9ca91cb496c" title="Timer used to detect unresolved invite (i.e.">inviteTimeout</a> = -1;
            <a class="code" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934" title="The remote peer (its user id) that we are currently inviting to a call.">currentInvite</a> = null;

            executed = <span class="keyword">true</span>;
        }
        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:invite+&quot;</span> )
               || cmd.matches( <span class="stringliteral">&quot;^:inv(i(te?)?)?\\+$&quot;</span> ) 
               || cmd.matches( <span class="stringliteral">&quot;^:ca(ll?)?\\+$&quot;</span> ) )
        {
            <span class="comment">/* Calls another user WITH encryption enabled </span>
<span class="comment">             */</span>
            <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a221b7dbd0fef9631bb96cff8fc871cb2" title="Returns if there is active remote peer.">hasRemotePeer</a> () || <a class="code" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934" title="The remote peer (its user id) that we are currently inviting to a call.">currentInvite</a> != null )
            {
                <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logError&quot;</span>, <span class="stringliteral">&quot;Call in progress. Hang up first!&quot;</span> );
                
                executed = <span class="keyword">true</span>;
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( args.length &gt;= 1 &amp;&amp; <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.isAlive () )
            {
                <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>( <span class="stringliteral">&quot;&lt;hr/&gt;&quot;</span> );
                <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logInfo&quot;</span>, <span class="stringliteral">&quot;Inviting &#39;&quot;</span> + args[0] 
                        + <span class="stringliteral">&quot;&#39; to encrypted voice call...&quot;</span> );

                <a class="code" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934" title="The remote peer (its user id) that we are currently inviting to a call.">currentInvite</a> = args[0];
                <a class="code" href="class_crypto_phone_app.html#ab791babb2bcfea431164e9ca91cb496c" title="Timer used to detect unresolved invite (i.e.">inviteTimeout</a> = 3;
                
                <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>.setEnabled( <span class="keyword">false</span> ); <span class="comment">// disable changing user ID</span>

                <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a726928c4342761e6a39a96e02365d638" title="Broadcasts INVITE message.">sendInvite</a>( <a class="code" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934" title="The remote peer (its user id) that we are currently inviting to a call.">currentInvite</a>, <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a908e59a5f96ac724317c402a4f7ba744" title="Returns local IP address.">getLocalAddress</a> (),
                        <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a6655236f8322711b91ef0f9b799f892f" title="Returns used local UDP port.">getLocalPort</a> (), <a class="code" href="classcrypto_1_1_cipher_engine.html" title="Common ciphering engine (for the whole application) providing:">CipherEngine</a>.<a class="code" href="classcrypto_1_1_cipher_engine.html#a38f67ebc9042fb87a889aa9f1cecc60b" title="Returns serialized signed public key (used for encryption of datagrams) as Base64 string...">getSignedPublicKey</a> () );

                executed = <span class="keyword">true</span>;
            }
        }
        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:invite&quot;</span> )
               || cmd.matches( <span class="stringliteral">&quot;^:inv(i(te?)?)?$&quot;</span> ) 
               || cmd.matches( <span class="stringliteral">&quot;^:ca(ll?)?$&quot;</span> ) )
        {
            <span class="comment">/* Calls another user WITHOUT encryption enabled </span>
<span class="comment">             */</span>
            <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a221b7dbd0fef9631bb96cff8fc871cb2" title="Returns if there is active remote peer.">hasRemotePeer</a> () || <a class="code" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934" title="The remote peer (its user id) that we are currently inviting to a call.">currentInvite</a> != null )
            {
                <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logError&quot;</span>, <span class="stringliteral">&quot;Call in progress. Hang up first!&quot;</span> );
                
                executed = <span class="keyword">true</span>;
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( args.length &gt;= 1 &amp;&amp; <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.isAlive () )
            {
                <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>( <span class="stringliteral">&quot;&lt;hr/&gt;&quot;</span> );
                <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logInfo&quot;</span>, <span class="stringliteral">&quot;Inviting &#39;&quot;</span> + args[0]
                        + <span class="stringliteral">&quot;&#39; to un-encrypted voice call...&quot;</span> );
                
                <a class="code" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934" title="The remote peer (its user id) that we are currently inviting to a call.">currentInvite</a> = args[0];
                <a class="code" href="class_crypto_phone_app.html#ab791babb2bcfea431164e9ca91cb496c" title="Timer used to detect unresolved invite (i.e.">inviteTimeout</a> = 3;
                
                <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>.setEnabled( <span class="keyword">false</span> ); <span class="comment">// disable changing user ID</span>

                <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a726928c4342761e6a39a96e02365d638" title="Broadcasts INVITE message.">sendInvite</a>( args[0], <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a908e59a5f96ac724317c402a4f7ba744" title="Returns local IP address.">getLocalAddress</a> (),
                        <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a6655236f8322711b91ef0f9b799f892f" title="Returns used local UDP port.">getLocalPort</a> (), null );

                executed = <span class="keyword">true</span>;
            }
        }
        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:accept&quot;</span> )
               || cmd.matches( <span class="stringliteral">&quot;^:acc(e(pt?)?)?$&quot;</span> ) 
               || cmd.matches( <span class="stringliteral">&quot;^:ans(w(er?)?)?$&quot;</span> ) )
        {
            <a class="code" href="class_crypto_phone_app.html#a22263d1bb4efd460d3332a533afdcfe7" title="Accepts incoming invite.">acceptIncomingCall</a>( <span class="comment">/*secured*/</span> <span class="keyword">true</span> );

            executed = <span class="keyword">true</span>;
        }
        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:broadcast&quot;</span> )
               || cmd.matches( <span class="stringliteral">&quot;^:br(o(a(d(c(a(st?)?)?)?)?)?)?$&quot;</span> ) )
        {
            <span class="keywordflow">if</span> ( args.length &gt;= 1 ) 
            {
                StringBuffer msg = <span class="keyword">new</span> StringBuffer ();
                <span class="keywordflow">for</span> ( String s : args ) {
                    <span class="keywordflow">if</span> ( msg.length () &gt; 0 ) {
                        msg.append( <span class="stringliteral">&quot; &quot;</span> );
                    }
                    msg.append( s );
                }
                
                <a class="code" href="class_crypto_phone_app.html#a8551798b8de4dd77d8190ddcae8e1869" title="Sends chat message (encrypted if we have established secure channel with the user).">sendInstantMessage</a>( msg.toString () , <span class="comment">/*forceUnencrypted*/</span> true );
    
                executed = <span class="keyword">true</span>;
            }
        }
        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:mykey&quot;</span> )
               || cmd.matches( <span class="stringliteral">&quot;^:my(k(ey?)?)?$&quot;</span> ) )
        {
            <a class="code" href="class_crypto_phone_app.html#a8551798b8de4dd77d8190ddcae8e1869" title="Sends chat message (encrypted if we have established secure channel with the user).">sendInstantMessage</a>( <span class="stringliteral">&quot;\f========= BEGIN PUBLIC KEY =========\f\f&quot;</span>
                    + <a class="code" href="classcrypto_1_1_cipher_engine.html" title="Common ciphering engine (for the whole application) providing:">CipherEngine</a>.<a class="code" href="classcrypto_1_1_cipher_engine.html#a721ff59dcda3d21c6a4f9f201fd6442b" title="Returns serialized named public key encoded as Base64 string.">getNamedPublicKey</a> ()
                    + <span class="stringliteral">&quot;\f\f========= END PUBLIC KEY ===========&quot;</span>
                    , <span class="comment">/*forceUnencrypted*/</span> false );
        }
        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:close&quot;</span> )
               || cmd.matches( <span class="stringliteral">&quot;^:clo(se?)?$&quot;</span> ) )
        {
            <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>( <span class="stringliteral">&quot;&lt;hr/&gt;&quot;</span> );
            <a class="code" href="class_crypto_phone_app.html#a35e52a134d8ccabb268198f9d6af6f88" title="Retry counter of number of failed reconnecting attempts.">reconnectRetryCount</a> = Integer.MAX_VALUE; <span class="comment">// suppresses reconnection</span>
            <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a9ec0d49a2b2c47a84b98b8ba265d8798" title="Closes the connection gracefully.">close</a> ();

            executed = <span class="keyword">true</span>;
        }
        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:open&quot;</span> )
               || cmd.matches( <span class="stringliteral">&quot;^:op(en?)?$&quot;</span> ) )
        {
            <span class="comment">/* Opens new connection to chat server</span>
<span class="comment">             */</span>
            <span class="keywordflow">if</span> ( args.length &gt;= 1 )
            {
                <span class="comment">/* Parse arguments first: host name and port</span>
<span class="comment">                 */</span>
                <a class="code" href="class_crypto_phone_app.html#a6db74f3877792c5613221defef4e4447" title="The host name or IP address of the remote chat server.">serverName</a> = args[0];
                <a class="code" href="class_crypto_phone_app.html#afce08401731d533ad12121ef22fd1b28" title="The TCP port where to connect to on remote chat server.">serverPort</a> = 2000; <span class="comment">// the default port</span>
                
                <span class="keywordflow">if</span>( args.length &gt;= 2 ) <span class="keywordflow">try</span> {
                    <a class="code" href="class_crypto_phone_app.html#afce08401731d533ad12121ef22fd1b28" title="The TCP port where to connect to on remote chat server.">serverPort</a> = Integer.parseInt( args[1] );
                } <span class="keywordflow">catch</span> ( NumberFormatException e ) {
                    <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logError&quot;</span>, <span class="stringliteral">&quot;The port must be integer.&quot;</span> );
                    <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
            }
            
            <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>( <span class="stringliteral">&quot;&lt;hr/&gt;&quot;</span> );

            <a class="code" href="class_crypto_phone_app.html#a35e52a134d8ccabb268198f9d6af6f88" title="Retry counter of number of failed reconnecting attempts.">reconnectRetryCount</a> = Integer.MAX_VALUE; <span class="comment">// suppresses reconnection</span>
            <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a9ec0d49a2b2c47a84b98b8ba265d8798" title="Closes the connection gracefully.">close</a> ();
            
            <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a> = <span class="keyword">new</span> <a class="code" href="classpbx_1_1_p_b_x_client.html" title="Encapsulates rudimentary functionality of a PBX to list and invite users (peers) to secure calls...">PBXClient</a>( <a class="code" href="class_crypto_phone_app.html#a6db74f3877792c5613221defef4e4447" title="The host name or IP address of the remote chat server.">serverName</a>, <a class="code" href="class_crypto_phone_app.html#afce08401731d533ad12121ef22fd1b28" title="The TCP port where to connect to on remote chat server.">serverPort</a> , <span class="keyword">this</span> );
            <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a62086db6e1497d23af966f87c148945e" title="Starts the thread.">start</a> ();
            <a class="code" href="class_crypto_phone_app.html#a35e52a134d8ccabb268198f9d6af6f88" title="Retry counter of number of failed reconnecting attempts.">reconnectRetryCount</a> = 0;

            executed = <span class="keyword">true</span>;
        }
        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:exit&quot;</span> )
               || cmd.matches( <span class="stringliteral">&quot;^:ex(it?)?$&quot;</span> ) || cmd.matches( <span class="stringliteral">&quot;^:qu(it?)?$&quot;</span> ) )
        {
            <a class="code" href="class_crypto_phone_app.html#a5e90f40ce9d3ea59675f792c5c7afeae" title="Stops audio interface and UDP peer-to-peer channel.">stopKryptofonServices</a> ();
            <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a9ec0d49a2b2c47a84b98b8ba265d8798" title="Closes the connection gracefully.">close</a> ();
            System.exit( 0 );
        }
        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:reauth&quot;</span> ) )
        {
            <a class="code" href="classcrypto_1_1_cipher_engine.html" title="Common ciphering engine (for the whole application) providing:">CipherEngine</a>.<a class="code" href="classcrypto_1_1_cipher_engine.html#a0e78d429ba772508a03df9f2a0dcb88d" title="Reloads only authorized public keys.">reloadAuthorizedPublicKeys</a> ();
            
            executed = <span class="keyword">true</span>;
        }
        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:newsecret&quot;</span> ) )
        {
            String algorithm = <span class="stringliteral">&quot;Blowfish&quot;</span>;
            <span class="keywordtype">int</span> keySize = 32;
            
            <span class="keywordflow">if</span> ( args.length &gt;= 1 ) {
                algorithm = args[0];
            }

            <span class="keywordflow">if</span> ( args.length &gt;= 2 ) {
                <span class="keywordflow">try</span> {
                    keySize = Integer.parseInt( args[1] );
                } <span class="keywordflow">catch</span> ( NumberFormatException e ) {
                    <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logError&quot;</span>, <span class="stringliteral">&quot;The key size must be integer.&quot;</span> );
                    <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
            }

            <span class="keywordflow">if</span> ( ! <a class="code" href="classcrypto_1_1_cipher_engine.html" title="Common ciphering engine (for the whole application) providing:">CipherEngine</a>.<a class="code" href="classcrypto_1_1_cipher_engine.html#ac0d39891a33a85d56cb50ba1b00b22ec" title="Generates new symmetric secret key.">generateNewSecret</a>( algorithm, keySize, <span class="comment">/*verbose*/</span><span class="keyword">true</span> ) ) 
            {
                <span class="comment">/* fail back to blowfish (not to leave user without symmetric cipher)</span>
<span class="comment">                 */</span>
                <a class="code" href="classcrypto_1_1_cipher_engine.html" title="Common ciphering engine (for the whole application) providing:">CipherEngine</a>.<a class="code" href="classcrypto_1_1_cipher_engine.html#ac0d39891a33a85d56cb50ba1b00b22ec" title="Generates new symmetric secret key.">generateNewSecret</a>( <span class="stringliteral">&quot;Blowfish&quot;</span>, 32, <span class="comment">/*verbose*/</span><span class="keyword">false</span> ); 
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }

            executed = <span class="keyword">true</span>;
        }
        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:cls&quot;</span> )
               || cmd.matches( <span class="stringliteral">&quot;^:cl(ear)?s(c(r(e(en?)?)?)?)?$&quot;</span> ) )
        {
            <a class="code" href="class_crypto_phone_app.html#ae54e727b812f203eaf6615e6c40e6de8" title="Clears log area (with the contents of the &amp;quot;empty&amp;quot; template)">clearLogArea</a> (); <span class="comment">// clears screen</span>
            <a class="code" href="class_crypto_phone_app.html#a8192190231b7f7c752022508fa2ef893" title="Displays usage information.">displayUsage</a> ();

            executed = <span class="keyword">true</span>;
        }
        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:help&quot;</span> )
               || cmd.matches( <span class="stringliteral">&quot;^:he(lp?)?$&quot;</span> ) )
        {
            <a class="code" href="class_crypto_phone_app.html#a2751b7e1be8e8d88ba6cd8d0b429c7a9" title="Displays help.">displayHelp</a> ();

            executed = <span class="keyword">true</span>;
        }
        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:dump&quot;</span> )
               || cmd.matches( <span class="stringliteral">&quot;^:du(mp?)?$&quot;</span> ) )
        {
            <a class="code" href="class_crypto_phone_app.html#aa077462dde1d5c2dd2e1d6f4e933b8ba" title="Dumps log area into html file.">dumpLogArea</a>( args.length &gt;= 1 ? args[0] : null );

            executed = <span class="keyword">true</span>;
        }
        <span class="comment">/*------------------------------------------------------------------------------*/</span>
        
        <span class="keywordflow">return</span> executed;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a7490652207cab4965f13ea019ee66cbe"></a><!-- doxytag: member="CryptoPhoneApp::formWindowClosing" ref="a7490652207cab4965f13ea019ee66cbe" args="(WindowEvent evt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.formWindowClosing </td>
          <td>(</td>
          <td class="paramtype">WindowEvent&#160;</td>
          <td class="paramname"> <em>evt</em>&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Closes application by gracefully terminating all threads. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00647">647</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_p_b_x_client_8java_source.html#l00277">pbx.PBXClient.close()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00104">pbxChannel</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00558">stopKryptofonServices()</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00478">createEventListeners()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01054">parseInputMessage()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="class_crypto_phone_app.html#a5e90f40ce9d3ea59675f792c5c7afeae" title="Stops audio interface and UDP peer-to-peer channel.">stopKryptofonServices</a> ();
        
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a> != null ) {
            <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a9ec0d49a2b2c47a84b98b8ba265d8798" title="Closes the connection gracefully.">close</a> ();
        }

        System.exit( 0 );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a8a69b95f6b5cfb28e716ba5ddebb9372"></a><!-- doxytag: member="CryptoPhoneApp::getContentsFromResourceOrFile" ref="a8a69b95f6b5cfb28e716ba5ddebb9372" args="(String path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StringBuffer CryptoPhoneApp.getContentsFromResourceOrFile </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>path</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads contents of the text file using URL class. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>string buffer containing file contents; null in case of error </dd></dl>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l01982">1982</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l02031">clearLogArea()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l02057">displayHelp()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l02045">displayUsage()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        StringBuffer sb = <span class="keyword">new</span> StringBuffer ();

        <span class="keywordflow">try</span> 
        {
            <span class="comment">/* First, try to read resource from JAR</span>
<span class="comment">             */</span>
            URL url = getClass().getResource( path );
            
            <span class="comment">/* Then fail to local file </span>
<span class="comment">             */</span>
            <span class="keywordflow">if</span> ( url == null ) {
                url = <span class="keyword">new</span> URL( <span class="stringliteral">&quot;file:&quot;</span> + path );
            }
            
            <span class="comment">/* Append contents of the file to string buffer</span>
<span class="comment">             */</span>
            <span class="keywordflow">if</span> ( url != null ) 
            {
                InputStream in = url.openStream ();
                BufferedReader dis = <span class="keyword">new</span> BufferedReader( <span class="keyword">new</span> InputStreamReader( in ) );

                String line;
                <span class="keywordflow">while</span> ( ( line = dis.readLine () ) != null )
                {
                    sb.append( line + <span class="stringliteral">&quot;\n&quot;</span> );
                }

                in.close ();
            }
        }
        <span class="keywordflow">catch</span>( MalformedURLException e ) 
        {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.exception( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.TRACE, e );
            sb = null;
        }
        <span class="keywordflow">catch</span>( IOException e )
        {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.exception( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.TRACE, e );
            sb = null;
        }

        <span class="keywordflow">return</span> sb;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ac90d3daccce7d2003633305b3d4b6087"></a><!-- doxytag: member="CryptoPhoneApp::getUserId" ref="ac90d3daccce7d2003633305b3d4b6087" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String CryptoPhoneApp.getUserId </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns configured user ID (username). </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00872">872</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00187">userId</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00478">createEventListeners()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01054">parseInputMessage()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01121">sendInstantMessage()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00532">startKryptofonServices()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        String newId = null;
        
        <span class="keyword">synchronized</span>( <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a> )
        {
            String oldId = <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>.getText ().trim();

            <span class="comment">/* Default user id, if not specified */</span>
            <span class="keywordflow">if</span> ( oldId.isEmpty () ) {
                oldId = System.getProperty( <span class="stringliteral">&quot;user.name&quot;</span> );
            }
            
            <span class="comment">/* Ouch. Again empty. Then we are really an anonymous */</span>
            <span class="keywordflow">if</span> ( oldId.isEmpty () ) {
                oldId = <span class="stringliteral">&quot;[Anonymous]&quot;</span>;
            }

            <span class="comment">/* Discard spaces from the local userId */</span>
            newId = oldId.replaceAll( <span class="stringliteral">&quot;\\s{1,}&quot;</span>, <span class="stringliteral">&quot;-&quot;</span> );
        }
        
        <span class="keywordflow">return</span> newId;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ab43da0d80aad6296253e5ede356738e9"></a><!-- doxytag: member="CryptoPhoneApp::hangupButton_Clicked" ref="ab43da0d80aad6296253e5ede356738e9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.hangupButton_Clicked </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Performs :bye command. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00639">639</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01029">tokenizeInputMessage()</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00703">actionPerformed()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="class_crypto_phone_app.html#aa05db4cf04f0da872d4bf5e2d3b44123" title="Parses commands prefixed with &amp;#39;:&amp;#39; character.">executeCommand</a>( <span class="stringliteral">&quot;:bye&quot;</span>, <a class="code" href="class_crypto_phone_app.html#a5a5980643392e77e922cc2b4045bdf58" title="Tokenizes inputMsg into words and returns array of strings.">tokenizeInputMessage</a> () );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="af39c55f8243a998c604f9d0e110fb0e7"></a><!-- doxytag: member="CryptoPhoneApp::keyPressed" ref="af39c55f8243a998c604f9d0e110fb0e7" args="(KeyEvent ke)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.keyPressed </td>
          <td>(</td>
          <td class="paramtype">KeyEvent&#160;</td>
          <td class="paramname"> <em>ke</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <code>KeyListener</code>'s key pressed event. </p>
<p>Parses input message on ENTER (the same action as it was sendButton_Clicked). </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00662">662</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00082">defaultInputMsg</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00185">inputMsg</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01054">parseInputMessage()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00187">userId</a>.</p>
<div class="fragment"><pre class="fragment">                                          {
        
        <span class="keywordtype">int</span> keyCode = ke.getKeyCode ();
        
        <span class="keywordflow">if</span>( ke.getSource () == <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a> &amp;&amp; keyCode == KeyEvent.VK_ENTER )
        {
            <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a8a6cb43a9dcb7a42a85b92b9cae15420" title="The initial message content of the input text message field.">defaultInputMsg</a>.equalsIgnoreCase( <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>.getText () ) ) { 
                <span class="keywordflow">return</span>; <span class="comment">// ignore default input message</span>
            }
            
            <a class="code" href="class_crypto_phone_app.html#a2daa0d1e0ed86309df9d2d51f5010fc1" title="Parses input message from inputMsg and sends it to chat server.">parseInputMessage</a> ();
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ke.getSource () == <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a> &amp;&amp; keyCode == KeyEvent.VK_ENTER )
        {
            <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>.requestFocus ();
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( keyCode == KeyEvent.VK_F1 )
        {
            <a class="code" href="class_crypto_phone_app.html#aa05db4cf04f0da872d4bf5e2d3b44123" title="Parses commands prefixed with &amp;#39;:&amp;#39; character.">executeCommand</a>( <span class="stringliteral">&quot;:help&quot;</span>, null );
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a7704e7a931a77e85c42c90d5b9302597"></a><!-- doxytag: member="CryptoPhoneApp::keyReleased" ref="a7704e7a931a77e85c42c90d5b9302597" args="(KeyEvent ke)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.keyReleased </td>
          <td>(</td>
          <td class="paramtype">KeyEvent&#160;</td>
          <td class="paramname"> <em>ke</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <code>KeyListener</code>'s key released event. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00687">687</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="comment">/* unused */</span>
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aaa44462f6641fb37035bbb0812ae9283"></a><!-- doxytag: member="CryptoPhoneApp::keyTyped" ref="aaa44462f6641fb37035bbb0812ae9283" args="(KeyEvent ke)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.keyTyped </td>
          <td>(</td>
          <td class="paramtype">KeyEvent&#160;</td>
          <td class="paramname"> <em>ke</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <code>KeyListener</code>'s key typed event. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00695">695</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="comment">/* unused */</span>
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aecaed7d05976953fa24924ba9f6ac7dd"></a><!-- doxytag: member="CryptoPhoneApp::listPeersButton_Clicked" ref="aecaed7d05976953fa24924ba9f6ac7dd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.listPeersButton_Clicked </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Performs :list command. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00601">601</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00703">actionPerformed()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="class_crypto_phone_app.html#aa05db4cf04f0da872d4bf5e2d3b44123" title="Parses commands prefixed with &amp;#39;:&amp;#39; character.">executeCommand</a>( <span class="stringliteral">&quot;:list&quot;</span>, null );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aa443f1b7f508ff5f4a520ac21acc1065"></a><!-- doxytag: member="CryptoPhoneApp::logMessage" ref="aa443f1b7f508ff5f4a520ac21acc1065" args="(final String str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.logMessage </td>
          <td>(</td>
          <td class="paramtype">final String&#160;</td>
          <td class="paramname"> <em>str</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Logs message formated with limited HTML (limited because of JEditorPane) </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00833">833</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00174">logArea</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01714">deferredOnBye()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01501">deferredOnInvite()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l02057">displayHelp()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l02045">displayUsage()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00738">mainTimerEvent()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00922">report()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00936">reportIncomingTextMessage()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        java.awt.EventQueue.invokeLater( 
                <span class="keyword">new</span> Runnable() {
                    <span class="keyword">public</span> <span class="keywordtype">void</span> run() {
                        <span class="keyword">synchronized</span>( <a class="code" href="class_crypto_phone_app.html#aa3da814a861bc895c842f67845ce7c8c" title="The log area formatted in HTML.">logArea</a> )
                        {
                            <span class="comment">/* Append the string to the end of &lt;body&gt; element...</span>
<span class="comment">                             */</span>
                            String html = <a class="code" href="class_crypto_phone_app.html#aa3da814a861bc895c842f67845ce7c8c" title="The log area formatted in HTML.">logArea</a>.getText ();
                            html = html.replace( <span class="stringliteral">&quot;&lt;/body&gt;&quot;</span>, str + <span class="stringliteral">&quot;\n&lt;/body&gt;&quot;</span> );
                            <a class="code" href="class_crypto_phone_app.html#aa3da814a861bc895c842f67845ce7c8c" title="The log area formatted in HTML.">logArea</a>.setText( html );
                        }
                    }
                }
            );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="af09e2a7a032d624146b4b46347840b8a"></a><!-- doxytag: member="CryptoPhoneApp::main" ref="af09e2a7a032d624146b4b46347840b8a" args="(final String args[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void CryptoPhoneApp.main </td>
          <td>(</td>
          <td class="paramtype">final String&#160;</td>
          <td class="paramname"> <em>args</em>[]&#160;)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Main entry point. </p>
<p>Creates GUI instance of the <a class="el" href="class_crypto_phone_app.html" title="The Swing based GUI front-end of the Kryptofon application that implements simple VoIP phone and chat...">CryptoPhoneApp</a> application.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td>the command line arguments </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l02072">2072</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="comment">// System.getProperties().list( System.out );</span>
        
        java.awt.EventQueue.invokeLater( 
                <span class="keyword">new</span> Runnable() {
                    <span class="keyword">public</span> <span class="keywordtype">void</span> run() {
                        <span class="keyword">new</span> <a class="code" href="class_crypto_phone_app.html#af095f99b8ba1f94596f5b38ecd5f294f" title="Creates a new instance of the CryptoPhoneApp.">CryptoPhoneApp</a>( args ).setVisible( <span class="keyword">true</span> );
                    }
                }
            );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ad8e7fbdd972917b6601716fb4753549d"></a><!-- doxytag: member="CryptoPhoneApp::mainTimerEvent" ref="ad8e7fbdd972917b6601716fb4753549d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.mainTimerEvent </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handles events from application's mainTimer (an instance of the Swing timer). </p>
<p>It monitors status of:</p>
<ol type="1">
<li>PBXClient connection</li>
<li>connection to remote peer (if any)</li>
<li>awaiting acknowledgment for our last invite message (if any)</li>
</ol>
<p>If PBXClient connection is detected to be down, the procedure will try to reconnect to chat server after some period of time. If reconnection retry count exceeded maximum, timer will stop retrying.</p>
<p>In case of dead remote peer (not sending UDP packets to us), udpChannel.isPearDead() timer will clear down the call.</p>
<p>In case of unacknowledged invite message, inviteTimeout timer will cancel current inviting. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00738">738</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00157">currentInvite</a>, <a class="el" href="_datagram_channel_8java_source.html#l00133">protocol.DatagramChannel.getRemotePeer()</a>, <a class="el" href="_remote_peer_8java_source.html#l00083">protocol.RemotePeer.getRemoteUserId()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00163">inviteTimeout</a>, <a class="el" href="_datagram_channel_8java_source.html#l00141">protocol.DatagramChannel.isPearDead()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00833">logMessage()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00169">monitorIfPeerIsSendingVoice</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00104">pbxChannel</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00125">reconnectRetryCount</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00120">reconnectTimeout</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00922">report()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00094">serverName</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00099">serverPort</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00901">setPbxStatus()</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00229">pbx.PBXClient.start()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00136">udpChannel</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00703">actionPerformed()</a>.</p>
<div class="fragment"><pre class="fragment">    {<span class="comment"></span>
<span class="comment">        //////////////////////////////////////////////////////////////////////////////////</span>
<span class="comment"></span>        <span class="comment">/* Monitor remote peer&#39;s status</span>
<span class="comment">         */</span>
        <a class="code" href="classprotocol_1_1_remote_peer.html" title="Encapsulates the link between the UDP channel and a CallContext.">RemotePeer</a> peer = <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#abe4c6003fc0e76a7082fc2a7e923a2d0" title="Returns the remote peer.">getRemotePeer</a>();
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#aab94ceafb0b41e812419d2ef860b15da" title="Indicates whether to monitor if peer is sending voice PDUs to us.">monitorIfPeerIsSendingVoice</a> 
                &amp;&amp; peer != null &amp;&amp; <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#ae8dd033afe87b2135f8f004d05a7f62a" title="Returns if peer seems to be dead (we are not receiving PDUs from it).">isPearDead</a>( <span class="comment">/*timeout-millis*/</span> 2500 ) ) 
        {
            <a class="code" href="class_crypto_phone_app.html#aab94ceafb0b41e812419d2ef860b15da" title="Indicates whether to monitor if peer is sending voice PDUs to us.">monitorIfPeerIsSendingVoice</a> = <span class="keyword">false</span>;
            
            <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logWarn&quot;</span>, <span class="stringliteral">&quot;Warning: Not receiving voice from &#39;&quot;</span> 
                    + peer.<a class="code" href="classprotocol_1_1_remote_peer.html#a1ae75abb703f3e99b1cbfdb53388fb0d" title="Returns remote name (remote userid) of the peer.">getRemoteUserId</a> () + <span class="stringliteral">&quot;&#39;; Maybe it&#39;s dead?&quot;</span> );
        }
<span class="comment"></span>
<span class="comment">        //////////////////////////////////////////////////////////////////////////////////</span>
<span class="comment"></span>        <span class="comment">/* Monitor the last issued invite</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#ab791babb2bcfea431164e9ca91cb496c" title="Timer used to detect unresolved invite (i.e.">inviteTimeout</a> &gt;= 0 ) <span class="comment">// invite timeout is active</span>
        {
            <span class="keywordflow">if</span> ( --<a class="code" href="class_crypto_phone_app.html#ab791babb2bcfea431164e9ca91cb496c" title="Timer used to detect unresolved invite (i.e.">inviteTimeout</a> &lt; 0 ) <span class="comment">// invite timeout reached </span>
            {
                <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logError&quot;</span>, <span class="stringliteral">&quot;It seems that kryptofon user &#39;&quot;</span> + <a class="code" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934" title="The remote peer (its user id) that we are currently inviting to a call.">currentInvite</a> 
                        + <span class="stringliteral">&quot;&#39; is not connected.&quot;</span> );
                <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logInfo&quot;</span>, <span class="stringliteral">&quot;Use :list to query available users...&quot;</span> );
                <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>( <span class="stringliteral">&quot;&lt;hr/&gt;&quot;</span> );

                <a class="code" href="class_crypto_phone_app.html#ab791babb2bcfea431164e9ca91cb496c" title="Timer used to detect unresolved invite (i.e.">inviteTimeout</a> = -1;
                <a class="code" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934" title="The remote peer (its user id) that we are currently inviting to a call.">currentInvite</a> = null;
            }
        }
        <span class="comment"></span>
<span class="comment">        //////////////////////////////////////////////////////////////////////////////////</span>
<span class="comment"></span>        <span class="comment">/* Monitor current connection.</span>
<span class="comment">         */</span>
        <span class="keyword">final</span> <span class="keywordtype">int</span> maxRetryCount = 3;
        <span class="keyword">final</span> <span class="keywordtype">int</span> reconnectDelay = 2;
        
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a> != null &amp;&amp; <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.isAlive () ) {
            <a class="code" href="class_crypto_phone_app.html#a2cd1707c917afbfad5a75482a22670b5" title="The reconnect delay timer (for timing delay between two reconnections).">reconnectTimeout</a> = -1; <span class="comment">// disables timer</span>
            <span class="keywordflow">return</span>;
        }

        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a35e52a134d8ccabb268198f9d6af6f88" title="Retry counter of number of failed reconnecting attempts.">reconnectRetryCount</a> &gt;= maxRetryCount ) {

            <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a35e52a134d8ccabb268198f9d6af6f88" title="Retry counter of number of failed reconnecting attempts.">reconnectRetryCount</a> == maxRetryCount ) {
                
                ++<a class="code" href="class_crypto_phone_app.html#a35e52a134d8ccabb268198f9d6af6f88" title="Retry counter of number of failed reconnecting attempts.">reconnectRetryCount</a>;
                
                <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>( <span class="stringliteral">&quot;&lt;hr/&gt;&lt;div class=&#39;logDiv&#39;&gt;&quot;</span>
                    + <span class="stringliteral">&quot;&lt;span class=&#39;logError&#39;&gt;Press ENTER to quit or type&lt;br/&gt;&lt;br/&gt;&quot;</span>
                    + <span class="stringliteral">&quot;&amp;nbsp;&amp;nbsp; :open [ &amp;lt;hostname&amp;gt; [ &amp;lt;port&amp;gt; ] ]&lt;br/&gt;&lt;br/&gt;&quot;</span>
                    + <span class="stringliteral">&quot;to open new connection...&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;/div&gt;&quot;</span> 
                    );
                <a class="code" href="class_crypto_phone_app.html#a3344f60177a1feeabca118383244cb53" title="Updates status message by updating window title.">setPbxStatus</a>( <span class="stringliteral">&quot;Dead&quot;</span> );
                
                <span class="comment">/* Reset defaults */</span>
                <a class="code" href="class_crypto_phone_app.html#a6db74f3877792c5613221defef4e4447" title="The host name or IP address of the remote chat server.">serverName</a> = <span class="stringliteral">&quot;atlas.dsv.su.se&quot;</span>;
                <a class="code" href="class_crypto_phone_app.html#afce08401731d533ad12121ef22fd1b28" title="The TCP port where to connect to on remote chat server.">serverPort</a> = 9494;
            }
            
            <span class="keywordflow">return</span>; <span class="comment">// Leave to the user to quit by pressing ENTER</span>
        } 
            
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a2cd1707c917afbfad5a75482a22670b5" title="The reconnect delay timer (for timing delay between two reconnections).">reconnectTimeout</a> &lt; 0 )  {
            <a class="code" href="class_crypto_phone_app.html#a3344f60177a1feeabca118383244cb53" title="Updates status message by updating window title.">setPbxStatus</a>( <span class="stringliteral">&quot;Disconnected&quot;</span> );
            <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>( <span class="stringliteral">&quot;&lt;hr/&gt;&lt;div class=&#39;logDiv&#39;&gt;Reconnecting in &quot;</span> 
                    + reconnectDelay + <span class="stringliteral">&quot; seconds...&lt;/div&gt;&quot;</span>
                    );
            <a class="code" href="class_crypto_phone_app.html#a2cd1707c917afbfad5a75482a22670b5" title="The reconnect delay timer (for timing delay between two reconnections).">reconnectTimeout</a> = reconnectDelay; <span class="comment">// start timer</span>
            <span class="keywordflow">return</span>;
        }
        
        <span class="keywordflow">if</span> ( --<a class="code" href="class_crypto_phone_app.html#a2cd1707c917afbfad5a75482a22670b5" title="The reconnect delay timer (for timing delay between two reconnections).">reconnectTimeout</a> &gt; 0 ) {
            <span class="keywordflow">return</span>;
        }
        
        <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>( <span class="stringliteral">&quot;&lt;div class=&#39;logDiv&#39;&gt;Retry #&quot;</span>
               + ( ++<a class="code" href="class_crypto_phone_app.html#a35e52a134d8ccabb268198f9d6af6f88" title="Retry counter of number of failed reconnecting attempts.">reconnectRetryCount</a> ) 
               + <span class="stringliteral">&quot; of max &quot;</span> 
               + maxRetryCount
               + <span class="stringliteral">&quot;:&lt;br/&gt;&lt;/div&gt;&quot;</span>
               );

        <a class="code" href="class_crypto_phone_app.html#a2cd1707c917afbfad5a75482a22670b5" title="The reconnect delay timer (for timing delay between two reconnections).">reconnectTimeout</a> = -1; <span class="comment">// disables timer and restarts new connection</span>

        <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a> = <span class="keyword">new</span> <a class="code" href="classpbx_1_1_p_b_x_client.html" title="Encapsulates rudimentary functionality of a PBX to list and invite users (peers) to secure calls...">PBXClient</a>( <a class="code" href="class_crypto_phone_app.html#a6db74f3877792c5613221defef4e4447" title="The host name or IP address of the remote chat server.">serverName</a>, <a class="code" href="class_crypto_phone_app.html#afce08401731d533ad12121ef22fd1b28" title="The TCP port where to connect to on remote chat server.">serverPort</a> , <span class="keyword">this</span> );
        <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a62086db6e1497d23af966f87c148945e" title="Starts the thread.">start</a> ();
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a85bdfbdcbf235bff83f587018a561a17"></a><!-- doxytag: member="CryptoPhoneApp::onAccept" ref="a85bdfbdcbf235bff83f587018a561a17" args="(final PBXClient.ControlMessage m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.onAccept </td>
          <td>(</td>
          <td class="paramtype">final PBXClient.ControlMessage&#160;</td>
          <td class="paramname"> <em>m</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handles on ACCEPT call-back from the PBXClient. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00983">983</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l01624">deferredOnAccept()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        java.awt.EventQueue.invokeLater( 
                <span class="keyword">new</span> Runnable() {
                    <span class="keyword">public</span> <span class="keywordtype">void</span> run() {
                        <a class="code" href="class_crypto_phone_app.html#a5df57190d95f3874e0d4a4a9cb92db61" title="On ACCEPT call-back is triggered when PBXClient receives accepting message (indicating that the peer ...">deferredOnAccept</a>( m );
                    }
                }
            );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a245764c5308b9be52a00d57ed74af67f"></a><!-- doxytag: member="CryptoPhoneApp::onBye" ref="a245764c5308b9be52a00d57ed74af67f" args="(final PBXClient.ControlMessage m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.onBye </td>
          <td>(</td>
          <td class="paramtype">final PBXClient.ControlMessage&#160;</td>
          <td class="paramname"> <em>m</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handles on BYE call-back from the PBXClient. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00998">998</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l01714">deferredOnBye()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        java.awt.EventQueue.invokeLater( 
                <span class="keyword">new</span> Runnable() {
                    <span class="keyword">public</span> <span class="keywordtype">void</span> run() {
                        <a class="code" href="class_crypto_phone_app.html#a2b5c3d4a45a33d1f19a2ed765d5b8205" title="On BYE call-back is triggered when PBXClient receives &amp;#39;bye&amp;#39; message (indicating that the peer...">deferredOnBye</a>( m );
                    }
                }
            );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a94350c6fc34e9e2888324fbaa1704d97"></a><!-- doxytag: member="CryptoPhoneApp::onInstantMessage" ref="a94350c6fc34e9e2888324fbaa1704d97" args="(final PBXClient.ControlMessage m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.onInstantMessage </td>
          <td>(</td>
          <td class="paramtype">final PBXClient.ControlMessage&#160;</td>
          <td class="paramname"> <em>m</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handles on IMSG call-back from the PBXClient. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l01013">1013</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l01750">deferredOnInstantMessage()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        java.awt.EventQueue.invokeLater( 
                <span class="keyword">new</span> Runnable() {
                    <span class="keyword">public</span> <span class="keywordtype">void</span> run() {
                        <a class="code" href="class_crypto_phone_app.html#aa5c2ce41e5a2695668be72948f1b207f" title="On IMSG call-back is triggered when PBXClient receives private instant message (encrypted with sessio...">deferredOnInstantMessage</a>( m );
                    }
                }
            );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ad108bb27ddd3d6004bc0ae5c81bb9446"></a><!-- doxytag: member="CryptoPhoneApp::onInvite" ref="ad108bb27ddd3d6004bc0ae5c81bb9446" args="(final PBXClient.ControlMessage m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.onInvite </td>
          <td>(</td>
          <td class="paramtype">final PBXClient.ControlMessage&#160;</td>
          <td class="paramname"> <em>m</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handles on INVITE call-back from the PBXClient. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00953">953</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l01501">deferredOnInvite()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        java.awt.EventQueue.invokeLater( 
                <span class="keyword">new</span> Runnable() {
                    <span class="keyword">public</span> <span class="keywordtype">void</span> run() {
                        <a class="code" href="class_crypto_phone_app.html#adfdb1b2d2bc5d721f6158a67517beaaf" title="On INVITE call-back is triggered when PBXClient receives inviting message (indicating that someone is...">deferredOnInvite</a>( m );
                    }
                }
            );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a01669bed809387eb549401705cef818a"></a><!-- doxytag: member="CryptoPhoneApp::onRing" ref="a01669bed809387eb549401705cef818a" args="(final PBXClient.ControlMessage m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.onRing </td>
          <td>(</td>
          <td class="paramtype">final PBXClient.ControlMessage&#160;</td>
          <td class="paramname"> <em>m</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handles on RING call-back from the PBXClient. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00968">968</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l01554">deferredOnRing()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        java.awt.EventQueue.invokeLater( 
                <span class="keyword">new</span> Runnable() {
                    <span class="keyword">public</span> <span class="keywordtype">void</span> run() {
                        <a class="code" href="class_crypto_phone_app.html#a5912b56b6a4d48c6b81c1c867f760a93" title="On RING call-back is triggered when PBXClient receives ringing message (indicating that the peer is a...">deferredOnRing</a>( m );
                    }
                }
            );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a2daa0d1e0ed86309df9d2d51f5010fc1"></a><!-- doxytag: member="CryptoPhoneApp::parseInputMessage" ref="a2daa0d1e0ed86309df9d2d51f5010fc1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.parseInputMessage </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Parses input message from inputMsg and sends it to chat server. </p>
<p>If it is a command (the first word is prefixed with ':' character) it spawns <a class="el" href="class_crypto_phone_app.html#aa05db4cf04f0da872d4bf5e2d3b44123" title="Parses commands prefixed with &#39;:&#39; character.">executeCommand()</a> for further parsing. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l01054">1054</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00082">defaultInputMsg</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00647">formWindowClosing()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00872">getUserId()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00185">inputMsg</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00104">pbxChannel</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00244">pbx.PBXClient.send()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01121">sendInstantMessage()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01029">tokenizeInputMessage()</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00662">keyPressed()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00589">sendButton_Clicked()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="comment">/* Split string into words, removing all leading, trailing </span>
<span class="comment">         * and superfluous white-spaces between words</span>
<span class="comment">         */</span>
        String[] words = <a class="code" href="class_crypto_phone_app.html#a5a5980643392e77e922cc2b4045bdf58" title="Tokenizes inputMsg into words and returns array of strings.">tokenizeInputMessage</a> ();
        
        String cmd = words.length &gt;= 1 ? words[0].toLowerCase () : <span class="stringliteral">&quot;&quot;</span>;

        <span class="comment">/* If it is a command, parse it separately</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( cmd.startsWith( <span class="stringliteral">&quot;:&quot;</span> ) ) 
        {
            <span class="keywordtype">int</span> argCount = words.length - 1;
            <span class="keywordtype">int</span> argOffset = 1;
            
            <span class="comment">/* If &quot;:&quot; is alone (i.e. separated by whitespace from the next word), </span>
<span class="comment">             * then join it with the next word.</span>
<span class="comment">             */</span>
            <span class="keywordflow">if</span> ( cmd.equals( <span class="stringliteral">&quot;:&quot;</span> ) &amp;&amp; words.length &gt;= 2 ) {
                cmd = cmd + words[1];
                argCount = words.length - 2;
                argOffset = 2;
            }

            <span class="comment">/* Prepare command arguments... */</span>
            String[] args = <span class="keyword">new</span> String[ argCount ];
            System.arraycopy( words, argOffset, args, 0, argCount );
            
            <span class="comment">/* ... then execute command */</span>
            <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#aa05db4cf04f0da872d4bf5e2d3b44123" title="Parses commands prefixed with &amp;#39;:&amp;#39; character.">executeCommand</a>( cmd, args ) ) {
                <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>.setText( <span class="stringliteral">&quot;&quot;</span> );
            }
            <span class="keywordflow">return</span>;
        }

        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a> == null || ! <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.isAlive () ) <span class="comment">// confirms dead-server question</span>
        {
            <a class="code" href="class_crypto_phone_app.html#a7490652207cab4965f13ea019ee66cbe" title="Closes application by gracefully terminating all threads.">formWindowClosing</a>( null );
            System.exit( 0 );
        }

        <span class="comment">/* Default task: send message to chat server</span>
<span class="comment">         */</span>
        String inputInstantMessage = <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>.getText ();

        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a8a6cb43a9dcb7a42a85b92b9cae15420" title="The initial message content of the input text message field.">defaultInputMsg</a>.equalsIgnoreCase( inputInstantMessage ) ) 
        { 
            <span class="comment">/* ignore default input message */</span>
            <span class="keywordflow">return</span>;
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#ac90d3daccce7d2003633305b3d4b6087" title="Returns configured user ID (username).">getUserId</a>().isEmpty () ) <span class="comment">// no user id</span>
        {
            <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a445ccab5e5e2ca5ad2ec3b1d1d28fdb2" title="Sends message (appended with new-line) to chat server.">send</a>( inputInstantMessage );
            <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>.setText( <span class="stringliteral">&quot;&quot;</span> );
            <span class="keywordflow">return</span>;
        }

        <a class="code" href="class_crypto_phone_app.html#a8551798b8de4dd77d8190ddcae8e1869" title="Sends chat message (encrypted if we have established secure channel with the user).">sendInstantMessage</a>( inputInstantMessage, <span class="comment">/*forceUnencrypted*/</span> <span class="keyword">false</span> );

        <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>.setText( <span class="stringliteral">&quot;&quot;</span> );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a365d37a3730d1a2b3276f2b0bb4f5b30"></a><!-- doxytag: member="CryptoPhoneApp::report" ref="a365d37a3730d1a2b3276f2b0bb4f5b30" args="(String cssClass, String str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.report </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>cssClass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reports a system message to log. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00922">922</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00833">logMessage()</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01857">acceptIncomingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00857">attention()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01624">deferredOnAccept()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01714">deferredOnBye()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01501">deferredOnInvite()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01554">deferredOnRing()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01950">dumpLogArea()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00738">mainTimerEvent()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01775">tryToVerifyInvitingCall()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>(
            <span class="stringliteral">&quot;&lt;div class=&#39;logDiv&#39;&gt;&quot;</span> + <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.nowMillis () 
                     + <span class="stringliteral">&quot;&amp;nbsp;&amp;nbsp;&lt;span class=&#39;&quot;</span> + cssClass + <span class="stringliteral">&quot;&#39;&gt;&quot;</span>
                     + <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.EscapeHTML( str )
                     + <span class="stringliteral">&quot;&lt;/span&gt;&lt;/div&gt;&quot;</span>
            );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a3e002ea8ef5e007c280b23ffc0b592f3"></a><!-- doxytag: member="CryptoPhoneApp::reportIncomingTextMessage" ref="a3e002ea8ef5e007c280b23ffc0b592f3" args="(String cssClass, String userId, String message)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.reportIncomingTextMessage </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>cssClass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>userId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reports incoming message. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00936">936</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00833">logMessage()</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01750">deferredOnInstantMessage()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01121">sendInstantMessage()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="class_crypto_phone_app.html#aa443f1b7f508ff5f4a520ac21acc1065" title="Logs message formated with limited HTML (limited because of JEditorPane)">logMessage</a>(
                <span class="stringliteral">&quot;&lt;div class=&#39;logDiv&#39;&gt;&quot;</span> + <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.nowMillis () 
                         + <span class="stringliteral">&quot;&amp;nbsp;&amp;nbsp;&quot;</span> 
                         + <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.EscapeHTML( <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a> ).trim () 
                         + <span class="stringliteral">&quot;: &lt;span class=&#39;&quot;</span> + cssClass + <span class="stringliteral">&quot;&#39;&gt;&quot;</span>
                         + <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.EscapeHTML( message ).trim ()
                         + <span class="stringliteral">&quot;&lt;/span&gt;&lt;/div&gt;&quot;</span>
                );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a655f5dd1ce1998f22b45b4854a5f8c85"></a><!-- doxytag: member="CryptoPhoneApp::secureDialButton_Clicked" ref="a655f5dd1ce1998f22b45b4854a5f8c85" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.secureDialButton_Clicked </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Performs :invite+ command. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00624">624</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l01857">acceptIncomingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00146">lastMessageFromPBX</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01029">tokenizeInputMessage()</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00703">actionPerformed()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="comment">/* If there is outstanding INVITE waiting to be accepted,</span>
<span class="comment">         * do accept incoming call instead of making new outgoing call.</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( this.<a class="code" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5" title="The last PBX control message sent to us (waiting to be handled)">lastMessageFromPBX</a> == null ) {
            <a class="code" href="class_crypto_phone_app.html#aa05db4cf04f0da872d4bf5e2d3b44123" title="Parses commands prefixed with &amp;#39;:&amp;#39; character.">executeCommand</a>( <span class="stringliteral">&quot;:invite+&quot;</span>, <a class="code" href="class_crypto_phone_app.html#a5a5980643392e77e922cc2b4045bdf58" title="Tokenizes inputMsg into words and returns array of strings.">tokenizeInputMessage</a> () );
        } <span class="keywordflow">else</span> {
            <a class="code" href="class_crypto_phone_app.html#a22263d1bb4efd460d3332a533afdcfe7" title="Accepts incoming invite.">acceptIncomingCall</a>( <span class="comment">/*secured*/</span> <span class="keyword">true</span> );
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="af2074d18d0a0c7091ebd7b4ea24ab0ab"></a><!-- doxytag: member="CryptoPhoneApp::sendButton_Clicked" ref="af2074d18d0a0c7091ebd7b4ea24ab0ab" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.sendButton_Clicked </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Parses input text entered by the user in inputMsg. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00589">589</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00082">defaultInputMsg</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00185">inputMsg</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01054">parseInputMessage()</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00703">actionPerformed()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a8a6cb43a9dcb7a42a85b92b9cae15420" title="The initial message content of the input text message field.">defaultInputMsg</a>.equalsIgnoreCase( <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>.getText () ) ) { 
            <span class="keywordflow">return</span>; <span class="comment">// ignore default input message</span>
        }

        <a class="code" href="class_crypto_phone_app.html#a2daa0d1e0ed86309df9d2d51f5010fc1" title="Parses input message from inputMsg and sends it to chat server.">parseInputMessage</a> ();
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a8551798b8de4dd77d8190ddcae8e1869"></a><!-- doxytag: member="CryptoPhoneApp::sendInstantMessage" ref="a8551798b8de4dd77d8190ddcae8e1869" args="(String message, boolean forceUnencrypted)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.sendInstantMessage </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"> <em>forceUnencrypted</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sends chat message (encrypted if we have established secure channel with the user). </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l01121">1121</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_symmetric_cipher_8java_source.html#l00181">crypto.SymmetricCipher.encrypt()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00133">protocol.DatagramChannel.getRemotePeer()</a>, <a class="el" href="_remote_peer_8java_source.html#l00083">protocol.RemotePeer.getRemoteUserId()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00109">protocol.DatagramChannel.getUsedSymmetricCipher()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00872">getUserId()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00185">inputMsg</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00104">pbxChannel</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00936">reportIncomingTextMessage()</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00244">pbx.PBXClient.send()</a>, <a class="el" href="_p_b_x_client_8java_source.html#l00606">pbx.PBXClient.sendInstantMessage()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00136">udpChannel</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01054">parseInputMessage()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="comment">/* Get symmetric ciphering engine for PDUs and messages, if any.</span>
<span class="comment">         */</span>
        <a class="code" href="classprotocol_1_1_remote_peer.html" title="Encapsulates the link between the UDP channel and a CallContext.">RemotePeer</a> remotePeer = <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#abe4c6003fc0e76a7082fc2a7e923a2d0" title="Returns the remote peer.">getRemotePeer</a> ();
        <a class="code" href="classcrypto_1_1_symmetric_cipher.html" title="Instances of the Symmetric cipher class arew used to cipher peer-to-peer datagram packets...">SymmetricCipher</a> cipher = <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a5396fcc387e78a8bb6c318153683069e" title="Gets current cipher used for PDU ciphering.">getUsedSymmetricCipher</a> ();
        <span class="keywordflow">if</span> ( forceUnencrypted || remotePeer == null || cipher == null ) 
        {
            <span class="comment">/* Send un-encrypted message if there is no common ciphering engine </span>
<span class="comment">             */</span>
            <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a445ccab5e5e2ca5ad2ec3b1d1d28fdb2" title="Sends message (appended with new-line) to chat server.">send</a>( message, <a class="code" href="class_crypto_phone_app.html#ac90d3daccce7d2003633305b3d4b6087" title="Returns configured user ID (username).">getUserId</a> () );
            <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>.setText( <span class="stringliteral">&quot;&quot;</span> );
            <span class="keywordflow">return</span>;
        }

        <span class="comment">/* Send encrypted message to peer and echo the highlighted message back to our </span>
<span class="comment">         * user. Wwe must echo the message because our PBXClient will not catch chat </span>
<span class="comment">         * servers broadcast with the encrypted message, as the instant message will </span>
<span class="comment">         * be explicitly directed to the remote peer. </span>
<span class="comment">         */</span>
        String secret = cipher.<a class="code" href="classcrypto_1_1_symmetric_cipher.html#aaeef3c040ad757d2b17eac808b80a739" title="Encrypts random preamble of the given length appended with the input plain text.">encrypt</a>( message );
        <span class="keywordflow">if</span> ( secret != null )
        {
            <a class="code" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf" title="The instance of PBX client connected to remote chat server.">pbxChannel</a>.<a class="code" href="classpbx_1_1_p_b_x_client.html#a54cfb627d993b20c25c3ebf701ea6815" title="Broadcasts IMSG message.">sendInstantMessage</a>( remotePeer.<a class="code" href="classprotocol_1_1_remote_peer.html#a1ae75abb703f3e99b1cbfdb53388fb0d" title="Returns remote name (remote userid) of the peer.">getRemoteUserId</a>(), secret );
            
            <a class="code" href="class_crypto_phone_app.html#a3e002ea8ef5e007c280b23ffc0b592f3" title="Reports incoming message.">reportIncomingTextMessage</a>( <span class="stringliteral">&quot;secureMessage&quot;</span>, 
                    <a class="code" href="class_crypto_phone_app.html#ac90d3daccce7d2003633305b3d4b6087" title="Returns configured user ID (username).">getUserId</a>() + <span class="stringliteral">&quot; [encrypted]&quot;</span>, message ); 
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a3344f60177a1feeabca118383244cb53"></a><!-- doxytag: member="CryptoPhoneApp::setPbxStatus" ref="a3344f60177a1feeabca118383244cb53" args="(String str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.setPbxStatus </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>str</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Updates status message by updating window title. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00901">901</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00077">appTitle</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00109">pbxChannelStatus</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00738">mainTimerEvent()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keyword">final</span> String strCopy = <span class="keyword">new</span> String( str );
        
        java.awt.EventQueue.invokeLater( 
                <span class="keyword">new</span> Runnable() {
                    <span class="keyword">public</span> <span class="keywordtype">void</span> run() {
                        <span class="keyword">synchronized</span>( <a class="code" href="class_crypto_phone_app.html#a92d666e527bb56bc298a903e12f8069e" title="The last status message of the PBX channel (posted by the setPbxStatus()).">pbxChannelStatus</a> )
                        {
                            <a class="code" href="class_crypto_phone_app.html#a92d666e527bb56bc298a903e12f8069e" title="The last status message of the PBX channel (posted by the setPbxStatus()).">pbxChannelStatus</a> = <a class="code" href="class_crypto_phone_app.html#a4ff8f52c4cd52c0786221b1af5969ae7" title="The common application title prefix.">appTitle</a> + <span class="stringliteral">&quot;; &quot;</span> + strCopy;
                            setTitle( <a class="code" href="class_crypto_phone_app.html#a92d666e527bb56bc298a903e12f8069e" title="The last status message of the PBX channel (posted by the setPbxStatus()).">pbxChannelStatus</a> );
                        }
                    }
                }
            );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aa1176bb75422d98acbc0c4f3a8ac35b6"></a><!-- doxytag: member="CryptoPhoneApp::startKryptofonServices" ref="aa1176bb75422d98acbc0c4f3a8ac35b6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.startKryptofonServices </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts audio interface and UDP peer-to-peer channel. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00532">532</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00141">audioInterface</a>, <a class="el" href="_datagram_channel_8java_source.html#l00089">protocol.DatagramChannel.getLocalPort()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00872">getUserId()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00130">localUdpPort</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00136">udpChannel</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00187">userId</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="class_crypto_phone_app.html#a7eaf4402df3b1abb3bde0c0cef34204b" title="The instance of the Audio interface used to access microphone and speaker.">audioInterface</a> = <span class="keyword">new</span> audio.AudioInterfacePCM ();
        <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a> = <span class="keyword">new</span> <a class="code" href="classprotocol_1_1_datagram_channel.html" title="Binds the UDP port.">DatagramChannel</a>( <a class="code" href="class_crypto_phone_app.html#a46bae86a63b1548d96e5218f369713f6" title="The default local UDP port.">localUdpPort</a> );
        
        <span class="comment">/* Now, check if UDP channel is bound to the the local port that we requested.</span>
<span class="comment">         * If not, it means that we have multiple instance of the CryptoPhoneApp </span>
<span class="comment">         * running possibly with the same user ID. To fix this, we&#39;re going to </span>
<span class="comment">         * adjust our user ID with the suffix containing distance from the originally</span>
<span class="comment">         * requested UDP port, e.g. if we&#39;ve requested port 47000 and now bound to 47001,</span>
<span class="comment">         * then we will adjust original &#39;username&#39; to be &#39;username-2&#39;.</span>
<span class="comment">         * This helps testing when starting multiple instances of the CryptoPhoneApp</span>
<span class="comment">         * on the same single-user machine (like Windows or Mac). </span>
<span class="comment">         */</span>
        <span class="keywordtype">int</span> udpDifference = <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a6655236f8322711b91ef0f9b799f892f" title="Returns used local UDP port.">getLocalPort</a> () - <a class="code" href="class_crypto_phone_app.html#a46bae86a63b1548d96e5218f369713f6" title="The default local UDP port.">localUdpPort</a>;
        <span class="keywordflow">if</span> ( udpDifference &gt; 0 ) {
            <a class="code" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">userId</a>.setText( <a class="code" href="class_crypto_phone_app.html#ac90d3daccce7d2003633305b3d4b6087" title="Returns configured user ID (username).">getUserId</a>() + <span class="stringliteral">&quot;-&quot;</span> + ( udpDifference + 1 ) );
            Point winPos = getLocation ();
            winPos.x += 40 * udpDifference; winPos.y += 40 * udpDifference;
            setLocation( winPos );
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a5e90f40ce9d3ea59675f792c5c7afeae"></a><!-- doxytag: member="CryptoPhoneApp::stopKryptofonServices" ref="a5e90f40ce9d3ea59675f792c5c7afeae" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CryptoPhoneApp.stopKryptofonServices </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stops audio interface and UDP peer-to-peer channel. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00558">558</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00141">audioInterface</a>, <a class="el" href="interfaceaudio_1_1_audio_interface.html#a160540f5ce5ced5cc973c3dc157ece4d">audio.AudioInterface.cleanUp()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00167">protocol.DatagramChannel.stop()</a>, <a class="el" href="interfaceaudio_1_1_audio_interface.html#ada9d08501a66dba278641a0bd853c479">audio.AudioInterface.stopPlay()</a>, <a class="el" href="interfaceaudio_1_1_audio_interface.html#a05f40c36a07e1a89b2a136c5e8a206ad">audio.AudioInterface.stopRecording()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00136">udpChannel</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00647">formWindowClosing()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="comment">/* Clear existing call, if any</span>
<span class="comment">         */</span>
        <a class="code" href="class_crypto_phone_app.html#aa05db4cf04f0da872d4bf5e2d3b44123" title="Parses commands prefixed with &amp;#39;:&amp;#39; character.">executeCommand</a>( <span class="stringliteral">&quot;:bye&quot;</span>, null );

        <span class="comment">/* Stop listening UDP</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a> != null ) {
            <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#ac1d41f5824bc43b750eb6d681fd74b9c" title="Stops PDU receiver thread.">stop</a> ();
        }

        <span class="comment">/* Stop audio services</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a7eaf4402df3b1abb3bde0c0cef34204b" title="The instance of the Audio interface used to access microphone and speaker.">audioInterface</a> != null ) {
            <a class="code" href="class_crypto_phone_app.html#a7eaf4402df3b1abb3bde0c0cef34204b" title="The instance of the Audio interface used to access microphone and speaker.">audioInterface</a>.<a class="code" href="interfaceaudio_1_1_audio_interface.html#ada9d08501a66dba278641a0bd853c479" title="Stops the player.">stopPlay</a> ();
            <a class="code" href="class_crypto_phone_app.html#a7eaf4402df3b1abb3bde0c0cef34204b" title="The instance of the Audio interface used to access microphone and speaker.">audioInterface</a>.<a class="code" href="interfaceaudio_1_1_audio_interface.html#a05f40c36a07e1a89b2a136c5e8a206ad" title="Stops the recorder - but don&amp;#39;t throw it away.">stopRecording</a> ();
            <a class="code" href="class_crypto_phone_app.html#a7eaf4402df3b1abb3bde0c0cef34204b" title="The instance of the Audio interface used to access microphone and speaker.">audioInterface</a>.<a class="code" href="interfaceaudio_1_1_audio_interface.html#a160540f5ce5ced5cc973c3dc157ece4d" title="Cleans up resources used by the interface.">cleanUp</a> ();
        }

        <span class="comment">/* Done</span>
<span class="comment">         */</span>
        <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a> = null;
        <a class="code" href="class_crypto_phone_app.html#a7eaf4402df3b1abb3bde0c0cef34204b" title="The instance of the Audio interface used to access microphone and speaker.">audioInterface</a> = null;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a5a5980643392e77e922cc2b4045bdf58"></a><!-- doxytag: member="CryptoPhoneApp::tokenizeInputMessage" ref="a5a5980643392e77e922cc2b4045bdf58" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String [] CryptoPhoneApp.tokenizeInputMessage </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tokenizes inputMsg into words and returns array of strings. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l01029">1029</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_crypto_phone_app_8java_source.html#l00082">defaultInputMsg</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00185">inputMsg</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00609">dialButton_Clicked()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00639">hangupButton_Clicked()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01054">parseInputMessage()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00624">secureDialButton_Clicked()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        String message = <a class="code" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">inputMsg</a>.getText();
        
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a8a6cb43a9dcb7a42a85b92b9cae15420" title="The initial message content of the input text message field.">defaultInputMsg</a>.equalsIgnoreCase( message ) ) { 
            <span class="keywordflow">return</span> <span class="keyword">new</span> String[0]; <span class="comment">// ignore default input message</span>
        }

        <span class="comment">/* Split string into words, removing all leading, trailing </span>
<span class="comment">         * and superfluous white-spaces between words</span>
<span class="comment">         */</span>
        String[] words = message.trim().split( <span class="stringliteral">&quot;\\s{1,}&quot;</span> );
        
        <span class="keywordflow">if</span> ( words.length &gt;= 1 &amp;&amp; words[0].isEmpty () ) {
            <span class="keywordflow">return</span> <span class="keyword">new</span> String[0]; <span class="comment">// if contains empty words, then it is really empty</span>
        }

        <span class="keywordflow">return</span> words;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a781502d3e62bb8d8ad78fd0388472c2a"></a><!-- doxytag: member="CryptoPhoneApp::tryToVerifyInvitingCall" ref="a781502d3e62bb8d8ad78fd0388472c2a" args="(boolean silent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcrypto_1_1_public_encryptor.html">PublicEncryptor</a> CryptoPhoneApp.tryToVerifyInvitingCall </td>
          <td>(</td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"> <em>silent</em>&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Verifies invitor's public key (signed by invitor's private key) against the public keys from authorized keys file. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l01775">1775</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>References <a class="el" href="_public_encryptor_8java_source.html#l00326">crypto.PublicEncryptor.getVerificatorName()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00125">protocol.DatagramChannel.hasRemotePeer()</a>, <a class="el" href="_public_encryptor_8java_source.html#l00308">crypto.PublicEncryptor.isActive()</a>, <a class="el" href="_public_encryptor_8java_source.html#l00316">crypto.PublicEncryptor.isVerified()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00146">lastMessageFromPBX</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00922">report()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00178">securityState</a>, <a class="el" href="_j_sec_state_8java_source.html#l00072">ui.JSecState.setState()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00136">udpChannel</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01857">acceptIncomingCall()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01501">deferredOnInvite()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( this.<a class="code" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5" title="The last PBX control message sent to us (waiting to be handled)">lastMessageFromPBX</a> == null ) { <span class="comment">// There is no INVITE to accept</span>
            <span class="keywordflow">return</span> null;
        }
        
        <a class="code" href="classpbx_1_1_p_b_x_client.html" title="Encapsulates rudimentary functionality of a PBX to list and invite users (peers) to secure calls...">PBXClient</a>.ControlMessage m = this.<a class="code" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5" title="The last PBX control message sent to us (waiting to be handled)">lastMessageFromPBX</a>;
        String remoteId = m.getVerboseRemote ();

        <span class="comment">/* Can accept only if there is no call in progress.</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( <a class="code" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0" title="The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons...">udpChannel</a>.<a class="code" href="classprotocol_1_1_datagram_channel.html#a221b7dbd0fef9631bb96cff8fc871cb2" title="Returns if there is active remote peer.">hasRemotePeer</a> () ) {
            <span class="keywordflow">return</span> null;
        }
        
        <span class="comment">/* Deserialize remote public key.</span>
<span class="comment">         * Deserialization also verifies the public key against authorized keys.</span>
<span class="comment">         * \see constructor of the PublicEncryptor</span>
<span class="comment">         */</span>
        <a class="code" href="classcrypto_1_1_public_encryptor.html" title="Implements public part of the asymmetric cipher (with public key) used to send encrypted local secret...">PublicEncryptor</a> pubKey = null;
        
        <span class="keywordflow">if</span> ( m.secret != null ) 
        {
            pubKey = <span class="keyword">new</span> <a class="code" href="classcrypto_1_1_public_encryptor.html" title="Implements public part of the asymmetric cipher (with public key) used to send encrypted local secret...">PublicEncryptor</a>( m.secret, m.peerUserId );
            <span class="keywordflow">if</span> ( ! pubKey.<a class="code" href="classcrypto_1_1_public_encryptor.html#aed1f1bdf60dd9fd2122b822ef38a0e11" title="Returns if cipher is properly initialized.">isActive</a> () ) {
                pubKey = null;
            }
        }

        <span class="keywordflow">if</span> ( silent ) {
            <span class="keywordflow">return</span> pubKey;
        }
        
        <span class="comment">/* If not silent, be loud...</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( pubKey != null &amp;&amp; pubKey.<a class="code" href="classcrypto_1_1_public_encryptor.html#aed1f1bdf60dd9fd2122b822ef38a0e11" title="Returns if cipher is properly initialized.">isActive</a> () )
        {
            <span class="keywordflow">if</span> ( ! pubKey.<a class="code" href="classcrypto_1_1_public_encryptor.html#aa74763a92a6776fe395082648042ba4a" title="Returns if public key was verified.">isVerified</a> () ) 
            {
                <a class="code" href="class_crypto_phone_app.html#abb25aaecf1b0f6f47afd12b38bf40f3b">securityState</a>.<a class="code" href="classui_1_1_j_sec_state.html#a6e54470d9ef9f2d8128565482f15c4f2" title="Stes new security state.">setState</a>( <a class="code" href="classui_1_1_j_sec_state.html" title="Image indicating security state (unsecured/secured-unverified/secured-trusted).">JSecState</a>.<a class="code" href="classui_1_1_j_sec_state.html#af9971acc8fd5f2ffaf51b61eac45883c" title="Possible security states.">State</a>.UNVERIFIED );
                <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logError&quot;</span>, <span class="stringliteral">&quot;Invite from &quot;</span> + remoteId
                        + <span class="stringliteral">&quot; could not be authenticated.&quot;</span> );
            }
            <span class="keywordflow">else</span> 
            {
                <a class="code" href="class_crypto_phone_app.html#abb25aaecf1b0f6f47afd12b38bf40f3b">securityState</a>.<a class="code" href="classui_1_1_j_sec_state.html#a6e54470d9ef9f2d8128565482f15c4f2" title="Stes new security state.">setState</a>( <a class="code" href="classui_1_1_j_sec_state.html" title="Image indicating security state (unsecured/secured-unverified/secured-trusted).">JSecState</a>.<a class="code" href="classui_1_1_j_sec_state.html#af9971acc8fd5f2ffaf51b61eac45883c" title="Possible security states.">State</a>.VERIFIED );
                <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logOk&quot;</span>, <span class="stringliteral">&quot;Invite from &quot;</span> + remoteId
                        + <span class="stringliteral">&quot; authenticated with public key &#39;&quot;</span> 
                        + pubKey.<a class="code" href="classcrypto_1_1_public_encryptor.html#a1810fce92903f30a71a66a2f044bc879" title="Returns if name of the verificator from authorized keys that verified this public key...">getVerificatorName</a> () + <span class="stringliteral">&quot;&#39;&quot;</span> );
            }
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_crypto_phone_app.html#abb25aaecf1b0f6f47afd12b38bf40f3b">securityState</a>.<a class="code" href="classui_1_1_j_sec_state.html#a6e54470d9ef9f2d8128565482f15c4f2" title="Stes new security state.">setState</a>( <a class="code" href="classui_1_1_j_sec_state.html" title="Image indicating security state (unsecured/secured-unverified/secured-trusted).">JSecState</a>.<a class="code" href="classui_1_1_j_sec_state.html#af9971acc8fd5f2ffaf51b61eac45883c" title="Possible security states.">State</a>.UNSECURED );
            <a class="code" href="class_crypto_phone_app.html#a365d37a3730d1a2b3276f2b0bb4f5b30" title="Reports a system message to log.">report</a>( <span class="stringliteral">&quot;logError&quot;</span>, <span class="stringliteral">&quot;The call will be without encryption.&quot;</span> );
        }

        <span class="keywordflow">return</span> pubKey;
    }
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a4ff8f52c4cd52c0786221b1af5969ae7"></a><!-- doxytag: member="CryptoPhoneApp::appTitle" ref="a4ff8f52c4cd52c0786221b1af5969ae7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final String <a class="el" href="class_crypto_phone_app.html#a4ff8f52c4cd52c0786221b1af5969ae7">CryptoPhoneApp.appTitle</a> = &quot;IP1-10: Kryptofon&quot;<code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The common application title prefix. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00077">77</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01857">acceptIncomingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01624">deferredOnAccept()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01501">deferredOnInvite()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00901">setPbxStatus()</a>.</p>

</div>
</div>
<a class="anchor" id="a7eaf4402df3b1abb3bde0c0cef34204b"></a><!-- doxytag: member="CryptoPhoneApp::audioInterface" ref="a7eaf4402df3b1abb3bde0c0cef34204b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interfaceaudio_1_1_audio_interface.html">AudioInterface</a> <a class="el" href="class_crypto_phone_app.html#a7eaf4402df3b1abb3bde0c0cef34204b">CryptoPhoneApp.audioInterface</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The instance of the Audio interface used to access microphone and speaker. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00141">141</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01857">acceptIncomingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01624">deferredOnAccept()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01714">deferredOnBye()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01501">deferredOnInvite()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01554">deferredOnRing()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00532">startKryptofonServices()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00558">stopKryptofonServices()</a>.</p>

</div>
</div>
<a class="anchor" id="a5302f5b8ebbcff39390cbbb21e2b06b9"></a><!-- doxytag: member="CryptoPhoneApp::autoAnswer" ref="a5302f5b8ebbcff39390cbbb21e2b06b9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">JCheckBox <a class="el" href="class_crypto_phone_app.html#a5302f5b8ebbcff39390cbbb21e2b06b9">CryptoPhoneApp.autoAnswer</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00188">188</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00478">createEventListeners()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01501">deferredOnInvite()</a>.</p>

</div>
</div>
<a class="anchor" id="a275596983900ad20ee6c1ba4387de934"></a><!-- doxytag: member="CryptoPhoneApp::currentInvite" ref="a275596983900ad20ee6c1ba4387de934" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String <a class="el" href="class_crypto_phone_app.html#a275596983900ad20ee6c1ba4387de934">CryptoPhoneApp.currentInvite</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The remote peer (its user id) that we are currently inviting to a call. </p>
<p>Null if we are not inviting anyone. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00157">157</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01624">deferredOnAccept()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01714">deferredOnBye()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01554">deferredOnRing()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00738">mainTimerEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="a8a6cb43a9dcb7a42a85b92b9cae15420"></a><!-- doxytag: member="CryptoPhoneApp::defaultInputMsg" ref="a8a6cb43a9dcb7a42a85b92b9cae15420" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final String <a class="el" href="class_crypto_phone_app.html#a8a6cb43a9dcb7a42a85b92b9cae15420">CryptoPhoneApp.defaultInputMsg</a> = &quot;&lt;type in message, command or command arguments here&gt;&quot;<code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The initial message content of the input text message field. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00082">82</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00662">keyPressed()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01054">parseInputMessage()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00589">sendButton_Clicked()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01029">tokenizeInputMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a573f49c1366d9a92b77e39266a85a771"></a><!-- doxytag: member="CryptoPhoneApp::defaultLogAreaDumpFilename" ref="a573f49c1366d9a92b77e39266a85a771" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final String <a class="el" href="class_crypto_phone_app.html#a573f49c1366d9a92b77e39266a85a771">CryptoPhoneApp.defaultLogAreaDumpFilename</a> = &quot;mykf-log-area-&quot;<code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The default file name where to dump log area contents with <code>:dump</code> command. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00089">89</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01950">dumpLogArea()</a>.</p>

</div>
</div>
<a class="anchor" id="a4f9c849a4193e21cd8414e4ada971000"></a><!-- doxytag: member="CryptoPhoneApp::dialButton" ref="a4f9c849a4193e21cd8414e4ada971000" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classui_1_1_j_image_button.html">JImageButton</a> <a class="el" href="class_crypto_phone_app.html#a4f9c849a4193e21cd8414e4ada971000">CryptoPhoneApp.dialButton</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00181">181</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00703">actionPerformed()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00478">createEventListeners()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00376">createLayout()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>.</p>

</div>
</div>
<a class="anchor" id="ac01e5b11a36144035b25200bbc1fab61"></a><!-- doxytag: member="CryptoPhoneApp::hangupButton" ref="ac01e5b11a36144035b25200bbc1fab61" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classui_1_1_j_image_button.html">JImageButton</a> <a class="el" href="class_crypto_phone_app.html#ac01e5b11a36144035b25200bbc1fab61">CryptoPhoneApp.hangupButton</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00183">183</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00703">actionPerformed()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00478">createEventListeners()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00376">createLayout()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a04c29b8a2c04bd8bfdaefd118cdba087"></a><!-- doxytag: member="CryptoPhoneApp::idLabel" ref="a04c29b8a2c04bd8bfdaefd118cdba087" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">JLabel <a class="el" href="class_crypto_phone_app.html#a04c29b8a2c04bd8bfdaefd118cdba087">CryptoPhoneApp.idLabel</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00186">186</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00376">createLayout()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>.</p>

</div>
</div>
<a class="anchor" id="acb3acad1016510c342c2756d038852c0"></a><!-- doxytag: member="CryptoPhoneApp::imsgLabel" ref="acb3acad1016510c342c2756d038852c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">JLabel <a class="el" href="class_crypto_phone_app.html#acb3acad1016510c342c2756d038852c0">CryptoPhoneApp.imsgLabel</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00184">184</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00376">createLayout()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a0343292324ffc9bb0702e0449b35b691"></a><!-- doxytag: member="CryptoPhoneApp::inputMsg" ref="a0343292324ffc9bb0702e0449b35b691" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">JTextField <a class="el" href="class_crypto_phone_app.html#a0343292324ffc9bb0702e0449b35b691">CryptoPhoneApp.inputMsg</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00185">185</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00478">createEventListeners()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00376">createLayout()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00662">keyPressed()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01054">parseInputMessage()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00589">sendButton_Clicked()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01121">sendInstantMessage()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01029">tokenizeInputMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="ab791babb2bcfea431164e9ca91cb496c"></a><!-- doxytag: member="CryptoPhoneApp::inviteTimeout" ref="ab791babb2bcfea431164e9ca91cb496c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_crypto_phone_app.html#ab791babb2bcfea431164e9ca91cb496c">CryptoPhoneApp.inviteTimeout</a> = -1<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer used to detect unresolved invite (i.e. </p>
<p>invite to non-existing peer). Value -1 means 'disabled'. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00163">163</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01624">deferredOnAccept()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01714">deferredOnBye()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01554">deferredOnRing()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00738">mainTimerEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="a8f8600b37452eafeb3fddf841a52f8b5"></a><!-- doxytag: member="CryptoPhoneApp::lastMessageFromPBX" ref="a8f8600b37452eafeb3fddf841a52f8b5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PBXClient.ControlMessage <a class="el" href="class_crypto_phone_app.html#a8f8600b37452eafeb3fddf841a52f8b5">CryptoPhoneApp.lastMessageFromPBX</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The last PBX control message sent to us (waiting to be handled) </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00146">146</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01857">acceptIncomingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01624">deferredOnAccept()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01714">deferredOnBye()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01501">deferredOnInvite()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00609">dialButton_Clicked()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00624">secureDialButton_Clicked()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01775">tryToVerifyInvitingCall()</a>.</p>

</div>
</div>
<a class="anchor" id="a4c28f027fd2c4797c024ac4f2bf38104"></a><!-- doxytag: member="CryptoPhoneApp::listPeersButton" ref="a4c28f027fd2c4797c024ac4f2bf38104" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classui_1_1_j_image_button.html">JImageButton</a> <a class="el" href="class_crypto_phone_app.html#a4c28f027fd2c4797c024ac4f2bf38104">CryptoPhoneApp.listPeersButton</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00180">180</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00703">actionPerformed()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00478">createEventListeners()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00376">createLayout()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a46bae86a63b1548d96e5218f369713f6"></a><!-- doxytag: member="CryptoPhoneApp::localUdpPort" ref="a46bae86a63b1548d96e5218f369713f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_crypto_phone_app.html#a46bae86a63b1548d96e5218f369713f6">CryptoPhoneApp.localUdpPort</a> = 47000<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The default local UDP port. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00130">130</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00532">startKryptofonServices()</a>.</p>

</div>
</div>
<a class="anchor" id="aa3da814a861bc895c842f67845ce7c8c"></a><!-- doxytag: member="CryptoPhoneApp::logArea" ref="aa3da814a861bc895c842f67845ce7c8c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">JEditorPane <a class="el" href="class_crypto_phone_app.html#aa3da814a861bc895c842f67845ce7c8c">CryptoPhoneApp.logArea</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The log area formatted in HTML. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00174">174</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l02031">clearLogArea()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00478">createEventListeners()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00376">createLayout()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01950">dumpLogArea()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00833">logMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a790ad94f30f231bd6bcfed75b2836ad2"></a><!-- doxytag: member="CryptoPhoneApp::mainTimer" ref="a790ad94f30f231bd6bcfed75b2836ad2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Timer <a class="el" href="class_crypto_phone_app.html#a790ad94f30f231bd6bcfed75b2836ad2">CryptoPhoneApp.mainTimer</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Main timer (elapses every 1000 ms) </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00114">114</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00703">actionPerformed()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>.</p>

</div>
</div>
<a class="anchor" id="aab94ceafb0b41e812419d2ef860b15da"></a><!-- doxytag: member="CryptoPhoneApp::monitorIfPeerIsSendingVoice" ref="aab94ceafb0b41e812419d2ef860b15da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean <a class="el" href="class_crypto_phone_app.html#aab94ceafb0b41e812419d2ef860b15da">CryptoPhoneApp.monitorIfPeerIsSendingVoice</a> = false<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Indicates whether to monitor if peer is sending voice PDUs to us. </p>
<p>Should be set to 'true' always when set call established. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00169">169</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01857">acceptIncomingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01624">deferredOnAccept()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00738">mainTimerEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="a9ab2a4d37cf0042fdcd8c846546185bf"></a><!-- doxytag: member="CryptoPhoneApp::pbxChannel" ref="a9ab2a4d37cf0042fdcd8c846546185bf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classpbx_1_1_p_b_x_client.html">PBXClient</a> <a class="el" href="class_crypto_phone_app.html#a9ab2a4d37cf0042fdcd8c846546185bf">CryptoPhoneApp.pbxChannel</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The instance of PBX client connected to remote chat server. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00104">104</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01857">acceptIncomingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01501">deferredOnInvite()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00647">formWindowClosing()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00738">mainTimerEvent()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01054">parseInputMessage()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01121">sendInstantMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a92d666e527bb56bc298a903e12f8069e"></a><!-- doxytag: member="CryptoPhoneApp::pbxChannelStatus" ref="a92d666e527bb56bc298a903e12f8069e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String <a class="el" href="class_crypto_phone_app.html#a92d666e527bb56bc298a903e12f8069e">CryptoPhoneApp.pbxChannelStatus</a> = &quot;&quot;<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The last status message of the PBX channel (posted by the <a class="el" href="class_crypto_phone_app.html#a3344f60177a1feeabca118383244cb53" title="Updates status message by updating window title.">setPbxStatus()</a>). </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00109">109</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01714">deferredOnBye()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00901">setPbxStatus()</a>.</p>

</div>
</div>
<a class="anchor" id="a35e52a134d8ccabb268198f9d6af6f88"></a><!-- doxytag: member="CryptoPhoneApp::reconnectRetryCount" ref="a35e52a134d8ccabb268198f9d6af6f88" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_crypto_phone_app.html#a35e52a134d8ccabb268198f9d6af6f88">CryptoPhoneApp.reconnectRetryCount</a> = 0<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retry counter of number of failed reconnecting attempts. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00125">125</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00738">mainTimerEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="a2cd1707c917afbfad5a75482a22670b5"></a><!-- doxytag: member="CryptoPhoneApp::reconnectTimeout" ref="a2cd1707c917afbfad5a75482a22670b5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_crypto_phone_app.html#a2cd1707c917afbfad5a75482a22670b5">CryptoPhoneApp.reconnectTimeout</a> = -1<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The reconnect delay timer (for timing delay between two reconnections). </p>
<p>Value -1 means 'disabled'. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00120">120</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00738">mainTimerEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="af912ec478a2b110219b8bae631f8f84c"></a><!-- doxytag: member="CryptoPhoneApp::remotePublicKey" ref="af912ec478a2b110219b8bae631f8f84c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcrypto_1_1_public_encryptor.html">PublicEncryptor</a> <a class="el" href="class_crypto_phone_app.html#af912ec478a2b110219b8bae631f8f84c">CryptoPhoneApp.remotePublicKey</a> = null<code> [package]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The last public key received from remote peer. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00151">151</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01857">acceptIncomingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01714">deferredOnBye()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01554">deferredOnRing()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>.</p>

</div>
</div>
<a class="anchor" id="a70d95304c59a86fd1eed973e295b2928"></a><!-- doxytag: member="CryptoPhoneApp::secureDialButton" ref="a70d95304c59a86fd1eed973e295b2928" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classui_1_1_j_image_button.html">JImageButton</a> <a class="el" href="class_crypto_phone_app.html#a70d95304c59a86fd1eed973e295b2928">CryptoPhoneApp.secureDialButton</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00182">182</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00703">actionPerformed()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00478">createEventListeners()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00376">createLayout()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>.</p>

</div>
</div>
<a class="anchor" id="abb25aaecf1b0f6f47afd12b38bf40f3b"></a><!-- doxytag: member="CryptoPhoneApp::securityState" ref="abb25aaecf1b0f6f47afd12b38bf40f3b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classui_1_1_j_sec_state.html">JSecState</a> <a class="el" href="class_crypto_phone_app.html#abb25aaecf1b0f6f47afd12b38bf40f3b">CryptoPhoneApp.securityState</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00178">178</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01857">acceptIncomingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00376">createLayout()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01624">deferredOnAccept()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01714">deferredOnBye()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01775">tryToVerifyInvitingCall()</a>.</p>

</div>
</div>
<a class="anchor" id="a1cf30ea362184c2bd05a4c3e5129fee3"></a><!-- doxytag: member="CryptoPhoneApp::sendButton" ref="a1cf30ea362184c2bd05a4c3e5129fee3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classui_1_1_j_image_button.html">JImageButton</a> <a class="el" href="class_crypto_phone_app.html#a1cf30ea362184c2bd05a4c3e5129fee3">CryptoPhoneApp.sendButton</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00179">179</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00703">actionPerformed()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00478">createEventListeners()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00376">createLayout()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a68fa32f8d1659681f4a2a262f2a110c2"></a><!-- doxytag: member="CryptoPhoneApp::serialVersionUID" ref="a68fa32f8d1659681f4a2a262f2a110c2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final long <a class="el" href="class_crypto_phone_app.html#a68fa32f8d1659681f4a2a262f2a110c2">CryptoPhoneApp.serialVersionUID</a> = -1830703904673318918L<code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements java.io.Serializable interface. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00072">72</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

</div>
</div>
<a class="anchor" id="a6db74f3877792c5613221defef4e4447"></a><!-- doxytag: member="CryptoPhoneApp::serverName" ref="a6db74f3877792c5613221defef4e4447" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String <a class="el" href="class_crypto_phone_app.html#a6db74f3877792c5613221defef4e4447">CryptoPhoneApp.serverName</a> = &quot;atlas.dsv.su.se&quot;<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The host name or IP address of the remote chat server. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00094">94</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00738">mainTimerEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="afce08401731d533ad12121ef22fd1b28"></a><!-- doxytag: member="CryptoPhoneApp::serverPort" ref="afce08401731d533ad12121ef22fd1b28" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_crypto_phone_app.html#afce08401731d533ad12121ef22fd1b28">CryptoPhoneApp.serverPort</a> = 9494<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The TCP port where to connect to on remote chat server. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00099">99</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00738">mainTimerEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="a5d2d026ee9a1963f17e68b3b9c4edda0"></a><!-- doxytag: member="CryptoPhoneApp::udpChannel" ref="a5d2d026ee9a1963f17e68b3b9c4edda0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classprotocol_1_1_datagram_channel.html">DatagramChannel</a> <a class="el" href="class_crypto_phone_app.html#a5d2d026ee9a1963f17e68b3b9c4edda0">CryptoPhoneApp.udpChannel</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The instance of the UDP transceiver responsible for peer-to-peer communication between two Kryptofons. </p>

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00136">136</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01857">acceptIncomingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01624">deferredOnAccept()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01714">deferredOnBye()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01750">deferredOnInstantMessage()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01501">deferredOnInvite()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01554">deferredOnRing()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00738">mainTimerEvent()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01121">sendInstantMessage()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00532">startKryptofonServices()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00558">stopKryptofonServices()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01775">tryToVerifyInvitingCall()</a>.</p>

</div>
</div>
<a class="anchor" id="a37838c88439d3a27e8a50e7f00e47337"></a><!-- doxytag: member="CryptoPhoneApp::userId" ref="a37838c88439d3a27e8a50e7f00e47337" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">JTextField <a class="el" href="class_crypto_phone_app.html#a37838c88439d3a27e8a50e7f00e47337">CryptoPhoneApp.userId</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_crypto_phone_app_8java_source.html#l00187">187</a> of file <a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00478">createEventListeners()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00376">createLayout()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00195">CryptoPhoneApp()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01714">deferredOnBye()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01501">deferredOnInvite()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01554">deferredOnRing()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">executeCommand()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00872">getUserId()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00662">keyPressed()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00532">startKryptofonServices()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="_crypto_phone_app_8java_source.html">CryptoPhoneApp.java</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Dec 16 2010 14:44:43 for VoIP Kryptofon by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
