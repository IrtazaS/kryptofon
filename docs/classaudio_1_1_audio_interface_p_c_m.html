<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>VoIP Kryptofon: audio.AudioInterfacePCM Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="namespaceaudio.html">audio</a>      </li>
      <li><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html">AudioInterfacePCM</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a>  </div>
  <div class="headertitle">
<h1>audio.AudioInterfacePCM Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="audio::AudioInterfacePCM" --><!-- doxytag: inherits="audio::AudioInterface" -->
<p>Implements the audio interface for 16-bit signed linear audio (PCM_SIGNED).  
<a href="#_details">More...</a></p>
<!-- startSectionHeader --><div class="dynheader">
Inheritance diagram for audio.AudioInterfacePCM:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="classaudio_1_1_audio_interface_p_c_m__inherit__graph.png" border="0" usemap="#audio_8_audio_interface_p_c_m_inherit__map" alt="Inheritance graph"/></div>
<map name="audio_8_audio_interface_p_c_m_inherit__map" id="audio_8_audio_interface_p_c_m_inherit__map">
<area shape="rect" id="node2" href="interfaceaudio_1_1_audio_interface.html" title="The abstract audio interface." alt="" coords="43,6,213,317"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center><!-- endSectionContent --></div>
<!-- startSectionHeader --><div class="dynheader">
Collaboration diagram for audio.AudioInterfacePCM:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="classaudio_1_1_audio_interface_p_c_m__coll__graph.png" border="0" usemap="#audio_8_audio_interface_p_c_m_coll__map" alt="Collaboration graph"/></div>
<map name="audio_8_audio_interface_p_c_m_coll__map" id="audio_8_audio_interface_p_c_m_coll__map">
<area shape="rect" id="node2" href="interfaceaudio_1_1_audio_interface.html" title="The abstract audio interface." alt="" coords="5,6,176,317"/><area shape="rect" id="node10" href="classaudio_1_1_audio_buffer.html" title="Encapsulates the concept of an audio buffer with a time&#45;stamp." alt="" coords="592,49,715,273"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center><!-- endSectionContent --></div>

<p><a href="classaudio_1_1_audio_interface_p_c_m-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a56aa857ea0c1d4be48717f998d1156aa">AudioInterfacePCM</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html" title="Implements the audio interface for 16-bit signed linear audio (PCM_SIGNED).">AudioInterfacePCM</a> object.  <a href="#a56aa857ea0c1d4be48717f998d1156aa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a6511c3f041ee369c2ff5dbbb3c0f20fa">getSampleSize</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns preferred the minimum sample size for use in creating buffers etc.  <a href="#a6511c3f041ee369c2ff5dbbb3c0f20fa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a7b297d6c0a97dc4db4b9b54737fd9213">getVoicePduSubclass</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns our VoicePDU format.  <a href="#a7b297d6c0a97dc4db4b9b54737fd9213"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#ae1aa3c929021f80c6c12c11d3f8b30c1">setAudioSender</a> (AudioInterface.Packetizer as)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the active audio sender for the recorder.  <a href="#ae1aa3c929021f80c6c12c11d3f8b30c1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a491f056f2113ce299bca699c201f8ed6">cleanUp</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops threads and cleans-up the instance.  <a href="#a491f056f2113ce299bca699c201f8ed6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a4e26b1c92ecfc4232464caf8ff638f32">writeDirectly</a> (byte[] buff)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes directly to source line without buffering.  <a href="#a4e26b1c92ecfc4232464caf8ff638f32"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aafdbdd4c285fa683f67c9ed60ec5dabe">writeBuffered</a> (byte[] buff, long timestamp)  throws IOException      </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enqueue packet for playing into de-jitter buffer.  <a href="#aafdbdd4c285fa683f67c9ed60ec5dabe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a65081720e7319478e620ac5446b09451">readWithTimestamp</a> (byte[] buff)  throws IOException     </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from the Microphone, into the buffer provided, but <em>only</em> filling getSampSize() bytes.  <a href="#a65081720e7319478e620ac5446b09451"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a778187003c651722047d6b3bd48cbfed">stopRecording</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the audio recording worker thread.  <a href="#a778187003c651722047d6b3bd48cbfed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#af3478bd4217c8845f4692ab71a29266d">startRecording</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the audio recording worker thread.  <a href="#af3478bd4217c8845f4692ab71a29266d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#ab97ecaa78c0daa30e3df50dd79045991">startPlay</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the audio output worker thread.  <a href="#ab97ecaa78c0daa30e3df50dd79045991"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a81a17318f86b97abdc2fbe702db26383">stopPlay</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the audio output worker thread.  <a href="#a81a17318f86b97abdc2fbe702db26383"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="interfaceaudio_1_1_audio_interface.html">AudioInterface</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a1787c404c639dffc8695153ac5f6a7cf">getByFormat</a> (Integer format)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets audio interface by VoicePDU format.  <a href="#a1787c404c639dffc8695153ac5f6a7cf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#ac6611562b260b32888ff27a94f17a961">startRinging</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts ringing signal.  <a href="#ac6611562b260b32888ff27a94f17a961"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#ac15c22cd579f2fdae4ba11c13831b03d">stopRinging</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops ringing singnal.  <a href="#ac15c22cd579f2fdae4ba11c13831b03d"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#af4c70e16592cb735387ec204d07e96f7">audioPlayerWorker</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes frames to audio output i.e.  <a href="#af4c70e16592cb735387ec204d07e96f7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a977fdebe2b72bb6ec25cb8378f903be6">writeBuffersToAudioOutput</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes de-jittered audio frames to audio output.  <a href="#a977fdebe2b72bb6ec25cb8378f903be6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a6d16c8a01c7b39a038fc7679d83513b4">concealMissingDataForAudioOutput</a> (int n)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Conceals missing data in the audio output buffer by averaging from samples taken from the the previous and next buffer.  <a href="#a6d16c8a01c7b39a038fc7679d83513b4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a5098fb166e4eb44c6f56d3b54ab9ab96">pduSenderWorker</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends audio frames to UDP channel at regular intervals (ticks)  <a href="#a5098fb166e4eb44c6f56d3b54ab9ab96"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a8e781a0464f91108b2c5d1a07499ddd0">sendAudioFrame</a> (long set)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called every FRAMEINTERVAL ms to send audio frame.  <a href="#a8e781a0464f91108b2c5d1a07499ddd0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a81dae9b413d98da0ab0cbaebb1291c51">micRecorderWorker</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Records audio samples from the microphone.  <a href="#a81dae9b413d98da0ab0cbaebb1291c51"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aabf41ffe00dd21f97d37526fc3837e23">micDataRead</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called from micRecorder to record audio samples from microphone.  <a href="#aabf41ffe00dd21f97d37526fc3837e23"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a7119d7c6a595537f2094c0ef39cbef1c">resample</a> (byte[] src, byte[] dest)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple PCM down sampler.  <a href="#a7119d7c6a595537f2094c0ef39cbef1c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a1d44561b30ed5dd9c289ad5fe78adc35">ringerWorker</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes ring signal samples to audio output.  <a href="#a1d44561b30ed5dd9c289ad5fe78adc35"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a18602d498c9fd7285ff289ecdb604368">writeDirectIfAvail</a> (byte[] samples)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes audio samples to audio output directly (without using jitter buffer).  <a href="#a18602d498c9fd7285ff289ecdb604368"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a16075c43def415c5c59741eab8e0e0a4">initializeRingerSamples</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes ringer samples (ring singnal and silecce) samples.  <a href="#a16075c43def415c5c59741eab8e0e0a4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#ad9c95389ed7afe4515a3b4e7ea02de7e">getAudioOut</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get audio output.  <a href="#ad9c95389ed7afe4515a3b4e7ea02de7e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a5161f74987d2e3fa1da2fb8ca81853ef">getAudioIn</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns audio input (target data line)  <a href="#a5161f74987d2e3fa1da2fb8ca81853ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DataLine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a3585fdd7742df07c6edfb105b8b1f3ea">findDataLineByPref</a> (String pref, AudioFormat af, String name, int sbuffsz, Class&lt;?&gt; lineClass, String debugInfo)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches for data line of either sort (source/targe) based on the pref string.  <a href="#a3585fdd7742df07c6edfb105b8b1f3ea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TargetDataLine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a14a3c08fbb6d2d67a6dac13282d4d73a">fintTargetDataLineByPref</a> (String pref, AudioFormat af, String name, int sbuffsz)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches for target data line according to preferences.  <a href="#a14a3c08fbb6d2d67a6dac13282d4d73a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SourceDataLine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#adafcdcc87611a1de68e4f8acf08375a7">findSourceDataLineByPref</a> (String pref, AudioFormat af, String name, int sbuffsz)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches for source data line according to preferences.  <a href="#adafcdcc87611a1de68e4f8acf08375a7"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a9cacb6cbc8a5e809dd66526d55c25fe9">propertyStereoRec</a> = false</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stereo recording.  <a href="#a9cacb6cbc8a5e809dd66526d55c25fe9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a8985a34cd10fe8c779ccb11fc5506433">propertyBigBuff</a> = false</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Big buffers.  <a href="#a8985a34cd10fe8c779ccb11fc5506433"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aa0e89b3cb9891d3450057cc0757b928f">propertyInputDeviceName</a> = null</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Input device name.  <a href="#aa0e89b3cb9891d3450057cc0757b928f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a09f053105d729955ad30dc58e2b9ba6a">propertyOutputDeviceName</a> = null</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Output device name.  <a href="#a09f053105d729955ad30dc58e2b9ba6a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">AudioFormat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#adc0d0060e3438e565f444932f65f3a5c">mono8k</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">AudioFormat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a33fe0388f112281a50c29dd64997b168">stereo8k</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">AudioFormat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#ab9e7049323e1e82296172246d18faa79">mono44k</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TargetDataLine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile Thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a680052f150cc3b669a8e3e69d0c57a4c">audioSenderThread</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile Thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a9959ec3aa6a4bbb9657230992cd1c530">micRecorderThread</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="interfaceaudio_1_1_audio_interface_1_1_packetizer.html">Packetizer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a0af9cd70d7a4bf6bde276da5cd2ce176">audioSender</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classaudio_1_1_audio_buffer.html">AudioBuffer</a>[]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a925b1f60214a2d854c8b4ea88c2b6a05">recordBuffer</a> = new <a class="el" href="classaudio_1_1_audio_buffer.html">AudioBuffer</a>[ <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aaf3425e0a5f95a6946afa900851b21f2">FRAME_COUNT</a> ]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a5b4217c3bd882244f8ac04b44c33efeb">micBufPut</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#abde473853cc1611badc798569426b5e3">micBufGet</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aa1b9cef4a2e6598565a6c219c605d75f">lastMicTimestamp</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SourceDataLine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile Thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#adde8057bc7b1ec00549c7a26dd5bd53d">audioPlayerThread</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classaudio_1_1_audio_buffer.html">AudioBuffer</a>[]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">playBuffer</a> = new <a class="el" href="classaudio_1_1_audio_buffer.html">AudioBuffer</a>[ <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aaf3425e0a5f95a6946afa900851b21f2">FRAME_COUNT</a> + <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aaf3425e0a5f95a6946afa900851b21f2">FRAME_COUNT</a> ]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#af8887492c70b8f93c44b5735d23e1df8">jitBufPut</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aee33962ee7ebadc333180fe0018bfd1a">jitBufGet</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a091cd2a0d6fbc3d84c45f1efcbaec8a0">jitBufFudge</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a4df964cb5bff23964de4930ce3a91479">jitBufFirst</a> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aa1b3c82ecfec3f3649c0ef7be46930ae">playerIsEnabled</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a45f2f4a950843d72dff896e88bcb0cdb">deltaTimePlayerMinusMic</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aa27a3b10a8d5730375706bb7c796a1f9">callLength</a> = 0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Measured call length in milliseconds.  <a href="#aa27a3b10a8d5730375706bb7c796a1f9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile Thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a330d678330903d0b84ea92d8ffacdd41">ringerThread</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">byte[]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#ac2cebb2c236a76fa81365b6d6f3edc7c">ringSamples</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">byte[]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#ac757be02435f4d7ced0f50ed905ef1d1">silenceSamples</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a444e7e71728fe7432a0b126bdbc14c7d">providingRingBack</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a8421933579303cade8ee11d8a27c7e1c">ringTimer</a> = -1</td></tr>
<tr><td colspan="2"><h2><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aaf3425e0a5f95a6946afa900851b21f2">FRAME_COUNT</a> = 10</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Audio buffering depth in number of frames.  <a href="#aaf3425e0a5f95a6946afa900851b21f2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#ae35a6c317142598025b4a0948e246288">LLBS</a> = 6</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Low-level water mark used for de-jittering.  <a href="#ae35a6c317142598025b4a0948e246288"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec">FRAME_INTERVAL</a> = 20</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Frame interval in milliseconds.  <a href="#a0d239e4b6a4d296d36b61e1045001dec"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Implements the audio interface for 16-bit signed linear audio (PCM_SIGNED). </p>
<p>It also provides support for CODECs that can convert to and from Signed LIN16.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Mikica B Kocic, based on <em>hevaily</em> modified and re-documented Tim Panton's (<a href="mailto:thp@westhawk.co.uk">thp@westhawk.co.uk</a>) code from org.asteriskjava.iax.audio.javasound.Audio8k </dd></dl>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00027">27</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a56aa857ea0c1d4be48717f998d1156aa"></a><!-- doxytag: member="audio::AudioInterfacePCM::AudioInterfacePCM" ref="a56aa857ea0c1d4be48717f998d1156aa" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">audio.AudioInterfacePCM.AudioInterfacePCM </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor for the <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html" title="Implements the audio interface for 16-bit signed linear audio (PCM_SIGNED).">AudioInterfacePCM</a> object. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00112">112</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00082">audio.AudioInterfacePCM.audioPlayerThread</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00308">audio.AudioInterfacePCM.audioPlayerWorker()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00067">audio.AudioInterfacePCM.audioSenderThread</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00963">audio.AudioInterfacePCM.getAudioIn()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00912">audio.AudioInterfacePCM.getAudioOut()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00206">audio.AudioInterfacePCM.getSampleSize()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00879">audio.AudioInterfacePCM.initializeRingerSamples()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00061">audio.AudioInterfacePCM.mono44k</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00059">audio.AudioInterfacePCM.mono8k</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00561">audio.AudioInterfacePCM.pduSenderWorker()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00100">audio.AudioInterfacePCM.ringerThread</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00819">audio.AudioInterfacePCM.ringerWorker()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00081">audio.AudioInterfacePCM.sourceDataLine</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00060">audio.AudioInterfacePCM.stereo8k</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00066">audio.AudioInterfacePCM.targetDataLine</a>.</p>
<div class="fragment"><pre class="fragment">    {
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#adc0d0060e3438e565f444932f65f3a5c">mono8k</a> = <span class="keyword">new</span> AudioFormat(
                            AudioFormat.Encoding.PCM_SIGNED,
                            8000f, 16, 1, 2, 8000f, <span class="keyword">true</span> );
        
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a33fe0388f112281a50c29dd64997b168">stereo8k</a> = <span class="keyword">new</span> AudioFormat(
                            AudioFormat.Encoding.PCM_SIGNED,
                            8000f, 16, 2, 4, 8000f, <span class="keyword">true</span> );

        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ab9e7049323e1e82296172246d18faa79">mono44k</a> =  <span class="keyword">new</span> AudioFormat(
                            AudioFormat.Encoding.PCM_SIGNED,
                            44100f, 16, 1, 2, 44100f, <span class="keyword">true</span> );

        <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a16075c43def415c5c59741eab8e0e0a4" title="Initializes ringer samples (ring singnal and silecce) samples.">initializeRingerSamples</a> ();
<span class="comment"></span>
<span class="comment">        //////////////////////////////////////////////////////////////////////////////////</span>
<span class="comment"></span>        
        <span class="comment">/*  Initializes source and target data lines used by the instance.</span>
<span class="comment">         */</span>
        <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a5161f74987d2e3fa1da2fb8ca81853ef" title="Returns audio input (target data line)">getAudioIn</a> ();
        <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad9c95389ed7afe4515a3b4e7ea02de7e" title="Get audio output.">getAudioOut</a> ();
<span class="comment"></span>
<span class="comment">        //////////////////////////////////////////////////////////////////////////////////</span>
<span class="comment"></span>        
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a> != null ) 
        {
            Runnable thread = <span class="keyword">new</span> Runnable() {
                <span class="keyword">public</span> <span class="keywordtype">void</span> run () {
                    <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a5098fb166e4eb44c6f56d3b54ab9ab96" title="Sends audio frames to UDP channel at regular intervals (ticks)">pduSenderWorker</a> ();
                }
            };

            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a680052f150cc3b669a8e3e69d0c57a4c">audioSenderThread</a> = <span class="keyword">new</span> Thread( thread, <span class="stringliteral">&quot;Tick-send&quot;</span> );
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a680052f150cc3b669a8e3e69d0c57a4c">audioSenderThread</a>.setDaemon( <span class="keyword">true</span> );
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a680052f150cc3b669a8e3e69d0c57a4c">audioSenderThread</a>.setPriority( Thread.MAX_PRIORITY - 1 );

            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a680052f150cc3b669a8e3e69d0c57a4c">audioSenderThread</a>.start();
        }
<span class="comment"></span>
<span class="comment">        //////////////////////////////////////////////////////////////////////////////////</span>
<span class="comment"></span>        
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> != null ) 
        {
            Runnable thread = <span class="keyword">new</span> Runnable () {
                <span class="keyword">public</span> <span class="keywordtype">void</span> run () {
                    <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#af4c70e16592cb735387ec204d07e96f7" title="Writes frames to audio output i.e.">audioPlayerWorker</a> ();
                }
            };

            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#adde8057bc7b1ec00549c7a26dd5bd53d">audioPlayerThread</a> = <span class="keyword">new</span> Thread( thread, <span class="stringliteral">&quot;Tick-play&quot;</span> );
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#adde8057bc7b1ec00549c7a26dd5bd53d">audioPlayerThread</a>.setDaemon( <span class="keyword">true</span> );
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#adde8057bc7b1ec00549c7a26dd5bd53d">audioPlayerThread</a>.setPriority( Thread.MAX_PRIORITY );

            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#adde8057bc7b1ec00549c7a26dd5bd53d">audioPlayerThread</a>.start();
        }
<span class="comment"></span>
<span class="comment">        //////////////////////////////////////////////////////////////////////////////////</span>
<span class="comment"></span>        
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> != null ) 
        {
            Runnable thread = <span class="keyword">new</span> Runnable () {
                <span class="keyword">public</span> <span class="keywordtype">void</span> run () {
                    <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a1d44561b30ed5dd9c289ad5fe78adc35" title="Writes ring signal samples to audio output.">ringerWorker</a> ();
                }
            };
    
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a330d678330903d0b84ea92d8ffacdd41">ringerThread</a> = <span class="keyword">new</span> Thread( thread, <span class="stringliteral">&quot;Ringer&quot;</span> );
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a330d678330903d0b84ea92d8ffacdd41">ringerThread</a>.setDaemon( <span class="keyword">true</span> );
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a330d678330903d0b84ea92d8ffacdd41">ringerThread</a>.setPriority( Thread.MIN_PRIORITY );

            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a330d678330903d0b84ea92d8ffacdd41">ringerThread</a>.start ();
        }
<span class="comment"></span>
<span class="comment">        //////////////////////////////////////////////////////////////////////////////////</span>
<span class="comment"></span>
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> == null ) {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.attn( <span class="stringliteral">&quot;Failed to open audio output device (speaker or similar)&quot;</span> );
        }

        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a> == null ) {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.attn( <span class="stringliteral">&quot;Failed to open audio capture device (microphone or similar)&quot;</span> );
        }
        
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.trace( <span class="stringliteral">&quot;Created 8kHz 16-bit PCM audio interface; Sample size = &quot;</span> 
                + this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a6511c3f041ee369c2ff5dbbb3c0f20fa" title="Returns preferred the minimum sample size for use in creating buffers etc.">getSampleSize</a> () + <span class="stringliteral">&quot; octets&quot;</span> );
    }
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="af4c70e16592cb735387ec204d07e96f7"></a><!-- doxytag: member="audio::AudioInterfacePCM::audioPlayerWorker" ref="af4c70e16592cb735387ec204d07e96f7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.audioPlayerWorker </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Writes frames to audio output i.e. </p>
<p>source data line </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00308">308</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00082">audio.AudioInterfacePCM.audioPlayerThread</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00039">audio.AudioInterfacePCM.FRAME_INTERVAL</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00081">audio.AudioInterfacePCM.sourceDataLine</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">audio.AudioInterfacePCM.writeBuffersToAudioOutput()</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00112">audio.AudioInterfacePCM.AudioInterfacePCM()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.trace( <span class="stringliteral">&quot;Thread started&quot;</span> );
        
        <span class="keywordflow">while</span>( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#adde8057bc7b1ec00549c7a26dd5bd53d">audioPlayerThread</a> != null ) 
        {
            <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> == null ) {
                <span class="keywordflow">break</span>;
            }

            <span class="keywordtype">long</span> next = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a977fdebe2b72bb6ec25cb8378f903be6" title="Writes de-jittered audio frames to audio output.">writeBuffersToAudioOutput</a> ();
            
            <span class="keywordflow">if</span> ( next &lt; 1 ) {
                next = <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec" title="Frame interval in milliseconds.">FRAME_INTERVAL</a>;
            }
            
            <span class="keywordflow">try</span> {
                Thread.sleep( next );
            } <span class="keywordflow">catch</span>( Throwable e ) {
                <span class="comment">/* ignored */</span>
            }
        }
        
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.trace( <span class="stringliteral">&quot;Thread completed&quot;</span> );
        
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#adde8057bc7b1ec00549c7a26dd5bd53d">audioPlayerThread</a> = null;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a491f056f2113ce299bca699c201f8ed6"></a><!-- doxytag: member="audio::AudioInterfacePCM::cleanUp" ref="a491f056f2113ce299bca699c201f8ed6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.cleanUp </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stops threads and cleans-up the instance. </p>

<p>Implements <a class="el" href="interfaceaudio_1_1_audio_interface.html#a160540f5ce5ced5cc973c3dc157ece4d">audio.AudioInterface</a>.</p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00236">236</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00082">audio.AudioInterfacePCM.audioPlayerThread</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00067">audio.AudioInterfacePCM.audioSenderThread</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00068">audio.AudioInterfacePCM.micRecorderThread</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00100">audio.AudioInterfacePCM.ringerThread</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00081">audio.AudioInterfacePCM.sourceDataLine</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00066">audio.AudioInterfacePCM.targetDataLine</a>.</p>

<p>Referenced by <a class="el" href="_abstract_c_o_d_e_c_8java_source.html#l00136">audio.AbstractCODEC.cleanUp()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="comment">/* Signal all worker threads to quit</span>
<span class="comment">         */</span>
        Thread spkout  = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#adde8057bc7b1ec00549c7a26dd5bd53d">audioPlayerThread</a>;
        Thread ringer  = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a330d678330903d0b84ea92d8ffacdd41">ringerThread</a>;
        Thread micin   = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a9959ec3aa6a4bbb9657230992cd1c530">micRecorderThread</a>;
        Thread sender  = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a680052f150cc3b669a8e3e69d0c57a4c">audioSenderThread</a>;

        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#adde8057bc7b1ec00549c7a26dd5bd53d">audioPlayerThread</a> = null;
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a330d678330903d0b84ea92d8ffacdd41">ringerThread</a>      = null;
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a9959ec3aa6a4bbb9657230992cd1c530">micRecorderThread</a> = null;
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a680052f150cc3b669a8e3e69d0c57a4c">audioSenderThread</a>   = null;

        <span class="comment">/* Wait for worker threads to complete</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( spkout != null ) {
            <span class="keywordflow">try</span> {
                spkout.interrupt ();
                spkout.join ();
            } <span class="keywordflow">catch</span> ( InterruptedException e ) {
                <span class="comment">/* ignored */</span>
            }
        }

        <span class="keywordflow">if</span> ( ringer != null ) {
            <span class="keywordflow">try</span> {
                ringer.interrupt ();
                ringer.join ();
            } <span class="keywordflow">catch</span> ( InterruptedException e ) {
                <span class="comment">/* ignored */</span>
            }
        }

        <span class="keywordflow">if</span> ( micin != null ) {
            <span class="keywordflow">try</span> {
                micin.interrupt ();
                micin.join ();
            } <span class="keywordflow">catch</span> ( InterruptedException e ) {
                <span class="comment">/* ignored */</span>
            }
        }
        
        <span class="keywordflow">if</span> ( sender != null ) {
            <span class="keywordflow">try</span> {
                sender.interrupt ();
                sender.join ();
            } <span class="keywordflow">catch</span> ( InterruptedException e ) {
                <span class="comment">/* ignored */</span>
            }
        }

        <span class="comment">/* Be nice and close audio data lines</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> != null )
        {
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.close ();
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> = null;
        }
        
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a> != null )
        {
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a>.close ();
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a> = null;
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a6d16c8a01c7b39a038fc7679d83513b4"></a><!-- doxytag: member="audio::AudioInterfacePCM::concealMissingDataForAudioOutput" ref="a6d16c8a01c7b39a038fc7679d83513b4" args="(int n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.concealMissingDataForAudioOutput </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>n</em>&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Conceals missing data in the audio output buffer by averaging from samples taken from the the previous and next buffer. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00490">490</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_buffer_8java_source.html#l00026">audio.AudioBuffer.getByteArray()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00086">audio.AudioInterfacePCM.playBuffer</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">audio.AudioInterfacePCM.writeBuffersToAudioOutput()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        byte[] target = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">playBuffer</a>[n % this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">playBuffer</a>.length].getByteArray();
        byte[] prev = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">playBuffer</a>[ (n - 1) % this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">playBuffer</a>.length].getByteArray();
        byte[] next = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">playBuffer</a>[ (n + 1) % this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">playBuffer</a>.length].getByteArray();
        
        <span class="comment">/*  Creates a packet by averaging the corresponding bytes </span>
<span class="comment">         *  in the surrounding packets hoping that new packet will sound better </span>
<span class="comment">         *  than silence.</span>
<span class="comment">         *  TODO fix for 16-bit samples</span>
<span class="comment">         */</span>
        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; target.length; ++i ) 
        {
            target[i] = (byte) ( 0xFF &amp; ( (prev[ i ] &gt;&gt; 1 ) + ( next[i] &gt;&gt; 1 ) ) );
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a3585fdd7742df07c6edfb105b8b1f3ea"></a><!-- doxytag: member="audio::AudioInterfacePCM::findDataLineByPref" ref="a3585fdd7742df07c6edfb105b8b1f3ea" args="(String pref, AudioFormat af, String name, int sbuffsz, Class&lt;?&gt; lineClass, String debugInfo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataLine audio.AudioInterfacePCM.findDataLineByPref </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>pref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AudioFormat&#160;</td>
          <td class="paramname"> <em>af</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>sbuffsz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Class&lt;?&gt;&#160;</td>
          <td class="paramname"> <em>lineClass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>debugInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Searches for data line of either sort (source/targe) based on the pref string. </p>
<p>Uses type to determine the sort ie Target or Source. debugInfo parameter is only used in debug printouts to set the context. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01035">1035</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01115">audio.AudioInterfacePCM.findSourceDataLineByPref()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01086">audio.AudioInterfacePCM.fintTargetDataLineByPref()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        DataLine line = null;
        DataLine.Info info = <span class="keyword">new</span> DataLine.Info(lineClass, af);
        <span class="keywordflow">try</span> 
        {
            <span class="keywordflow">if</span> ( pref == null ) 
            {
                line = (DataLine) AudioSystem.getLine( info );
            }
            <span class="keywordflow">else</span> 
            {
                Mixer.Info[] mixes = AudioSystem.getMixerInfo();
                <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; mixes.length; ++i ) 
                {
                    Mixer.Info mixi = mixes[i];
                    String mixup = mixi.getName().trim();
                    <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;Mix &quot;</span> + i + <span class="stringliteral">&quot; &quot;</span> + mixup );
                    <span class="keywordflow">if</span> ( mixup.equals( pref ) ) 
                    {
                        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;Found name match for prefered input mixer&quot;</span> );
                        
                        Mixer preferedMixer = AudioSystem.getMixer( mixi );
                        <span class="keywordflow">if</span> ( preferedMixer.isLineSupported( info ) ) 
                        {
                            line = (DataLine) preferedMixer.getLine( info );
                            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;Got &quot;</span> + debugInfo + <span class="stringliteral">&quot; line&quot;</span> );
                            <span class="keywordflow">break</span>;
                        }
                        <span class="keywordflow">else</span> 
                        {
                            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( debugInfo + <span class="stringliteral">&quot; format not supported&quot;</span> );
                        }
                    }
                }
            }
        }
        <span class="keywordflow">catch</span>( Exception e )
        {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.warn( <span class="stringliteral">&quot;Unable to get a &quot;</span> + debugInfo + <span class="stringliteral">&quot; line of type: &quot;</span> + name );
            line = null;
        }

        <span class="keywordflow">return</span> line;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="adafcdcc87611a1de68e4f8acf08375a7"></a><!-- doxytag: member="audio::AudioInterfacePCM::findSourceDataLineByPref" ref="adafcdcc87611a1de68e4f8acf08375a7" args="(String pref, AudioFormat af, String name, int sbuffsz)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SourceDataLine audio.AudioInterfacePCM.findSourceDataLineByPref </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>pref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AudioFormat&#160;</td>
          <td class="paramname"> <em>af</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>sbuffsz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Searches for source data line according to preferences. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01115">1115</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01035">audio.AudioInterfacePCM.findDataLineByPref()</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00912">audio.AudioInterfacePCM.getAudioOut()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        String debtxt = <span class="stringliteral">&quot;play&quot;</span>;
        
        SourceDataLine line = (SourceDataLine) <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a3585fdd7742df07c6edfb105b8b1f3ea" title="Searches for data line of either sort (source/targe) based on the pref string.">findDataLineByPref</a>( pref, af, name, 
                sbuffsz, SourceDataLine.class, debtxt );
        
        <span class="keywordflow">if</span> ( line != null )
        {
            <span class="keywordflow">try</span> 
            {
                line.open( af, sbuffsz );
                <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;Got a &quot;</span> + debtxt + <span class="stringliteral">&quot; line of type: &quot;</span> + name
                        + <span class="stringliteral">&quot;, buffer size = &quot;</span> + line.getBufferSize () );
            }
            <span class="keywordflow">catch</span>( LineUnavailableException e ) 
            {
                <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.warn( <span class="stringliteral">&quot;Unable to get a &quot;</span> + debtxt + <span class="stringliteral">&quot; line of type: &quot;</span> + name );
                line = null;
            }
        }
        <span class="keywordflow">return</span> line;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a14a3c08fbb6d2d67a6dac13282d4d73a"></a><!-- doxytag: member="audio::AudioInterfacePCM::fintTargetDataLineByPref" ref="a14a3c08fbb6d2d67a6dac13282d4d73a" args="(String pref, AudioFormat af, String name, int sbuffsz)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TargetDataLine audio.AudioInterfacePCM.fintTargetDataLineByPref </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>pref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AudioFormat&#160;</td>
          <td class="paramname"> <em>af</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>sbuffsz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Searches for target data line according to preferences. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01086">1086</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01035">audio.AudioInterfacePCM.findDataLineByPref()</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00963">audio.AudioInterfacePCM.getAudioIn()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        String debugInfo = <span class="stringliteral">&quot;recording&quot;</span>;
        
        TargetDataLine line = (TargetDataLine) <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a3585fdd7742df07c6edfb105b8b1f3ea" title="Searches for data line of either sort (source/targe) based on the pref string.">findDataLineByPref</a>(pref, af, name, 
                sbuffsz, TargetDataLine.class, debugInfo );
        
        <span class="keywordflow">if</span> ( line != null )
        {
            <span class="keywordflow">try</span> 
            {
                line.open( af, sbuffsz );
                <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;Got a &quot;</span> + debugInfo + <span class="stringliteral">&quot; line of type: &quot;</span> + name
                        + <span class="stringliteral">&quot;, buffer size = &quot;</span> + line.getBufferSize () );
            }
            <span class="keywordflow">catch</span>( LineUnavailableException e ) 
            {
                <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.warn( <span class="stringliteral">&quot;Unable to get a &quot;</span> + debugInfo + <span class="stringliteral">&quot; line of type: &quot;</span> + name );
                line = null;
            }
        }

        <span class="keywordflow">return</span> line;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a5161f74987d2e3fa1da2fb8ca81853ef"></a><!-- doxytag: member="audio::AudioInterfacePCM::getAudioIn" ref="a5161f74987d2e3fa1da2fb8ca81853ef" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean audio.AudioInterfacePCM.getAudioIn </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns audio input (target data line) </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00963">963</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01086">audio.AudioInterfacePCM.fintTargetDataLineByPref()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00039">audio.AudioInterfacePCM.FRAME_INTERVAL</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00036">audio.AudioInterfacePCM.LLBS</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00061">audio.AudioInterfacePCM.mono44k</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00059">audio.AudioInterfacePCM.mono8k</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00048">audio.AudioInterfacePCM.propertyBigBuff</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00051">audio.AudioInterfacePCM.propertyInputDeviceName</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00045">audio.AudioInterfacePCM.propertyStereoRec</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00073">audio.AudioInterfacePCM.recordBuffer</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00060">audio.AudioInterfacePCM.stereo8k</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00066">audio.AudioInterfacePCM.targetDataLine</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00112">audio.AudioInterfacePCM.AudioInterfacePCM()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a> = null;
        <span class="keywordtype">boolean</span> succeded = <span class="keyword">false</span>;

        <span class="comment">/* Make a list of formats we can live with </span>
<span class="comment">         */</span>
        String names[] = { <span class="stringliteral">&quot;mono8k&quot;</span>, <span class="stringliteral">&quot;mono44k&quot;</span> };
        AudioFormat[] afsteps = { this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#adc0d0060e3438e565f444932f65f3a5c">mono8k</a>, this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ab9e7049323e1e82296172246d18faa79">mono44k</a> };
        <span class="keywordflow">if</span> ( <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a9cacb6cbc8a5e809dd66526d55c25fe9" title="Stereo recording.">propertyStereoRec</a> )  {
            names[0] = <span class="stringliteral">&quot;stereo8k&quot;</span>;
            afsteps[0] = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a33fe0388f112281a50c29dd64997b168">stereo8k</a>;
        }

        <span class="keywordtype">int</span>[] smallbuff = {
            (int) Math.round( <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ae35a6c317142598025b4a0948e246288" title="Low-level water mark used for de-jittering.">LLBS</a> * afsteps[0].getFrameSize() * afsteps[0].getFrameRate() 
                    * <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec" title="Frame interval in milliseconds.">FRAME_INTERVAL</a> / 1000.0 ),
            (<span class="keywordtype">int</span>) Math.round( <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ae35a6c317142598025b4a0948e246288" title="Low-level water mark used for de-jittering.">LLBS</a> * afsteps[1].getFrameSize() * afsteps[1].getFrameRate() 
                    * <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec" title="Frame interval in milliseconds.">FRAME_INTERVAL</a> / 1000.0 )
            };
        
        <span class="comment">/* If LLBS &gt; 4 then these can be the same ( Should tweak based on LLB really.)</span>
<span class="comment">         */</span>
        <span class="keywordtype">int</span>[] bigbuff = smallbuff;

        <span class="comment">/* choose one based on audio properties</span>
<span class="comment">         */</span>
        <span class="keywordtype">int</span>[] buff = <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a8985a34cd10fe8c779ccb11fc5506433" title="Big buffers.">propertyBigBuff</a> ? bigbuff : smallbuff;

        <span class="comment">/* now try and find a device that will do it - and live up to the preferences</span>
<span class="comment">         */</span>
        String pref = <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aa0e89b3cb9891d3450057cc0757b928f" title="Input device name.">propertyInputDeviceName</a>;
        <span class="keywordtype">int</span> fno = 0;
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a> = null;
        <span class="keywordflow">for</span> ( ; fno &lt; afsteps.length &amp;&amp; this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a> == null; ++fno ) 
        {
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a> = <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a14a3c08fbb6d2d67a6dac13282d4d73a" title="Searches for target data line according to preferences.">fintTargetDataLineByPref</a>(pref, 
                    afsteps[fno], names[fno], buff[fno] );
        }
        
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a> != null ) 
        {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;TargetDataLine =&quot;</span> + this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a> + <span class="stringliteral">&quot;, fno = &quot;</span> + fno );
            
            AudioFormat af = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a>.getFormat ();
            
            <span class="comment">/* now allocate some buffer space in the raw format</span>
<span class="comment">             */</span>
            
            <span class="keywordtype">int</span> inputBufferSize = (int) ( af.getFrameRate() * af.getFrameSize() / 50.0 );
            
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.trace( <span class="stringliteral">&quot;Input Buffer Size = &quot;</span> + inputBufferSize );
            
            <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a925b1f60214a2d854c8b4ea88c2b6a05">recordBuffer</a>.length; ++i ) {
                this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a925b1f60214a2d854c8b4ea88c2b6a05">recordBuffer</a>[i] = <span class="keyword">new</span> AudioBuffer( inputBufferSize );
            }
            
            succeded = <span class="keyword">true</span>;
        }
        <span class="keywordflow">else</span> 
        {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.warn( <span class="stringliteral">&quot;No audio input device available&quot;</span> );
        }

        <span class="keywordflow">return</span> succeded;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ad9c95389ed7afe4515a3b4e7ea02de7e"></a><!-- doxytag: member="audio::AudioInterfacePCM::getAudioOut" ref="ad9c95389ed7afe4515a3b4e7ea02de7e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean audio.AudioInterfacePCM.getAudioOut </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get audio output. </p>
<p>Initializes source data line. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00912">912</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01115">audio.AudioInterfacePCM.findSourceDataLineByPref()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00039">audio.AudioInterfacePCM.FRAME_INTERVAL</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00036">audio.AudioInterfacePCM.LLBS</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00059">audio.AudioInterfacePCM.mono8k</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00086">audio.AudioInterfacePCM.playBuffer</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00048">audio.AudioInterfacePCM.propertyBigBuff</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00054">audio.AudioInterfacePCM.propertyOutputDeviceName</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00045">audio.AudioInterfacePCM.propertyStereoRec</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00081">audio.AudioInterfacePCM.sourceDataLine</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00060">audio.AudioInterfacePCM.stereo8k</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00112">audio.AudioInterfacePCM.AudioInterfacePCM()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> = null;
        <span class="keywordtype">boolean</span> succeded = <span class="keyword">false</span>;
        
        AudioFormat af;
        String name;
        <span class="keywordflow">if</span> ( <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a9cacb6cbc8a5e809dd66526d55c25fe9" title="Stereo recording.">propertyStereoRec</a> ) {
            af = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a33fe0388f112281a50c29dd64997b168">stereo8k</a>;
            name = <span class="stringliteral">&quot;stereo8k&quot;</span>;
        } <span class="keywordflow">else</span> {
            af = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#adc0d0060e3438e565f444932f65f3a5c">mono8k</a>;
            name = <span class="stringliteral">&quot;mono8k&quot;</span>;
        }

        <span class="keywordtype">int</span> buffsz = (int) Math.round( <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ae35a6c317142598025b4a0948e246288" title="Low-level water mark used for de-jittering.">LLBS</a> * af.getFrameSize() * af.getFrameRate() *
                                      <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec" title="Frame interval in milliseconds.">FRAME_INTERVAL</a> / 1000.0 );
        
        <span class="keywordflow">if</span> ( <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a8985a34cd10fe8c779ccb11fc5506433" title="Big buffers.">propertyBigBuff</a> ) {
            buffsz *= 2.5;
        }
        
        <span class="comment">/* We want to do tricky stuff on the 8k mono stream before</span>
<span class="comment">         * play back, so we accept no other sort of line.</span>
<span class="comment">         */</span>
        String pref = <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a09f053105d729955ad30dc58e2b9ba6a" title="Output device name.">propertyOutputDeviceName</a>;
        SourceDataLine sdl = <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#adafcdcc87611a1de68e4f8acf08375a7" title="Searches for source data line according to preferences.">findSourceDataLineByPref</a>( pref, af, name, buffsz );
        <span class="keywordflow">if</span> ( sdl != null )
        {
            <span class="keywordtype">int</span> outputBufferSize = (int) ( af.getFrameRate() * af.getFrameSize() / 50.0 );
            
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.trace( <span class="stringliteral">&quot;Output Buffer Size = &quot;</span> + outputBufferSize );

            <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">playBuffer</a>.length; ++i ) {
                this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">playBuffer</a>[i] = <span class="keyword">new</span> AudioBuffer( outputBufferSize );
            }

            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> = sdl;
            succeded = <span class="keyword">true</span>;
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.warn( <span class="stringliteral">&quot;No audio output device available&quot;</span> );
        }

        <span class="keywordflow">return</span> succeded;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a1787c404c639dffc8695153ac5f6a7cf"></a><!-- doxytag: member="audio::AudioInterfacePCM::getByFormat" ref="a1787c404c639dffc8695153ac5f6a7cf" args="(Integer format)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interfaceaudio_1_1_audio_interface.html">AudioInterface</a> audio.AudioInterfacePCM.getByFormat </td>
          <td>(</td>
          <td class="paramtype">Integer&#160;</td>
          <td class="paramname"> <em>format</em>&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets audio interface by VoicePDU format. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classaudio_1_1_audio_interface_p_c_m.html" title="Implements the audio interface for 16-bit signed linear audio (PCM_SIGNED).">AudioInterfacePCM</a> </dd></dl>

<p>Implements <a class="el" href="interfaceaudio_1_1_audio_interface.html#afef6f8a11863a389a5d8841e555a571f">audio.AudioInterface</a>.</p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01270">1270</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_voice_p_d_u_8java_source.html#l00019">protocol.VoicePDU.ALAW</a>, <a class="el" href="_voice_p_d_u_8java_source.html#l00014">protocol.VoicePDU.LIN16</a>, and <a class="el" href="_voice_p_d_u_8java_source.html#l00024">protocol.VoicePDU.ULAW</a>.</p>

<p>Referenced by <a class="el" href="_abstract_c_o_d_e_c_8java_source.html#l00144">audio.AbstractCODEC.getByFormat()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        AudioInterface ret = null;
        <span class="keywordflow">switch</span>( format.intValue () ) 
        {
            <span class="keywordflow">case</span> VoicePDU.ALAW:
                ret = <span class="keyword">new</span> AudioCodecAlaw(<span class="keyword">this</span>);
                <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> VoicePDU.ULAW:
                ret = <span class="keyword">new</span> AudioCodecUlaw(<span class="keyword">this</span>);
                <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> VoicePDU.LIN16:
                ret = <span class="keyword">this</span>;
                <span class="keywordflow">break</span>;
            <span class="keywordflow">default</span>:
                <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.warn( <span class="stringliteral">&quot;Invalid format for Audio &quot;</span> + format.intValue () );
                <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.warn( <span class="stringliteral">&quot;Forced uLaw &quot;</span> );
                ret = <span class="keyword">new</span> AudioCodecUlaw(<span class="keyword">this</span>);
                <span class="keywordflow">break</span>;
        }
        
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;Using audio Interface of type : &quot;</span> + ret.getClass().getName() );
        
        <span class="keywordflow">return</span> ret;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a6511c3f041ee369c2ff5dbbb3c0f20fa"></a><!-- doxytag: member="audio::AudioInterfacePCM::getSampleSize" ref="a6511c3f041ee369c2ff5dbbb3c0f20fa" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int audio.AudioInterfacePCM.getSampleSize </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns preferred the minimum sample size for use in creating buffers etc. </p>

<p>Implements <a class="el" href="interfaceaudio_1_1_audio_interface.html#ab2ef7eaccbfb29fe20ca27d5f2bcf6f8">audio.AudioInterface</a>.</p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00206">206</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00039">audio.AudioInterfacePCM.FRAME_INTERVAL</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00059">audio.AudioInterfacePCM.mono8k</a>.</p>

<p>Referenced by <a class="el" href="_audio_codec_alaw_8java_source.html#l00018">audio.AudioCodecAlaw.AudioCodecAlaw()</a>, <a class="el" href="_audio_codec_ulaw_8java_source.html#l00018">audio.AudioCodecUlaw.AudioCodecUlaw()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00112">audio.AudioInterfacePCM.AudioInterfacePCM()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00879">audio.AudioInterfacePCM.initializeRingerSamples()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        AudioFormat af = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#adc0d0060e3438e565f444932f65f3a5c">mono8k</a>;
        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) ( af.getFrameRate() * af.getFrameSize() * <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec" title="Frame interval in milliseconds.">FRAME_INTERVAL</a> / 1000.0 );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a7b297d6c0a97dc4db4b9b54737fd9213"></a><!-- doxytag: member="audio::AudioInterfacePCM::getVoicePduSubclass" ref="a7b297d6c0a97dc4db4b9b54737fd9213" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int audio.AudioInterfacePCM.getVoicePduSubclass </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns our VoicePDU format. </p>

<p>Implements <a class="el" href="interfaceaudio_1_1_audio_interface.html#a46ea59ab253c288cc50487555f5cff2b">audio.AudioInterface</a>.</p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00216">216</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">return</span> protocol.VoicePDU.LIN16;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a16075c43def415c5c59741eab8e0e0a4"></a><!-- doxytag: member="audio::AudioInterfacePCM::initializeRingerSamples" ref="a16075c43def415c5c59741eab8e0e0a4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.initializeRingerSamples </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes ringer samples (ring singnal and silecce) samples. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00879">879</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_octet_buffer_8java_source.html#l00027">utils.OctetBuffer.allocate()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00206">audio.AudioInterfacePCM.getSampleSize()</a>, <a class="el" href="_octet_buffer_8java_source.html#l00063">utils.OctetBuffer.getStore()</a>, <a class="el" href="_octet_buffer_8java_source.html#l00139">utils.OctetBuffer.putShort()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00101">audio.AudioInterfacePCM.ringSamples</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00102">audio.AudioInterfacePCM.silenceSamples</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00112">audio.AudioInterfacePCM.AudioInterfacePCM()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="comment">/* First generate silence</span>
<span class="comment">         */</span>
        <span class="keywordtype">int</span> numOfSamples = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a6511c3f041ee369c2ff5dbbb3c0f20fa" title="Returns preferred the minimum sample size for use in creating buffers etc.">getSampleSize</a> ();
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ac757be02435f4d7ced0f50ed905ef1d1">silenceSamples</a> = <span class="keyword">new</span> byte[ numOfSamples ];
        
        <span class="comment">/* Now generate ringing tone as two superimposed frequencies.</span>
<span class="comment">         */</span>
        <span class="keywordtype">double</span> freq1 =  25.0 / 8000;
        <span class="keywordtype">double</span> freq2 = 420.0 / 8000;
        
        OctetBuffer rbb = OctetBuffer.allocate( numOfSamples );

        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; 160; ++i )
        {
            <span class="keywordtype">short</span> s = (short) ( Short.MAX_VALUE
                               * Math.sin( 2.0 * Math.PI * freq1 * i )
                               * Math.sin( 4.0 * Math.PI * freq2 * i )
                               / 4.0  <span class="comment">/* signal level ~= -12 dB */</span>
                               );
            rbb.putShort( s );
        }
        
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ac2cebb2c236a76fa81365b6d6f3edc7c">ringSamples</a> = rbb.getStore ();
        
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aabf41ffe00dd21f97d37526fc3837e23"></a><!-- doxytag: member="audio::AudioInterfacePCM::micDataRead" ref="aabf41ffe00dd21f97d37526fc3837e23" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.micDataRead </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called from micRecorder to record audio samples from microphone. </p>
<p>Blocks as needed. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00673">673</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_buffer_8java_source.html#l00026">audio.AudioBuffer.getByteArray()</a>, <a class="el" href="_audio_buffer_8java_source.html#l00034">audio.AudioBuffer.isWritten()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00076">audio.AudioInterfacePCM.lastMicTimestamp</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00074">audio.AudioInterfacePCM.micBufPut</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00073">audio.AudioInterfacePCM.recordBuffer</a>, <a class="el" href="_audio_buffer_8java_source.html#l00066">audio.AudioBuffer.setTimestamp()</a>, <a class="el" href="_audio_buffer_8java_source.html#l00042">audio.AudioBuffer.setWritten()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00066">audio.AudioInterfacePCM.targetDataLine</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00651">audio.AudioInterfacePCM.micRecorderWorker()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">try</span> 
        {
            <span class="keywordtype">int</span> fresh = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a5b4217c3bd882244f8ac04b44c33efeb">micBufPut</a> % this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a925b1f60214a2d854c8b4ea88c2b6a05">recordBuffer</a>.length;
            AudioBuffer ab = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a925b1f60214a2d854c8b4ea88c2b6a05">recordBuffer</a>[ fresh ];
            byte[] buff = ab.getByteArray ();
            
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a>.read( buff, 0, buff.length );
            
            <span class="keywordtype">long</span> stamp = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a>.getMicrosecondPosition () / 1000;
            <span class="keywordflow">if</span> ( stamp &gt;= this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aa1b9cef4a2e6598565a6c219c605d75f">lastMicTimestamp</a> )
            {
                <span class="keywordflow">if</span> ( ab.isWritten () ) {
                    <span class="comment">// Overrun audio data: stamp + &quot;/&quot; + got</span>
                }

                ab.setTimestamp( stamp );
                ab.setWritten (); <span class="comment">// should test for overrun ???</span>
                
                <span class="comment">/* Out audio data into buffer: </span>
<span class="comment">                 * fresh + &quot; &quot; + ab.getTimestamp() + &quot;/&quot; + this.micBufPut</span>
<span class="comment">                 */</span>
                
                ++this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a5b4217c3bd882244f8ac04b44c33efeb">micBufPut</a>;
            }
            <span class="keywordflow">else</span> <span class="comment">// Seen at second and subsequent activations, garbage data </span>
            {
                <span class="comment">/* Drop audio data */</span>
            }
            
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aa1b9cef4a2e6598565a6c219c605d75f">lastMicTimestamp</a> = stamp;
        }
        <span class="keywordflow">catch</span>( Exception e ) 
        {
            <span class="comment">/* ignored */</span>
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a81dae9b413d98da0ab0cbaebb1291c51"></a><!-- doxytag: member="audio::AudioInterfacePCM::micRecorderWorker" ref="a81dae9b413d98da0ab0cbaebb1291c51" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.micRecorderWorker </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Records audio samples from the microphone. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00651">651</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00673">audio.AudioInterfacePCM.micDataRead()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00068">audio.AudioInterfacePCM.micRecorderThread</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00066">audio.AudioInterfacePCM.targetDataLine</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01163">audio.AudioInterfacePCM.startRecording()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.trace( <span class="stringliteral">&quot;Thread started&quot;</span> );
        
        <span class="keywordflow">while</span>( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a9959ec3aa6a4bbb9657230992cd1c530">micRecorderThread</a> != null ) 
        {
            <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a> == null ) {
                <span class="keywordflow">break</span>;
            }

            <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aabf41ffe00dd21f97d37526fc3837e23" title="Called from micRecorder to record audio samples from microphone.">micDataRead</a> ();
        }
        
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.trace( <span class="stringliteral">&quot;Thread stopped&quot;</span> );
        
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a9959ec3aa6a4bbb9657230992cd1c530">micRecorderThread</a> = null;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a5098fb166e4eb44c6f56d3b54ab9ab96"></a><!-- doxytag: member="audio::AudioInterfacePCM::pduSenderWorker" ref="a5098fb166e4eb44c6f56d3b54ab9ab96" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.pduSenderWorker </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sends audio frames to UDP channel at regular intervals (ticks) </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00561">561</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00067">audio.AudioInterfacePCM.audioSenderThread</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00039">audio.AudioInterfacePCM.FRAME_INTERVAL</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00633">audio.AudioInterfacePCM.sendAudioFrame()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00066">audio.AudioInterfacePCM.targetDataLine</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00112">audio.AudioInterfacePCM.AudioInterfacePCM()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.trace( <span class="stringliteral">&quot;Thread started&quot;</span> );
        
        <span class="keywordtype">long</span> <span class="keyword">set</span> = 0;
        <span class="keywordtype">long</span> last, point = 0;
        <span class="keywordtype">boolean</span> audioTime = <span class="keyword">false</span>;

        <span class="keywordflow">while</span>( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a680052f150cc3b669a8e3e69d0c57a4c">audioSenderThread</a> != null )
        {
            <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a> == null ) {
                <span class="keywordflow">break</span>;
            }

            <span class="comment">/* This should be current time: interval += FRAME_INTERVAL</span>
<span class="comment">             */</span>
            point += <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec" title="Frame interval in milliseconds.">FRAME_INTERVAL</a>;
            
            <span class="comment">/* Delta time</span>
<span class="comment">             */</span>
            <span class="keywordtype">long</span> delta = point - <span class="keyword">set</span> + <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec" title="Frame interval in milliseconds.">FRAME_INTERVAL</a>;
            
            <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a>.isActive () ) 
            {
                <span class="keywordflow">if</span> ( ! audioTime ) <span class="comment">// Take care of &quot;discontinuous time&quot;</span>
                {
                    audioTime = <span class="keyword">true</span>;
                    <span class="keyword">set</span> = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a>.getMicrosecondPosition() / 1000;
                    last = point = <span class="keyword">set</span>;
                }
            }
            <span class="keywordflow">else</span> 
            {
                point = 0;
                delta = <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec" title="Frame interval in milliseconds.">FRAME_INTERVAL</a>; <span class="comment">// We are live before TDL</span>
                <span class="keyword">set</span> = System.currentTimeMillis (); <span class="comment">// For ring cadence</span>
                audioTime = <span class="keyword">false</span>;
            }
            
            <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a8e781a0464f91108b2c5d1a07499ddd0" title="Called every FRAMEINTERVAL ms to send audio frame.">sendAudioFrame</a>( <span class="keyword">set</span> );
            
            <span class="comment">// If we are late, set is larger than last so we sleep less</span>
            <span class="comment">// If we are early, set is smaller than last and we sleep longer</span>
            <span class="comment">//</span>
            <span class="keywordflow">if</span> ( delta &gt; 1 ) <span class="comment">// Only sleep if it is worth it...</span>
            {
                <span class="keywordflow">try</span> {
                    Thread.sleep( delta );
                } <span class="keywordflow">catch</span>( InterruptedException e ) {
                    <span class="comment">/* ignored */</span>
                }
            }

            last = <span class="keyword">set</span>;
            
            <span class="keywordflow">if</span> ( audioTime ) {
                <span class="keyword">set</span> = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a>.getMicrosecondPosition() / 1000;
            }
            
            <span class="keywordflow">if</span> ( point &gt; 0 ) {
                <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;Ticker: slept &quot;</span> + delta + <span class="stringliteral">&quot; from &quot;</span> + last + <span class="stringliteral">&quot;, now &quot;</span> + <span class="keyword">set</span> );
            }
        }
        
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.trace( <span class="stringliteral">&quot;Thread completed&quot;</span> );

        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a680052f150cc3b669a8e3e69d0c57a4c">audioSenderThread</a> = null;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a65081720e7319478e620ac5446b09451"></a><!-- doxytag: member="audio::AudioInterfacePCM::readWithTimestamp" ref="a65081720e7319478e620ac5446b09451" args="(byte[] buff)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long audio.AudioInterfacePCM.readWithTimestamp </td>
          <td>(</td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"> <em>buff</em>&#160;)</td>
          <td>  throws IOException     <code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read from the Microphone, into the buffer provided, but <em>only</em> filling getSampSize() bytes. </p>
<p>Returns the timestamp of the sample from the audio clock.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">buff</td><td>audio samples </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the timestamp of the sample from the audio clock. </dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td>Description of Exception </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="interfaceaudio_1_1_audio_interface.html#a9154c04e143e8246ee10fabc7923214b">audio.AudioInterface</a>.</p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00722">722</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_buffer_8java_source.html#l00026">audio.AudioBuffer.getByteArray()</a>, <a class="el" href="_audio_buffer_8java_source.html#l00058">audio.AudioBuffer.getTimestamp()</a>, <a class="el" href="_audio_buffer_8java_source.html#l00034">audio.AudioBuffer.isWritten()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00075">audio.AudioInterfacePCM.micBufGet</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00074">audio.AudioInterfacePCM.micBufPut</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00073">audio.AudioInterfacePCM.recordBuffer</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00756">audio.AudioInterfacePCM.resample()</a>, <a class="el" href="_audio_buffer_8java_source.html#l00050">audio.AudioBuffer.setRead()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00102">audio.AudioInterfacePCM.silenceSamples</a>.</p>

<p>Referenced by <a class="el" href="_abstract_c_o_d_e_c_8java_source.html#l00108">audio.AbstractCODEC.readWithTimestamp()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordtype">int</span> micnext = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#abde473853cc1611badc798569426b5e3">micBufGet</a> % this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a925b1f60214a2d854c8b4ea88c2b6a05">recordBuffer</a>.length;
        <span class="keywordtype">int</span> buffCap = (this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a5b4217c3bd882244f8ac04b44c33efeb">micBufPut</a> - this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#abde473853cc1611badc798569426b5e3">micBufGet</a> ) % this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a925b1f60214a2d854c8b4ea88c2b6a05">recordBuffer</a>.length;
        <span class="keywordtype">long</span> timestamp = 0;
        
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;Getting audio data from buffer &quot;</span> + micnext + <span class="stringliteral">&quot;/&quot;</span> + buffCap );

        AudioBuffer ab = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a925b1f60214a2d854c8b4ea88c2b6a05">recordBuffer</a>[ micnext ];
        <span class="keywordflow">if</span> ( ab.isWritten () 
                &amp;&amp; ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#abde473853cc1611badc798569426b5e3">micBufGet</a> &gt; 0 || buffCap &gt;= this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a925b1f60214a2d854c8b4ea88c2b6a05">recordBuffer</a>.length / 2 ) ) 
        {
            timestamp = ab.getTimestamp ();
            <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a7119d7c6a595537f2094c0ef39cbef1c" title="Simple PCM down sampler.">resample</a>( ab.getByteArray(), buff );
            ab.setRead ();

            ++this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#abde473853cc1611badc798569426b5e3">micBufGet</a>;
        }
        <span class="keywordflow">else</span> 
        {
            System.arraycopy( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ac757be02435f4d7ced0f50ed905ef1d1">silenceSamples</a>, 0, buff, 0, buff.length );
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;Sending silence&quot;</span> );
            timestamp = ab.getTimestamp (); <span class="comment">// or should we warn them ??</span>
        }

        <span class="keywordflow">return</span> timestamp;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a7119d7c6a595537f2094c0ef39cbef1c"></a><!-- doxytag: member="audio::AudioInterfacePCM::resample" ref="a7119d7c6a595537f2094c0ef39cbef1c" args="(byte[] src, byte[] dest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.resample </td>
          <td>(</td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"> <em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"> <em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Simple PCM down sampler. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>source buffer with audio samples </td></tr>
    <tr><td class="paramname">dest</td><td>destination buffer with audio samples </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00756">756</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_octet_buffer_8java_source.html#l00112">utils.OctetBuffer.getShort()</a>, <a class="el" href="_octet_buffer_8java_source.html#l00139">utils.OctetBuffer.putShort()</a>, and <a class="el" href="_octet_buffer_8java_source.html#l00039">utils.OctetBuffer.wrap()</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00722">audio.AudioInterfacePCM.readWithTimestamp()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( src.length == dest.length ) 
        {
            <span class="comment">/* Nothing to down sample; copy samples as-is to destination</span>
<span class="comment">             */</span>
            System.arraycopy( src, 0, dest, 0, src.length );
            <span class="keywordflow">return</span>;
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( src.length / 2 == dest.length )
        {
            <span class="comment">/* Source is stereo, send the left channel</span>
<span class="comment">             */</span>
            <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; dest.length / 2; i++ ) 
            {
                dest[i * 2] = src[i * 4];
                dest[i * 2 + 1] = src[i * 4 + 1];
            }
            <span class="keywordflow">return</span>;
        }

        <span class="comment">/* Now real work. We assume that it is 44k stereo 16-bit and will down-sample</span>
<span class="comment">         * it to 8k (but not very clever: no anti-aliasing etc....).</span>
<span class="comment">         */</span>
        OctetBuffer srcBuffer = OctetBuffer.wrap( src );
        OctetBuffer destBuffer = OctetBuffer.wrap( dest );
        
        <span class="comment">/* Iterate over the values we have, add them to the target bucket they fall into</span>
<span class="comment">         * and count the drops....</span>
<span class="comment">         */</span>
        <span class="keywordtype">int</span> drange = dest.length / 2;
        <span class="keywordtype">double</span> v[] = <span class="keyword">new</span> <span class="keywordtype">double</span>[ drange ];
        <span class="keywordtype">double</span> w[] = <span class="keyword">new</span> <span class="keywordtype">double</span>[ drange ];

        <span class="keywordtype">double</span> frequencyRatio = 8000.0 / 44100.0;
        <span class="keywordtype">int</span> top = src.length / 2;
        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> eo = 0; eo &lt; top; ++eo ) 
        {
            <span class="keywordtype">int</span> samp = (int) Math.floor( eo * frequencyRatio );
            <span class="keywordflow">if</span> ( samp &gt;= drange ) {
                samp = drange - 1;
            }
            v[ samp ] += srcBuffer.getShort( eo * 2 );
            w[ samp ]++;
        }
        
        <span class="comment">/* Now re-weight the samples to ensure no volume quirks and move to short</span>
<span class="comment">         */</span>
        <span class="keywordtype">short</span> vw = 0;
        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> ei = 0; ei &lt; drange; ++ei ) 
        {
            <span class="keywordflow">if</span> ( w[ei] != 0 ) {
                vw = (short) ( v[ei] / w[ei] );
            }
            destBuffer.putShort( ei * 2, vw );
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a1d44561b30ed5dd9c289ad5fe78adc35"></a><!-- doxytag: member="audio::AudioInterfacePCM::ringerWorker" ref="a1d44561b30ed5dd9c289ad5fe78adc35" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.ringerWorker </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Writes ring signal samples to audio output. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00819">819</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00039">audio.AudioInterfacePCM.FRAME_INTERVAL</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00104">audio.AudioInterfacePCM.providingRingBack</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00100">audio.AudioInterfacePCM.ringerThread</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00101">audio.AudioInterfacePCM.ringSamples</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00105">audio.AudioInterfacePCM.ringTimer</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00102">audio.AudioInterfacePCM.silenceSamples</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00081">audio.AudioInterfacePCM.sourceDataLine</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00862">audio.AudioInterfacePCM.writeDirectIfAvail()</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00112">audio.AudioInterfacePCM.AudioInterfacePCM()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.trace( <span class="stringliteral">&quot;Thread started&quot;</span> );
        
        <span class="keywordflow">while</span>( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a330d678330903d0b84ea92d8ffacdd41">ringerThread</a> != null )
        {
            <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> == null ) {
                <span class="keywordflow">break</span>;
            }

            <span class="keywordtype">long</span> nap = 100; <span class="comment">// default sleep in millis when idle</span>
            
            <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a444e7e71728fe7432a0b126bdbc14c7d">providingRingBack</a> ) 
            {
                nap = 0;
                <span class="keywordflow">while</span>( nap &lt; <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec" title="Frame interval in milliseconds.">FRAME_INTERVAL</a> ) 
                {
                    <span class="keywordtype">boolean</span> inRing = ( ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a8421933579303cade8ee11d8a27c7e1c">ringTimer</a>++ % 120 ) &lt; 40 );
                    <span class="keywordflow">if</span> ( inRing ) {
                        nap = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a18602d498c9fd7285ff289ecdb604368" title="Writes audio samples to audio output directly (without using jitter buffer).">writeDirectIfAvail</a>( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ac2cebb2c236a76fa81365b6d6f3edc7c">ringSamples</a> );
                    } <span class="keywordflow">else</span> {
                        nap = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a18602d498c9fd7285ff289ecdb604368" title="Writes audio samples to audio output directly (without using jitter buffer).">writeDirectIfAvail</a>( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ac757be02435f4d7ced0f50ed905ef1d1">silenceSamples</a> );
                    }
                }
            }

            <span class="keywordflow">try</span> {
                Thread.sleep( nap );
            } <span class="keywordflow">catch</span>( InterruptedException ex ) {
                <span class="comment">/* ignored */</span>
            }
        }
        
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.trace( <span class="stringliteral">&quot;Thread completed&quot;</span> );
        
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a330d678330903d0b84ea92d8ffacdd41">ringerThread</a> = null;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a8e781a0464f91108b2c5d1a07499ddd0"></a><!-- doxytag: member="audio::AudioInterfacePCM::sendAudioFrame" ref="a8e781a0464f91108b2c5d1a07499ddd0" args="(long set)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.sendAudioFrame </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"> <em>set</em>&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called every FRAMEINTERVAL ms to send audio frame. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00633">633</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00069">audio.AudioInterfacePCM.audioSender</a>, and <a class="el" href="interfaceaudio_1_1_audio_interface_1_1_packetizer.html#a8fed968beb915f506e2fc1b2a8ca57a9">audio.AudioInterface.Packetizer.send()</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00561">audio.AudioInterfacePCM.pduSenderWorker()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0af9cd70d7a4bf6bde276da5cd2ce176">audioSender</a> == null ) {
            <span class="keywordflow">return</span>;
        }

        <span class="keywordflow">try</span> {
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0af9cd70d7a4bf6bde276da5cd2ce176">audioSender</a>.<a class="code" href="interfaceaudio_1_1_audio_interface_1_1_packetizer.html#a8fed968beb915f506e2fc1b2a8ca57a9">send</a> ();
        } <span class="keywordflow">catch</span>( IOException e ) {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.exception( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.WARN, e );
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ae1aa3c929021f80c6c12c11d3f8b30c1"></a><!-- doxytag: member="audio::AudioInterfacePCM::setAudioSender" ref="ae1aa3c929021f80c6c12c11d3f8b30c1" args="(AudioInterface.Packetizer as)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.setAudioSender </td>
          <td>(</td>
          <td class="paramtype">AudioInterface.Packetizer&#160;</td>
          <td class="paramname"> <em>as</em>&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the active audio sender for the recorder. </p>

<p>Implements <a class="el" href="interfaceaudio_1_1_audio_interface.html#a68795b6422b95ae6a73efe4c2712a32a">audio.AudioInterface</a>.</p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00225">225</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00069">audio.AudioInterfacePCM.audioSender</a>.</p>

<p>Referenced by <a class="el" href="_abstract_c_o_d_e_c_8java_source.html#l00128">audio.AbstractCODEC.setAudioSender()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0af9cd70d7a4bf6bde276da5cd2ce176">audioSender</a> = as;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ab97ecaa78c0daa30e3df50dd79045991"></a><!-- doxytag: member="audio::AudioInterfacePCM::startPlay" ref="ab97ecaa78c0daa30e3df50dd79045991" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.startPlay </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts the audio output worker thread. </p>

<p>Implements <a class="el" href="interfaceaudio_1_1_audio_interface.html#ab9ddd05075d26547583e5a6f2b091f92">audio.AudioInterface</a>.</p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01209">1209</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00095">audio.AudioInterfacePCM.callLength</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00089">audio.AudioInterfacePCM.jitBufFudge</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00088">audio.AudioInterfacePCM.jitBufGet</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00087">audio.AudioInterfacePCM.jitBufPut</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00091">audio.AudioInterfacePCM.playerIsEnabled</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00081">audio.AudioInterfacePCM.sourceDataLine</a>.</p>

<p>Referenced by <a class="el" href="_abstract_c_o_d_e_c_8java_source.html#l00064">audio.AbstractCODEC.startPlay()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">audio.AudioInterfacePCM.writeBuffersToAudioOutput()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> == null ) {
            <span class="keywordflow">return</span>;
        }
        
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;Started playing&quot;</span> );
        
        <span class="comment">/* Reset the dejitter buffer</span>
<span class="comment">         */</span>
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#af8887492c70b8f93c44b5735d23e1df8">jitBufPut</a> = 0;
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aee33962ee7ebadc333180fe0018bfd1a">jitBufGet</a> = 0;
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a091cd2a0d6fbc3d84c45f1efcbaec8a0">jitBufFudge</a> = 0;
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aa27a3b10a8d5730375706bb7c796a1f9" title="Measured call length in milliseconds.">callLength</a> = 0;

        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.flush ();
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.start ();

        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aa1b3c82ecfec3f3649c0ef7be46930ae">playerIsEnabled</a> = <span class="keyword">true</span>;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="af3478bd4217c8845f4692ab71a29266d"></a><!-- doxytag: member="audio::AudioInterfacePCM::startRecording" ref="af3478bd4217c8845f4692ab71a29266d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long audio.AudioInterfacePCM.startRecording </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start the audio recording worker thread. </p>

<p>Implements <a class="el" href="interfaceaudio_1_1_audio_interface.html#a6dbedfb7e3c64ede8560ab9c79fffe18">audio.AudioInterface</a>.</p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01163">1163</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00076">audio.AudioInterfacePCM.lastMicTimestamp</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00075">audio.AudioInterfacePCM.micBufGet</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00074">audio.AudioInterfacePCM.micBufPut</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00068">audio.AudioInterfacePCM.micRecorderThread</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00651">audio.AudioInterfacePCM.micRecorderWorker()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00073">audio.AudioInterfacePCM.recordBuffer</a>, <a class="el" href="_audio_buffer_8java_source.html#l00050">audio.AudioBuffer.setRead()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00066">audio.AudioInterfacePCM.targetDataLine</a>.</p>

<p>Referenced by <a class="el" href="_abstract_c_o_d_e_c_8java_source.html#l00056">audio.AbstractCODEC.startRecording()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a> == null ) {
            <span class="keywordflow">return</span> 0;
        }
        
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;Started recording&quot;</span> );

        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a>.available() &gt; 0 ) 
        {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;Flushed recorded data&quot;</span> );
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a>.flush ();
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aa1b9cef4a2e6598565a6c219c605d75f">lastMicTimestamp</a> = Long.MAX_VALUE; <span class="comment">// Get rid of spurious samples</span>
        } 
        <span class="keywordflow">else</span> 
        {
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aa1b9cef4a2e6598565a6c219c605d75f">lastMicTimestamp</a> = 0;
        }
        
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a>.start ();

        <span class="comment">/* Clean receive buffers pointers </span>
<span class="comment">         */</span>
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a5b4217c3bd882244f8ac04b44c33efeb">micBufPut</a> = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#abde473853cc1611badc798569426b5e3">micBufGet</a> = 0;
        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a925b1f60214a2d854c8b4ea88c2b6a05">recordBuffer</a>.length; ++i ) {
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a925b1f60214a2d854c8b4ea88c2b6a05">recordBuffer</a>[i].setRead ();
        }

        Runnable thread = <span class="keyword">new</span> Runnable() {
            <span class="keyword">public</span> <span class="keywordtype">void</span> run () {
                <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a81dae9b413d98da0ab0cbaebb1291c51" title="Records audio samples from the microphone.">micRecorderWorker</a> ();
            }
        };

        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a9959ec3aa6a4bbb9657230992cd1c530">micRecorderThread</a> = <span class="keyword">new</span> Thread( thread, <span class="stringliteral">&quot;Tick-rec&quot;</span> );
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a9959ec3aa6a4bbb9657230992cd1c530">micRecorderThread</a>.setDaemon( <span class="keyword">true</span> );
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a9959ec3aa6a4bbb9657230992cd1c530">micRecorderThread</a>.setPriority( Thread.MAX_PRIORITY - 1 );
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a9959ec3aa6a4bbb9657230992cd1c530">micRecorderThread</a>.start ();

        <span class="keywordflow">return</span> this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a>.getMicrosecondPosition() / 1000;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ac6611562b260b32888ff27a94f17a961"></a><!-- doxytag: member="audio::AudioInterfacePCM::startRinging" ref="ac6611562b260b32888ff27a94f17a961" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.startRinging </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts ringing signal. </p>

<p>Implements <a class="el" href="interfaceaudio_1_1_audio_interface.html#a1fdd6ac91cb5c8deb9706a3575deb672">audio.AudioInterface</a>.</p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01300">1300</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00104">audio.AudioInterfacePCM.providingRingBack</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00081">audio.AudioInterfacePCM.sourceDataLine</a>.</p>

<p>Referenced by <a class="el" href="_abstract_c_o_d_e_c_8java_source.html#l00080">audio.AbstractCODEC.startRinging()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> == null ) {
            <span class="keywordflow">return</span>;
        }

        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.flush();
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.start();
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a444e7e71728fe7432a0b126bdbc14c7d">providingRingBack</a> = <span class="keyword">true</span>;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a81a17318f86b97abdc2fbe702db26383"></a><!-- doxytag: member="audio::AudioInterfacePCM::stopPlay" ref="a81a17318f86b97abdc2fbe702db26383" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.stopPlay </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stops the audio output worker thread. </p>

<p>Implements <a class="el" href="interfaceaudio_1_1_audio_interface.html#ada9d08501a66dba278641a0bd853c479">audio.AudioInterface</a>.</p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01233">1233</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00095">audio.AudioInterfacePCM.callLength</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00089">audio.AudioInterfacePCM.jitBufFudge</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00088">audio.AudioInterfacePCM.jitBufGet</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00087">audio.AudioInterfacePCM.jitBufPut</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00091">audio.AudioInterfacePCM.playerIsEnabled</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00081">audio.AudioInterfacePCM.sourceDataLine</a>.</p>

<p>Referenced by <a class="el" href="_abstract_c_o_d_e_c_8java_source.html#l00072">audio.AbstractCODEC.stopPlay()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="comment">/* Reset the buffer</span>
<span class="comment">         */</span>
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#af8887492c70b8f93c44b5735d23e1df8">jitBufPut</a> = 0;
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aee33962ee7ebadc333180fe0018bfd1a">jitBufGet</a> = 0;
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aa1b3c82ecfec3f3649c0ef7be46930ae">playerIsEnabled</a> = <span class="keyword">false</span>;

        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> == null ) {
            <span class="keywordflow">return</span>;
        }

        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;Stopped playing&quot;</span> );

        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.stop ();
    
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a091cd2a0d6fbc3d84c45f1efcbaec8a0">jitBufFudge</a> != 0 )
        {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;Total sample skew: &quot;</span> + this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a091cd2a0d6fbc3d84c45f1efcbaec8a0">jitBufFudge</a> );
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;Percentage: &quot;</span> + (100.0 * this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a091cd2a0d6fbc3d84c45f1efcbaec8a0">jitBufFudge</a> / (8 * this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aa27a3b10a8d5730375706bb7c796a1f9" title="Measured call length in milliseconds.">callLength</a>)) );
            
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a091cd2a0d6fbc3d84c45f1efcbaec8a0">jitBufFudge</a> = 0;
        }
        
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aa27a3b10a8d5730375706bb7c796a1f9" title="Measured call length in milliseconds.">callLength</a> &gt; 0 ) {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.trace( <span class="stringliteral">&quot;Total call Length: &quot;</span> + this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aa27a3b10a8d5730375706bb7c796a1f9" title="Measured call length in milliseconds.">callLength</a> + <span class="stringliteral">&quot; ms&quot;</span> );
        }
        
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.flush ();
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a778187003c651722047d6b3bd48cbfed"></a><!-- doxytag: member="audio::AudioInterfacePCM::stopRecording" ref="a778187003c651722047d6b3bd48cbfed" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.stopRecording </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stops the audio recording worker thread. </p>

<p>Implements <a class="el" href="interfaceaudio_1_1_audio_interface.html#a05f40c36a07e1a89b2a136c5e8a206ad">audio.AudioInterface</a>.</p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01146">1146</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00069">audio.AudioInterfacePCM.audioSender</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00068">audio.AudioInterfacePCM.micRecorderThread</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00066">audio.AudioInterfacePCM.targetDataLine</a>.</p>

<p>Referenced by <a class="el" href="_abstract_c_o_d_e_c_8java_source.html#l00048">audio.AbstractCODEC.stopRecording()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a> == null ) {
            <span class="keywordflow">return</span>;
        }            

        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.audio( <span class="stringliteral">&quot;Stopped recoring &quot;</span>);

        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">targetDataLine</a>.stop ();
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a9959ec3aa6a4bbb9657230992cd1c530">micRecorderThread</a> = null;
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0af9cd70d7a4bf6bde276da5cd2ce176">audioSender</a> = null;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ac15c22cd579f2fdae4ba11c13831b03d"></a><!-- doxytag: member="audio::AudioInterfacePCM::stopRinging" ref="ac15c22cd579f2fdae4ba11c13831b03d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.stopRinging </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stops ringing singnal. </p>

<p>Implements <a class="el" href="interfaceaudio_1_1_audio_interface.html#ab4c03087d55a96be90fc4531f359a06e">audio.AudioInterface</a>.</p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01315">1315</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00104">audio.AudioInterfacePCM.providingRingBack</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00105">audio.AudioInterfacePCM.ringTimer</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00081">audio.AudioInterfacePCM.sourceDataLine</a>.</p>

<p>Referenced by <a class="el" href="_abstract_c_o_d_e_c_8java_source.html#l00088">audio.AbstractCODEC.stopRinging()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> == null ) {
            <span class="keywordflow">return</span>;
        }

        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a444e7e71728fe7432a0b126bdbc14c7d">providingRingBack</a> ) 
        {
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a444e7e71728fe7432a0b126bdbc14c7d">providingRingBack</a> = <span class="keyword">false</span>;
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a8421933579303cade8ee11d8a27c7e1c">ringTimer</a> = -1;
            
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.stop();
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.flush();
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aafdbdd4c285fa683f67c9ed60ec5dabe"></a><!-- doxytag: member="audio::AudioInterfacePCM::writeBuffered" ref="aafdbdd4c285fa683f67c9ed60ec5dabe" args="(byte[] buff, long timestamp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.writeBuffered </td>
          <td>(</td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"> <em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"> <em>timestamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws IOException      <code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enqueue packet for playing into de-jitter buffer. </p>

<p>Implements <a class="el" href="interfaceaudio_1_1_audio_interface.html#a2cafd9bb65249be50d2de6de805fa56b">audio.AudioInterface</a>.</p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00524">524</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00039">audio.AudioInterfacePCM.FRAME_INTERVAL</a>, <a class="el" href="_audio_buffer_8java_source.html#l00026">audio.AudioBuffer.getByteArray()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00087">audio.AudioInterfacePCM.jitBufPut</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00086">audio.AudioInterfacePCM.playBuffer</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00045">audio.AudioInterfacePCM.propertyStereoRec</a>, <a class="el" href="_audio_buffer_8java_source.html#l00066">audio.AudioBuffer.setTimestamp()</a>, <a class="el" href="_audio_buffer_8java_source.html#l00042">audio.AudioBuffer.setWritten()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00081">audio.AudioInterfacePCM.sourceDataLine</a>.</p>

<p>Referenced by <a class="el" href="_abstract_c_o_d_e_c_8java_source.html#l00097">audio.AbstractCODEC.writeBuffered()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> == null ) {
            <span class="keywordflow">return</span>;
        }
        
        <span class="keywordtype">int</span> fno = (int) ( timestamp / (<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a56aa857ea0c1d4be48717f998d1156aa" title="Constructor for the AudioInterfacePCM object.">AudioInterfacePCM</a>.FRAME_INTERVAL ) );

        AudioBuffer ab = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">playBuffer</a>[ fno % this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">playBuffer</a>.length ];
        byte nbuff[] = ab.getByteArray ();
        
        <span class="keywordflow">if</span> ( <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a9cacb6cbc8a5e809dd66526d55c25fe9" title="Stereo recording.">propertyStereoRec</a> )
        {
            <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; nbuff.length / 4; ++i )
            {
                nbuff[i * 4] = 0; <span class="comment">// Left silent</span>
                nbuff[i * 4 + 1] = 0; <span class="comment">// Left silent</span>
                nbuff[i * 4 + 2] = buff[i * 2];
                nbuff[i * 4 + 3] = buff[i * 2 + 1];
            }
        }
        <span class="keywordflow">else</span> 
        {
            System.arraycopy( buff, 0, nbuff, 0, nbuff.length );
        }
        
        ab.setWritten ();
        ab.setTimestamp( timestamp );
        
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#af8887492c70b8f93c44b5735d23e1df8">jitBufPut</a> = fno;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a977fdebe2b72bb6ec25cb8378f903be6"></a><!-- doxytag: member="audio::AudioInterfacePCM::writeBuffersToAudioOutput" ref="a977fdebe2b72bb6ec25cb8378f903be6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long audio.AudioInterfacePCM.writeBuffersToAudioOutput </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Writes de-jittered audio frames to audio output. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">339</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00095">audio.AudioInterfacePCM.callLength</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00490">audio.AudioInterfacePCM.concealMissingDataForAudioOutput()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00092">audio.AudioInterfacePCM.deltaTimePlayerMinusMic</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00033">audio.AudioInterfacePCM.FRAME_COUNT</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00039">audio.AudioInterfacePCM.FRAME_INTERVAL</a>, <a class="el" href="_audio_buffer_8java_source.html#l00026">audio.AudioBuffer.getByteArray()</a>, <a class="el" href="_audio_buffer_8java_source.html#l00058">audio.AudioBuffer.getTimestamp()</a>, <a class="el" href="_audio_buffer_8java_source.html#l00034">audio.AudioBuffer.isWritten()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00090">audio.AudioInterfacePCM.jitBufFirst</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00089">audio.AudioInterfacePCM.jitBufFudge</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00088">audio.AudioInterfacePCM.jitBufGet</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00087">audio.AudioInterfacePCM.jitBufPut</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00076">audio.AudioInterfacePCM.lastMicTimestamp</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00036">audio.AudioInterfacePCM.LLBS</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00086">audio.AudioInterfacePCM.playBuffer</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00091">audio.AudioInterfacePCM.playerIsEnabled</a>, <a class="el" href="_audio_buffer_8java_source.html#l00050">audio.AudioBuffer.setRead()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00081">audio.AudioInterfacePCM.sourceDataLine</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01209">audio.AudioInterfacePCM.startPlay()</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00308">audio.AudioInterfacePCM.audioPlayerWorker()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> == null ) {
            <span class="keywordflow">return</span> 0;
        }
        
        <span class="keywordtype">int</span> top = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#af8887492c70b8f93c44b5735d23e1df8">jitBufPut</a>;
        <span class="keywordflow">if</span> ( top - this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aee33962ee7ebadc333180fe0018bfd1a">jitBufGet</a> &gt; this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">playBuffer</a>.length ) 
        {
            <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aee33962ee7ebadc333180fe0018bfd1a">jitBufGet</a> == 0 ) {
                this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aee33962ee7ebadc333180fe0018bfd1a">jitBufGet</a> = top;
            } <span class="keywordflow">else</span> {
                this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aee33962ee7ebadc333180fe0018bfd1a">jitBufGet</a> = top - this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">playBuffer</a>.length / 2;
            }
        }

        <span class="keywordflow">if</span> ( ! this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aa1b3c82ecfec3f3649c0ef7be46930ae">playerIsEnabled</a> )
        {
            <span class="comment">/* We start when we have half full the buffers, FRAME_COUNT is </span>
<span class="comment">             * usable buffer cap, size is twice that to keep history for AEC</span>
<span class="comment">             */</span>
            <span class="keywordflow">if</span> ( top - this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aee33962ee7ebadc333180fe0018bfd1a">jitBufGet</a> &gt;= ( <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aaf3425e0a5f95a6946afa900851b21f2" title="Audio buffering depth in number of frames.">FRAME_COUNT</a> + <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ae35a6c317142598025b4a0948e246288" title="Low-level water mark used for de-jittering.">LLBS</a> ) / 2 ) 
            {
                <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ab97ecaa78c0daa30e3df50dd79045991" title="Starts the audio output worker thread.">startPlay</a> ();

                this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a4df964cb5bff23964de4930ce3a91479">jitBufFirst</a> = <span class="keyword">true</span>;
            }
            <span class="keywordflow">else</span> 
            {
                <span class="keywordflow">return</span> <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec" title="Frame interval in milliseconds.">FRAME_INTERVAL</a>;
            }
        }

        <span class="keywordtype">int</span> sz = 320;
        <span class="keywordtype">boolean</span> fudgeSynch = <span class="keyword">true</span>;
        <span class="keywordtype">int</span> frameSize = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.getFormat().getFrameSize ();

        <span class="keywordflow">for</span> ( ; this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aee33962ee7ebadc333180fe0018bfd1a">jitBufGet</a> &lt;= top; ++this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aee33962ee7ebadc333180fe0018bfd1a">jitBufGet</a> ) 
        {
            AudioBuffer ab = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">playBuffer</a>[ this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aee33962ee7ebadc333180fe0018bfd1a">jitBufGet</a> % this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">playBuffer</a>.length ];
            byte[] obuff = ab.getByteArray ();
            <span class="keywordtype">int</span> avail = this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.available() / (obuff.length + 2);
            sz = obuff.length;

            <span class="comment">/* Take packet this.jitBufGet if available</span>
<span class="comment">             * Dejitter capacity: top - this.jitBufGet</span>
<span class="comment">             */</span>
            <span class="keywordflow">if</span> ( avail &gt; 0 ) 
            {
                <span class="keywordflow">if</span> ( ! ab.isWritten () ) <span class="comment">// Missing packet</span>
                {
                    <span class="comment">/* Flag indicating whether we decide to conceal </span>
<span class="comment">                     * vs to wait for missing data</span>
<span class="comment">                     */</span>
                    <span class="keywordtype">boolean</span> concealMissingBuffer = <span class="keyword">false</span>;
                    
                    <span class="keywordflow">if</span> ( avail &gt; <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ae35a6c317142598025b4a0948e246288" title="Low-level water mark used for de-jittering.">LLBS</a> - 2 ) {
                        <span class="comment">// Running out of sound</span>
                        concealMissingBuffer = <span class="keyword">true</span>;
                    }
                    <span class="keywordflow">if</span> ( ( top - this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aee33962ee7ebadc333180fe0018bfd1a">jitBufGet</a> ) &gt;= ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">playBuffer</a>.length - 2 ) ) {
                        <span class="comment">// Running out of buffers</span>
                        concealMissingBuffer = <span class="keyword">true</span>;
                    }
                    <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aee33962ee7ebadc333180fe0018bfd1a">jitBufGet</a> == 0 ) {
                        <span class="comment">// No data to conceal with</span>
                        concealMissingBuffer = <span class="keyword">false</span>;
                    }
                    
                    <span class="comment">/* Now conceal missing data or wait for it</span>
<span class="comment">                     */</span>
                    <span class="keywordflow">if</span> ( concealMissingBuffer ) {
                        <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a6d16c8a01c7b39a038fc7679d83513b4" title="Conceals missing data in the audio output buffer by averaging from samples taken from the the previou...">concealMissingDataForAudioOutput</a>(this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aee33962ee7ebadc333180fe0018bfd1a">jitBufGet</a>);
                    } <span class="keywordflow">else</span> {
                        <span class="keywordflow">break</span>; <span class="comment">// Waiting for missing data</span>
                    }
                }

                <span class="keywordtype">int</span> start = 0;
                <span class="keywordtype">int</span> len = obuff.length;
                
                <span class="comment">/* We do adjustments only if we have a timing reference from mic</span>
<span class="comment">                 */</span>
                <span class="keywordflow">if</span> ( fudgeSynch &amp;&amp; this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aa1b9cef4a2e6598565a6c219c605d75f">lastMicTimestamp</a> &gt; 0 
                        &amp;&amp; this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aa1b9cef4a2e6598565a6c219c605d75f">lastMicTimestamp</a> != Long.MAX_VALUE) 
                {
                    <span class="comment">/* Only one per writeBuff call cause we depend on this.lastMicTime</span>
<span class="comment">                     */</span>
                    fudgeSynch = <span class="keyword">false</span>;
                    <span class="keywordtype">long</span> delta = ab.getTimestamp() - this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aa1b9cef4a2e6598565a6c219c605d75f">lastMicTimestamp</a>;

                    <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a4df964cb5bff23964de4930ce3a91479">jitBufFirst</a> ) 
                    {
                        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a45f2f4a950843d72dff896e88bcb0cdb">deltaTimePlayerMinusMic</a> = delta;
                        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a4df964cb5bff23964de4930ce3a91479">jitBufFirst</a> = <span class="keyword">false</span>;
                    }
                    <span class="keywordflow">else</span> 
                    {
                        <span class="comment">/* If diff is positive, this means that the source clock is </span>
<span class="comment">                         * running faster than the audio clock so we lop a few bytes</span>
<span class="comment">                         * off and make a note of the fudge factor.</span>
<span class="comment">                         * If diff is negative, this means the audio clock is faster </span>
<span class="comment">                         * than the source clock so we make up a couple of samples</span>
<span class="comment">                         * and note down the fudge factor.</span>
<span class="comment">                         */</span>
                        <span class="keywordtype">int</span> diff = (int) ( delta - this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a45f2f4a950843d72dff896e88bcb0cdb">deltaTimePlayerMinusMic</a> );
                        
                        <span class="comment">/* We expect the output buffer to be full</span>
<span class="comment">                         */</span>
                        <span class="keywordtype">int</span> max = (int) Math.round( (<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ae35a6c317142598025b4a0948e246288" title="Low-level water mark used for de-jittering.">LLBS</a> / 2) * <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec" title="Frame interval in milliseconds.">FRAME_INTERVAL</a>);
                        
                        <span class="keywordflow">if</span> ( Math.abs(diff) &gt; <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec" title="Frame interval in milliseconds.">FRAME_INTERVAL</a> ) {
                            <span class="comment">// &quot;Delta = &quot; + delta + &quot; diff =&quot; + diff );</span>
                        }

                        <span class="keywordflow">if</span> ( diff &gt; max ) {
                            start = (diff &gt; (<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ae35a6c317142598025b4a0948e246288" title="Low-level water mark used for de-jittering.">LLBS</a> * <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec" title="Frame interval in milliseconds.">FRAME_INTERVAL</a>)) ?
                                frameSize * 2 : frameSize; <span class="comment">// panic ?</span>
                            len -= start;
                            <span class="comment">// Snip:  start / frameSize  sample(s)</span>
                            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a091cd2a0d6fbc3d84c45f1efcbaec8a0">jitBufFudge</a> -= start / frameSize;
                        }
                        <span class="keywordflow">if</span> (diff &lt; -1 * <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec" title="Frame interval in milliseconds.">FRAME_INTERVAL</a>) {
                            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.write( obuff, 0, frameSize );
                            <span class="comment">// Paste: added a sample</span>
                            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a091cd2a0d6fbc3d84c45f1efcbaec8a0">jitBufFudge</a> += 1;
                        }
                    }
                }
                
                <span class="comment">/* Now write data to audio output and mark audio buffer &#39;read&#39;</span>
<span class="comment">                 */</span>
                this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.write( obuff, start, len );
                this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#aa27a3b10a8d5730375706bb7c796a1f9" title="Measured call length in milliseconds.">callLength</a> += <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec" title="Frame interval in milliseconds.">FRAME_INTERVAL</a>;

                ab.setRead ();
            }
            <span class="keywordflow">else</span> <span class="comment">// No place for (more?) data in SDLB </span>
            {
                <span class="keywordflow">break</span>;
            }
        }
        
        <span class="keywordtype">long</span> ttd = ( ( sz * <a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#ae35a6c317142598025b4a0948e246288" title="Low-level water mark used for de-jittering.">LLBS</a> / 2 ) - this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.available() ) / 8;
        <span class="keywordflow">return</span> ttd;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a18602d498c9fd7285ff289ecdb604368"></a><!-- doxytag: member="audio::AudioInterfacePCM::writeDirectIfAvail" ref="a18602d498c9fd7285ff289ecdb604368" args="(byte[] samples)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long audio.AudioInterfacePCM.writeDirectIfAvail </td>
          <td>(</td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"> <em>samples</em>&#160;)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Writes audio samples to audio output directly (without using jitter buffer). </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>milliseconds to sleep (after which time next write should occur) </dd></dl>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00862">862</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00081">audio.AudioInterfacePCM.sourceDataLine</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00819">audio.AudioInterfacePCM.ringerWorker()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> == null ) {
            <span class="keywordflow">return</span> 0;
        }

        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.available () &gt; samples.length ) {
            this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.write( samples, 0, samples.length );
        }

        <span class="keywordtype">long</span> nap = ( samples.length * 2 - this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.available () ) / 8;
        <span class="keywordflow">return</span> nap;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a4e26b1c92ecfc4232464caf8ff638f32"></a><!-- doxytag: member="audio::AudioInterfacePCM::writeDirectly" ref="a4e26b1c92ecfc4232464caf8ff638f32" args="(byte[] buff)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void audio.AudioInterfacePCM.writeDirectly </td>
          <td>(</td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"> <em>buff</em>&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Writes directly to source line without buffering. </p>

<p>Implements <a class="el" href="interfaceaudio_1_1_audio_interface.html#a20ef88ae8653e7f7a640641591a172f7">audio.AudioInterface</a>.</p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00511">511</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>References <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00081">audio.AudioInterfacePCM.sourceDataLine</a>.</p>

<p>Referenced by <a class="el" href="_abstract_c_o_d_e_c_8java_source.html#l00118">audio.AbstractCODEC.writeDirectly()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a> == null ) {
            <span class="keywordflow">return</span>;
        }
        
        this.<a class="code" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">sourceDataLine</a>.write( buff, 0, buff.length );
    }
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="adde8057bc7b1ec00549c7a26dd5bd53d"></a><!-- doxytag: member="audio::AudioInterfacePCM::audioPlayerThread" ref="adde8057bc7b1ec00549c7a26dd5bd53d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile Thread <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#adde8057bc7b1ec00549c7a26dd5bd53d">audio.AudioInterfacePCM.audioPlayerThread</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00082">82</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00112">audio.AudioInterfacePCM.AudioInterfacePCM()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00308">audio.AudioInterfacePCM.audioPlayerWorker()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00236">audio.AudioInterfacePCM.cleanUp()</a>.</p>

</div>
</div>
<a class="anchor" id="a0af9cd70d7a4bf6bde276da5cd2ce176"></a><!-- doxytag: member="audio::AudioInterfacePCM::audioSender" ref="a0af9cd70d7a4bf6bde276da5cd2ce176" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="interfaceaudio_1_1_audio_interface_1_1_packetizer.html">Packetizer</a> <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a0af9cd70d7a4bf6bde276da5cd2ce176">audio.AudioInterfacePCM.audioSender</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00069">69</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00633">audio.AudioInterfacePCM.sendAudioFrame()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00225">audio.AudioInterfacePCM.setAudioSender()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01146">audio.AudioInterfacePCM.stopRecording()</a>.</p>

</div>
</div>
<a class="anchor" id="a680052f150cc3b669a8e3e69d0c57a4c"></a><!-- doxytag: member="audio::AudioInterfacePCM::audioSenderThread" ref="a680052f150cc3b669a8e3e69d0c57a4c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile Thread <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a680052f150cc3b669a8e3e69d0c57a4c">audio.AudioInterfacePCM.audioSenderThread</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00067">67</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00112">audio.AudioInterfacePCM.AudioInterfacePCM()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00236">audio.AudioInterfacePCM.cleanUp()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00561">audio.AudioInterfacePCM.pduSenderWorker()</a>.</p>

</div>
</div>
<a class="anchor" id="aa27a3b10a8d5730375706bb7c796a1f9"></a><!-- doxytag: member="audio::AudioInterfacePCM::callLength" ref="aa27a3b10a8d5730375706bb7c796a1f9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aa27a3b10a8d5730375706bb7c796a1f9">audio.AudioInterfacePCM.callLength</a> = 0<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Measured call length in milliseconds. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00095">95</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01209">audio.AudioInterfacePCM.startPlay()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01233">audio.AudioInterfacePCM.stopPlay()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">audio.AudioInterfacePCM.writeBuffersToAudioOutput()</a>.</p>

</div>
</div>
<a class="anchor" id="a45f2f4a950843d72dff896e88bcb0cdb"></a><!-- doxytag: member="audio::AudioInterfacePCM::deltaTimePlayerMinusMic" ref="a45f2f4a950843d72dff896e88bcb0cdb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a45f2f4a950843d72dff896e88bcb0cdb">audio.AudioInterfacePCM.deltaTimePlayerMinusMic</a> = 0<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00092">92</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">audio.AudioInterfacePCM.writeBuffersToAudioOutput()</a>.</p>

</div>
</div>
<a class="anchor" id="aaf3425e0a5f95a6946afa900851b21f2"></a><!-- doxytag: member="audio::AudioInterfacePCM::FRAME_COUNT" ref="aaf3425e0a5f95a6946afa900851b21f2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final int <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aaf3425e0a5f95a6946afa900851b21f2">audio.AudioInterfacePCM.FRAME_COUNT</a> = 10<code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Audio buffering depth in number of frames. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00033">33</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">audio.AudioInterfacePCM.writeBuffersToAudioOutput()</a>.</p>

</div>
</div>
<a class="anchor" id="a0d239e4b6a4d296d36b61e1045001dec"></a><!-- doxytag: member="audio::AudioInterfacePCM::FRAME_INTERVAL" ref="a0d239e4b6a4d296d36b61e1045001dec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final int <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a0d239e4b6a4d296d36b61e1045001dec">audio.AudioInterfacePCM.FRAME_INTERVAL</a> = 20<code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Frame interval in milliseconds. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00039">39</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00308">audio.AudioInterfacePCM.audioPlayerWorker()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00963">audio.AudioInterfacePCM.getAudioIn()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00912">audio.AudioInterfacePCM.getAudioOut()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00206">audio.AudioInterfacePCM.getSampleSize()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00561">audio.AudioInterfacePCM.pduSenderWorker()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00819">audio.AudioInterfacePCM.ringerWorker()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00524">audio.AudioInterfacePCM.writeBuffered()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">audio.AudioInterfacePCM.writeBuffersToAudioOutput()</a>.</p>

</div>
</div>
<a class="anchor" id="a4df964cb5bff23964de4930ce3a91479"></a><!-- doxytag: member="audio::AudioInterfacePCM::jitBufFirst" ref="a4df964cb5bff23964de4930ce3a91479" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a4df964cb5bff23964de4930ce3a91479">audio.AudioInterfacePCM.jitBufFirst</a> = true<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00090">90</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">audio.AudioInterfacePCM.writeBuffersToAudioOutput()</a>.</p>

</div>
</div>
<a class="anchor" id="a091cd2a0d6fbc3d84c45f1efcbaec8a0"></a><!-- doxytag: member="audio::AudioInterfacePCM::jitBufFudge" ref="a091cd2a0d6fbc3d84c45f1efcbaec8a0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a091cd2a0d6fbc3d84c45f1efcbaec8a0">audio.AudioInterfacePCM.jitBufFudge</a> = 0<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00089">89</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01209">audio.AudioInterfacePCM.startPlay()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01233">audio.AudioInterfacePCM.stopPlay()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">audio.AudioInterfacePCM.writeBuffersToAudioOutput()</a>.</p>

</div>
</div>
<a class="anchor" id="aee33962ee7ebadc333180fe0018bfd1a"></a><!-- doxytag: member="audio::AudioInterfacePCM::jitBufGet" ref="aee33962ee7ebadc333180fe0018bfd1a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aee33962ee7ebadc333180fe0018bfd1a">audio.AudioInterfacePCM.jitBufGet</a> = 0<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00088">88</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01209">audio.AudioInterfacePCM.startPlay()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01233">audio.AudioInterfacePCM.stopPlay()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">audio.AudioInterfacePCM.writeBuffersToAudioOutput()</a>.</p>

</div>
</div>
<a class="anchor" id="af8887492c70b8f93c44b5735d23e1df8"></a><!-- doxytag: member="audio::AudioInterfacePCM::jitBufPut" ref="af8887492c70b8f93c44b5735d23e1df8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#af8887492c70b8f93c44b5735d23e1df8">audio.AudioInterfacePCM.jitBufPut</a> = 0<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00087">87</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01209">audio.AudioInterfacePCM.startPlay()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01233">audio.AudioInterfacePCM.stopPlay()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00524">audio.AudioInterfacePCM.writeBuffered()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">audio.AudioInterfacePCM.writeBuffersToAudioOutput()</a>.</p>

</div>
</div>
<a class="anchor" id="aa1b9cef4a2e6598565a6c219c605d75f"></a><!-- doxytag: member="audio::AudioInterfacePCM::lastMicTimestamp" ref="aa1b9cef4a2e6598565a6c219c605d75f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aa1b9cef4a2e6598565a6c219c605d75f">audio.AudioInterfacePCM.lastMicTimestamp</a> = 0<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00076">76</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00673">audio.AudioInterfacePCM.micDataRead()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01163">audio.AudioInterfacePCM.startRecording()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">audio.AudioInterfacePCM.writeBuffersToAudioOutput()</a>.</p>

</div>
</div>
<a class="anchor" id="ae35a6c317142598025b4a0948e246288"></a><!-- doxytag: member="audio::AudioInterfacePCM::LLBS" ref="ae35a6c317142598025b4a0948e246288" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final int <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#ae35a6c317142598025b4a0948e246288">audio.AudioInterfacePCM.LLBS</a> = 6<code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Low-level water mark used for de-jittering. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00036">36</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00963">audio.AudioInterfacePCM.getAudioIn()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00912">audio.AudioInterfacePCM.getAudioOut()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">audio.AudioInterfacePCM.writeBuffersToAudioOutput()</a>.</p>

</div>
</div>
<a class="anchor" id="abde473853cc1611badc798569426b5e3"></a><!-- doxytag: member="audio::AudioInterfacePCM::micBufGet" ref="abde473853cc1611badc798569426b5e3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#abde473853cc1611badc798569426b5e3">audio.AudioInterfacePCM.micBufGet</a> = 0<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00075">75</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00722">audio.AudioInterfacePCM.readWithTimestamp()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01163">audio.AudioInterfacePCM.startRecording()</a>.</p>

</div>
</div>
<a class="anchor" id="a5b4217c3bd882244f8ac04b44c33efeb"></a><!-- doxytag: member="audio::AudioInterfacePCM::micBufPut" ref="a5b4217c3bd882244f8ac04b44c33efeb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a5b4217c3bd882244f8ac04b44c33efeb">audio.AudioInterfacePCM.micBufPut</a> = 0<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00074">74</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00673">audio.AudioInterfacePCM.micDataRead()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00722">audio.AudioInterfacePCM.readWithTimestamp()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01163">audio.AudioInterfacePCM.startRecording()</a>.</p>

</div>
</div>
<a class="anchor" id="a9959ec3aa6a4bbb9657230992cd1c530"></a><!-- doxytag: member="audio::AudioInterfacePCM::micRecorderThread" ref="a9959ec3aa6a4bbb9657230992cd1c530" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile Thread <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a9959ec3aa6a4bbb9657230992cd1c530">audio.AudioInterfacePCM.micRecorderThread</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00068">68</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00236">audio.AudioInterfacePCM.cleanUp()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00651">audio.AudioInterfacePCM.micRecorderWorker()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01163">audio.AudioInterfacePCM.startRecording()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01146">audio.AudioInterfacePCM.stopRecording()</a>.</p>

</div>
</div>
<a class="anchor" id="ab9e7049323e1e82296172246d18faa79"></a><!-- doxytag: member="audio::AudioInterfacePCM::mono44k" ref="ab9e7049323e1e82296172246d18faa79" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AudioFormat <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#ab9e7049323e1e82296172246d18faa79">audio.AudioInterfacePCM.mono44k</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00061">61</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00112">audio.AudioInterfacePCM.AudioInterfacePCM()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00963">audio.AudioInterfacePCM.getAudioIn()</a>.</p>

</div>
</div>
<a class="anchor" id="adc0d0060e3438e565f444932f65f3a5c"></a><!-- doxytag: member="audio::AudioInterfacePCM::mono8k" ref="adc0d0060e3438e565f444932f65f3a5c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AudioFormat <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#adc0d0060e3438e565f444932f65f3a5c">audio.AudioInterfacePCM.mono8k</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00059">59</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00112">audio.AudioInterfacePCM.AudioInterfacePCM()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00963">audio.AudioInterfacePCM.getAudioIn()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00912">audio.AudioInterfacePCM.getAudioOut()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00206">audio.AudioInterfacePCM.getSampleSize()</a>.</p>

</div>
</div>
<a class="anchor" id="a1672aa09638b44785beef0176aa69efa"></a><!-- doxytag: member="audio::AudioInterfacePCM::playBuffer" ref="a1672aa09638b44785beef0176aa69efa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classaudio_1_1_audio_buffer.html">AudioBuffer</a> [] <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a1672aa09638b44785beef0176aa69efa">audio.AudioInterfacePCM.playBuffer</a> = new <a class="el" href="classaudio_1_1_audio_buffer.html">AudioBuffer</a>[ <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aaf3425e0a5f95a6946afa900851b21f2">FRAME_COUNT</a> + <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aaf3425e0a5f95a6946afa900851b21f2">FRAME_COUNT</a> ]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00086">86</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00490">audio.AudioInterfacePCM.concealMissingDataForAudioOutput()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00912">audio.AudioInterfacePCM.getAudioOut()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00524">audio.AudioInterfacePCM.writeBuffered()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">audio.AudioInterfacePCM.writeBuffersToAudioOutput()</a>.</p>

</div>
</div>
<a class="anchor" id="aa1b3c82ecfec3f3649c0ef7be46930ae"></a><!-- doxytag: member="audio::AudioInterfacePCM::playerIsEnabled" ref="aa1b3c82ecfec3f3649c0ef7be46930ae" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aa1b3c82ecfec3f3649c0ef7be46930ae">audio.AudioInterfacePCM.playerIsEnabled</a> = false<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00091">91</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01209">audio.AudioInterfacePCM.startPlay()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01233">audio.AudioInterfacePCM.stopPlay()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">audio.AudioInterfacePCM.writeBuffersToAudioOutput()</a>.</p>

</div>
</div>
<a class="anchor" id="a8985a34cd10fe8c779ccb11fc5506433"></a><!-- doxytag: member="audio::AudioInterfacePCM::propertyBigBuff" ref="a8985a34cd10fe8c779ccb11fc5506433" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a8985a34cd10fe8c779ccb11fc5506433">audio.AudioInterfacePCM.propertyBigBuff</a> = false<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Big buffers. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00048">48</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00963">audio.AudioInterfacePCM.getAudioIn()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00912">audio.AudioInterfacePCM.getAudioOut()</a>.</p>

</div>
</div>
<a class="anchor" id="aa0e89b3cb9891d3450057cc0757b928f"></a><!-- doxytag: member="audio::AudioInterfacePCM::propertyInputDeviceName" ref="aa0e89b3cb9891d3450057cc0757b928f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aa0e89b3cb9891d3450057cc0757b928f">audio.AudioInterfacePCM.propertyInputDeviceName</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Input device name. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00051">51</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00963">audio.AudioInterfacePCM.getAudioIn()</a>.</p>

</div>
</div>
<a class="anchor" id="a09f053105d729955ad30dc58e2b9ba6a"></a><!-- doxytag: member="audio::AudioInterfacePCM::propertyOutputDeviceName" ref="a09f053105d729955ad30dc58e2b9ba6a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a09f053105d729955ad30dc58e2b9ba6a">audio.AudioInterfacePCM.propertyOutputDeviceName</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Output device name. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00054">54</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00912">audio.AudioInterfacePCM.getAudioOut()</a>.</p>

</div>
</div>
<a class="anchor" id="a9cacb6cbc8a5e809dd66526d55c25fe9"></a><!-- doxytag: member="audio::AudioInterfacePCM::propertyStereoRec" ref="a9cacb6cbc8a5e809dd66526d55c25fe9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a9cacb6cbc8a5e809dd66526d55c25fe9">audio.AudioInterfacePCM.propertyStereoRec</a> = false<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stereo recording. </p>

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00045">45</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00963">audio.AudioInterfacePCM.getAudioIn()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00912">audio.AudioInterfacePCM.getAudioOut()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00524">audio.AudioInterfacePCM.writeBuffered()</a>.</p>

</div>
</div>
<a class="anchor" id="a444e7e71728fe7432a0b126bdbc14c7d"></a><!-- doxytag: member="audio::AudioInterfacePCM::providingRingBack" ref="a444e7e71728fe7432a0b126bdbc14c7d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a444e7e71728fe7432a0b126bdbc14c7d">audio.AudioInterfacePCM.providingRingBack</a> = false<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00104">104</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00819">audio.AudioInterfacePCM.ringerWorker()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01300">audio.AudioInterfacePCM.startRinging()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01315">audio.AudioInterfacePCM.stopRinging()</a>.</p>

</div>
</div>
<a class="anchor" id="a925b1f60214a2d854c8b4ea88c2b6a05"></a><!-- doxytag: member="audio::AudioInterfacePCM::recordBuffer" ref="a925b1f60214a2d854c8b4ea88c2b6a05" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classaudio_1_1_audio_buffer.html">AudioBuffer</a> [] <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a925b1f60214a2d854c8b4ea88c2b6a05">audio.AudioInterfacePCM.recordBuffer</a> = new <a class="el" href="classaudio_1_1_audio_buffer.html">AudioBuffer</a>[ <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#aaf3425e0a5f95a6946afa900851b21f2">FRAME_COUNT</a> ]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00073">73</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00963">audio.AudioInterfacePCM.getAudioIn()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00673">audio.AudioInterfacePCM.micDataRead()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00722">audio.AudioInterfacePCM.readWithTimestamp()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01163">audio.AudioInterfacePCM.startRecording()</a>.</p>

</div>
</div>
<a class="anchor" id="a330d678330903d0b84ea92d8ffacdd41"></a><!-- doxytag: member="audio::AudioInterfacePCM::ringerThread" ref="a330d678330903d0b84ea92d8ffacdd41" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile Thread <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a330d678330903d0b84ea92d8ffacdd41">audio.AudioInterfacePCM.ringerThread</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00100">100</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00112">audio.AudioInterfacePCM.AudioInterfacePCM()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00236">audio.AudioInterfacePCM.cleanUp()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00819">audio.AudioInterfacePCM.ringerWorker()</a>.</p>

</div>
</div>
<a class="anchor" id="ac2cebb2c236a76fa81365b6d6f3edc7c"></a><!-- doxytag: member="audio::AudioInterfacePCM::ringSamples" ref="ac2cebb2c236a76fa81365b6d6f3edc7c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte [] <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#ac2cebb2c236a76fa81365b6d6f3edc7c">audio.AudioInterfacePCM.ringSamples</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00101">101</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00879">audio.AudioInterfacePCM.initializeRingerSamples()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00819">audio.AudioInterfacePCM.ringerWorker()</a>.</p>

</div>
</div>
<a class="anchor" id="a8421933579303cade8ee11d8a27c7e1c"></a><!-- doxytag: member="audio::AudioInterfacePCM::ringTimer" ref="a8421933579303cade8ee11d8a27c7e1c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a8421933579303cade8ee11d8a27c7e1c">audio.AudioInterfacePCM.ringTimer</a> = -1<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00105">105</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00819">audio.AudioInterfacePCM.ringerWorker()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01315">audio.AudioInterfacePCM.stopRinging()</a>.</p>

</div>
</div>
<a class="anchor" id="ac757be02435f4d7ced0f50ed905ef1d1"></a><!-- doxytag: member="audio::AudioInterfacePCM::silenceSamples" ref="ac757be02435f4d7ced0f50ed905ef1d1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte [] <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#ac757be02435f4d7ced0f50ed905ef1d1">audio.AudioInterfacePCM.silenceSamples</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00102">102</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00879">audio.AudioInterfacePCM.initializeRingerSamples()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00722">audio.AudioInterfacePCM.readWithTimestamp()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00819">audio.AudioInterfacePCM.ringerWorker()</a>.</p>

</div>
</div>
<a class="anchor" id="a30fcdda949d2876a9629e4dd1c2f553e"></a><!-- doxytag: member="audio::AudioInterfacePCM::sourceDataLine" ref="a30fcdda949d2876a9629e4dd1c2f553e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SourceDataLine <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a30fcdda949d2876a9629e4dd1c2f553e">audio.AudioInterfacePCM.sourceDataLine</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00081">81</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00112">audio.AudioInterfacePCM.AudioInterfacePCM()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00308">audio.AudioInterfacePCM.audioPlayerWorker()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00236">audio.AudioInterfacePCM.cleanUp()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00912">audio.AudioInterfacePCM.getAudioOut()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00819">audio.AudioInterfacePCM.ringerWorker()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01209">audio.AudioInterfacePCM.startPlay()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01300">audio.AudioInterfacePCM.startRinging()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01233">audio.AudioInterfacePCM.stopPlay()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01315">audio.AudioInterfacePCM.stopRinging()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00524">audio.AudioInterfacePCM.writeBuffered()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00339">audio.AudioInterfacePCM.writeBuffersToAudioOutput()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00862">audio.AudioInterfacePCM.writeDirectIfAvail()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00511">audio.AudioInterfacePCM.writeDirectly()</a>.</p>

</div>
</div>
<a class="anchor" id="a33fe0388f112281a50c29dd64997b168"></a><!-- doxytag: member="audio::AudioInterfacePCM::stereo8k" ref="a33fe0388f112281a50c29dd64997b168" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AudioFormat <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#a33fe0388f112281a50c29dd64997b168">audio.AudioInterfacePCM.stereo8k</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00060">60</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00112">audio.AudioInterfacePCM.AudioInterfacePCM()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00963">audio.AudioInterfacePCM.getAudioIn()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00912">audio.AudioInterfacePCM.getAudioOut()</a>.</p>

</div>
</div>
<a class="anchor" id="ad45fa09d9f496621cadad56bfbd9229c"></a><!-- doxytag: member="audio::AudioInterfacePCM::targetDataLine" ref="ad45fa09d9f496621cadad56bfbd9229c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TargetDataLine <a class="el" href="classaudio_1_1_audio_interface_p_c_m.html#ad45fa09d9f496621cadad56bfbd9229c">audio.AudioInterfacePCM.targetDataLine</a> = null<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00066">66</a> of file <a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a>.</p>

<p>Referenced by <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00112">audio.AudioInterfacePCM.AudioInterfacePCM()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00236">audio.AudioInterfacePCM.cleanUp()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00963">audio.AudioInterfacePCM.getAudioIn()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00673">audio.AudioInterfacePCM.micDataRead()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00651">audio.AudioInterfacePCM.micRecorderWorker()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l00561">audio.AudioInterfacePCM.pduSenderWorker()</a>, <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01163">audio.AudioInterfacePCM.startRecording()</a>, and <a class="el" href="_audio_interface_p_c_m_8java_source.html#l01146">audio.AudioInterfacePCM.stopRecording()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>audio/<a class="el" href="_audio_interface_p_c_m_8java_source.html">AudioInterfacePCM.java</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Dec 16 2010 14:44:44 for VoIP Kryptofon by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
