<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_22) on Thu Dec 16 14:26:20 CET 2010 -->
<TITLE>
CallContext
</TITLE>

<META NAME="date" CONTENT="2010-12-16">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="CallContext";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../protocol/DatagramChannel.html" title="class in protocol"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?protocol/CallContext.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="CallContext.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
protocol</FONT>
<BR>
Class CallContext</H2>
<PRE>
java.lang.Object
  <IMG SRC="../resources/inherit.gif" ALT="extended by "><B>protocol.CallContext</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>CallContext</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
CallContext deals with all the packets that are part of a specific call.

  The thing to remember is that a <em>received</em> message contains fields 
  with the <em>senders</em> viewpoint so <em>source</em> is the far end and 
  <em>dest</em> is us. in the reply the oposite is true: <em>source</em> 
  is us and <em>dest</em> is them.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Mikica B Kocic</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;<A HREF="../audio/AudioInterface.html" title="interface in audio">AudioInterface</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#audioInterface">audioInterface</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The audio interface used to play/record for our voice PDUs</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#callEstablished">callEstablished</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The flag that indicates that the call is established</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#destinationCallNumber">destinationCallNumber</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Represents the Destination Call Number in the PDU header</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#inSeqNo">inSeqNo</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The inbound stream sequence number</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#outSeqNo">outSeqNo</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The outbound stream sequence number</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#receivedFirstVoicePDU">receivedFirstVoicePDU</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Used by onReceivedVoicePDU() to stop ringing</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../protocol/RemotePeer.html" title="class in protocol">RemotePeer</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#remotePeer">remotePeer</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The remote peer; owner of the call</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#sourceCallNumber">sourceCallNumber</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Represents the Source Call Number in the PDU header</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#startTimestamp">startTimestamp</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The start time-stamp of the call</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../protocol/CallContext.html#CallContext(protocol.RemotePeer, audio.AudioInterface)">CallContext</A></B>(<A HREF="../protocol/RemotePeer.html" title="class in protocol">RemotePeer</A>&nbsp;remotePeer,
            <A HREF="../audio/AudioInterface.html" title="interface in audio">AudioInterface</A>&nbsp;audioInterface)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The outbound constructor for Call.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../protocol/ProtocolDataUnit.html" title="class in protocol">ProtocolDataUnit</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#addIn(protocol.ProtocolDataUnit)">addIn</A></B>(<A HREF="../protocol/ProtocolDataUnit.html" title="class in protocol">ProtocolDataUnit</A>&nbsp;pdu)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Passed a newly arrived PDU.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#audioWrite(byte[], long)">audioWrite</A></B>(byte[]&nbsp;bs,
           long&nbsp;timestamp)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Writes audio data to the speaker.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#cleanUp()">cleanUp</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cleans up and detaches call from peer</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#getAudioSampleSize()">getAudioSampleSize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the audio interface sample size (used to determine size of the VoicePDU).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#getDestinationCallNumber()">getDestinationCallNumber</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the remote call number.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#getInSeqNo()">getInSeqNo</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the inbound stream sequence number.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#getOutSeqNo()">getOutSeqNo</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the outbound stream sequence number, oSeqno.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#getOutSeqNoInc()">getOutSeqNoInc</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generates a new outbound stream sequence number.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#getSourceCallNumber()">getSourceCallNumber</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the local call number.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#getStartTimestamp()">getStartTimestamp</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the start time-stamp of the call.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#getTimestamp()">getTimestamp</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the timestamp of this call.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#isEstablished()">isEstablished</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns if this call has been callAnswered.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#onReceivedVoicePDU(long, byte[])">onReceivedVoicePDU</A></B>(long&nbsp;timestamp,
                   byte[]&nbsp;audioSample)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Notifies us that a Voice PDU has been received.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#resetClock()">resetClock</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Resets the clock.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#send(utils.OctetBuffer)">send</A></B>(<A HREF="../utils/OctetBuffer.html" title="class in utils">OctetBuffer</A>&nbsp;pdu)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sends a PDU to our peer.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#setCallEstablished(boolean)">setCallEstablished</A></B>(boolean&nbsp;established)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets if this call is established.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#setDestinationCallNumber(int)">setDestinationCallNumber</A></B>(int&nbsp;callNo)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the remote call number as a character.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#setInSeqNo(int)">setInSeqNo</A></B>(int&nbsp;next)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the inbound stream sequence number.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#setSourceCallNumber(int)">setSourceCallNumber</A></B>(int&nbsp;callNo)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the local call number as a character.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#startAudioRecording()">startAudioRecording</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Starts sending our audio interface recording.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../protocol/CallContext.html#stopAudioRecording()">stopAudioRecording</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stops sending audio</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="sourceCallNumber"><!-- --></A><H3>
sourceCallNumber</H3>
<PRE>
private int <B>sourceCallNumber</B></PRE>
<DL>
<DD>Represents the Source Call Number in the PDU header
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="destinationCallNumber"><!-- --></A><H3>
destinationCallNumber</H3>
<PRE>
private int <B>destinationCallNumber</B></PRE>
<DL>
<DD>Represents the Destination Call Number in the PDU header
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="outSeqNo"><!-- --></A><H3>
outSeqNo</H3>
<PRE>
private int <B>outSeqNo</B></PRE>
<DL>
<DD>The outbound stream sequence number
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="inSeqNo"><!-- --></A><H3>
inSeqNo</H3>
<PRE>
private int <B>inSeqNo</B></PRE>
<DL>
<DD>The inbound stream sequence number
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="startTimestamp"><!-- --></A><H3>
startTimestamp</H3>
<PRE>
private long <B>startTimestamp</B></PRE>
<DL>
<DD>The start time-stamp of the call
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="remotePeer"><!-- --></A><H3>
remotePeer</H3>
<PRE>
private <A HREF="../protocol/RemotePeer.html" title="class in protocol">RemotePeer</A> <B>remotePeer</B></PRE>
<DL>
<DD>The remote peer; owner of the call
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="audioInterface"><!-- --></A><H3>
audioInterface</H3>
<PRE>
<A HREF="../audio/AudioInterface.html" title="interface in audio">AudioInterface</A> <B>audioInterface</B></PRE>
<DL>
<DD>The audio interface used to play/record for our voice PDUs
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="callEstablished"><!-- --></A><H3>
callEstablished</H3>
<PRE>
private boolean <B>callEstablished</B></PRE>
<DL>
<DD>The flag that indicates that the call is established
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="receivedFirstVoicePDU"><!-- --></A><H3>
receivedFirstVoicePDU</H3>
<PRE>
private boolean <B>receivedFirstVoicePDU</B></PRE>
<DL>
<DD>Used by onReceivedVoicePDU() to stop ringing
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="CallContext(protocol.RemotePeer, audio.AudioInterface)"><!-- --></A><H3>
CallContext</H3>
<PRE>
public <B>CallContext</B>(<A HREF="../protocol/RemotePeer.html" title="class in protocol">RemotePeer</A>&nbsp;remotePeer,
                   <A HREF="../audio/AudioInterface.html" title="interface in audio">AudioInterface</A>&nbsp;audioInterface)</PRE>
<DL>
<DD>The outbound constructor for Call. We know nothing except where to send it.
<P>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getOutSeqNoInc()"><!-- --></A><H3>
getOutSeqNoInc</H3>
<PRE>
public int <B>getOutSeqNoInc</B>()</PRE>
<DL>
<DD>Generates a new outbound stream sequence number.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getOutSeqNo()"><!-- --></A><H3>
getOutSeqNo</H3>
<PRE>
public int <B>getOutSeqNo</B>()</PRE>
<DL>
<DD>Returns the outbound stream sequence number, oSeqno.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getInSeqNo()"><!-- --></A><H3>
getInSeqNo</H3>
<PRE>
public int <B>getInSeqNo</B>()</PRE>
<DL>
<DD>Returns the inbound stream sequence number.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setInSeqNo(int)"><!-- --></A><H3>
setInSeqNo</H3>
<PRE>
public void <B>setInSeqNo</B>(int&nbsp;next)</PRE>
<DL>
<DD>Sets the inbound stream sequence number.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="send(utils.OctetBuffer)"><!-- --></A><H3>
send</H3>
<PRE>
public void <B>send</B>(<A HREF="../utils/OctetBuffer.html" title="class in utils">OctetBuffer</A>&nbsp;pdu)</PRE>
<DL>
<DD>Sends a PDU to our peer.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>pdu</CODE> - The PDU (in bytes)</DL>
</DD>
</DL>
<HR>

<A NAME="getTimestamp()"><!-- --></A><H3>
getTimestamp</H3>
<PRE>
public int <B>getTimestamp</B>()</PRE>
<DL>
<DD>Returns the timestamp of this call. This is the number of milliseconds 
  since the call started.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="startAudioRecording()"><!-- --></A><H3>
startAudioRecording</H3>
<PRE>
private void <B>startAudioRecording</B>()</PRE>
<DL>
<DD>Starts sending our audio interface recording. This method creates a new
  VoicePduSender object to do that.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="stopAudioRecording()"><!-- --></A><H3>
stopAudioRecording</H3>
<PRE>
public void <B>stopAudioRecording</B>()</PRE>
<DL>
<DD>Stops sending audio
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setCallEstablished(boolean)"><!-- --></A><H3>
setCallEstablished</H3>
<PRE>
public void <B>setCallEstablished</B>(boolean&nbsp;established)</PRE>
<DL>
<DD>Sets if this call is established.
  This can either be when we receive a ANSWER PDU from our peer
  to an outbound call, or when we answer an incoming call ourselves.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isEstablished()"><!-- --></A><H3>
isEstablished</H3>
<PRE>
public boolean <B>isEstablished</B>()</PRE>
<DL>
<DD>Returns if this call has been callAnswered.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="audioWrite(byte[], long)"><!-- --></A><H3>
audioWrite</H3>
<PRE>
public void <B>audioWrite</B>(byte[]&nbsp;bs,
                       long&nbsp;timestamp)
                throws java.io.IOException</PRE>
<DL>
<DD>Writes audio data to the speaker.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>bs</CODE> - The incoming audio payload<DD><CODE>timestamp</CODE> - The time-stamp
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - Description of Exception</DL>
</DD>
</DL>
<HR>

<A NAME="onReceivedVoicePDU(long, byte[])"><!-- --></A><H3>
onReceivedVoicePDU</H3>
<PRE>
public void <B>onReceivedVoicePDU</B>(long&nbsp;timestamp,
                               byte[]&nbsp;audioSample)</PRE>
<DL>
<DD>Notifies us that a Voice PDU has been received.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setSourceCallNumber(int)"><!-- --></A><H3>
setSourceCallNumber</H3>
<PRE>
public void <B>setSourceCallNumber</B>(int&nbsp;callNo)</PRE>
<DL>
<DD>Sets the local call number as a character.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getSourceCallNumber()"><!-- --></A><H3>
getSourceCallNumber</H3>
<PRE>
public int <B>getSourceCallNumber</B>()</PRE>
<DL>
<DD>Returns the local call number. Together with the remote call
  number, they uniquely identify the call between two parties.

  On an outgoing call this represents 'Source Call Number', and
  on an incoming call this represents 'Destination Call Number'.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setDestinationCallNumber(int)"><!-- --></A><H3>
setDestinationCallNumber</H3>
<PRE>
public void <B>setDestinationCallNumber</B>(int&nbsp;callNo)</PRE>
<DL>
<DD>Sets the remote call number as a character. This bit of information comes 
  in with received accept call.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getDestinationCallNumber()"><!-- --></A><H3>
getDestinationCallNumber</H3>
<PRE>
public int <B>getDestinationCallNumber</B>()</PRE>
<DL>
<DD>Returns the remote call number. Together with the local call
  number, they uniquely identify the call between two parties.

  On an outgoing call this represents 'Destination Call Number', and
  on an inbound call this represents 'Source Call Number'.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="resetClock()"><!-- --></A><H3>
resetClock</H3>
<PRE>
public void <B>resetClock</B>()</PRE>
<DL>
<DD>Resets the clock. This method sets the start timestamp of a new call.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getStartTimestamp()"><!-- --></A><H3>
getStartTimestamp</H3>
<PRE>
public long <B>getStartTimestamp</B>()</PRE>
<DL>
<DD>Returns the start time-stamp of the call.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="addIn(protocol.ProtocolDataUnit)"><!-- --></A><H3>
addIn</H3>
<PRE>
public <A HREF="../protocol/ProtocolDataUnit.html" title="class in protocol">ProtocolDataUnit</A> <B>addIn</B>(<A HREF="../protocol/ProtocolDataUnit.html" title="class in protocol">ProtocolDataUnit</A>&nbsp;pdu)</PRE>
<DL>
<DD>Passed a newly arrived PDU. If the PDU is the next one we
  are expecting, then put it in the buffer and adjust our
  expectations. Return it, so it can be acted upon. If it isn't
  the next expected then ignore it and return null (Warn).
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="cleanUp()"><!-- --></A><H3>
cleanUp</H3>
<PRE>
public void <B>cleanUp</B>()</PRE>
<DL>
<DD>Cleans up and detaches call from peer
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getAudioSampleSize()"><!-- --></A><H3>
getAudioSampleSize</H3>
<PRE>
public int <B>getAudioSampleSize</B>()</PRE>
<DL>
<DD>Returns the audio interface sample size (used to determine size of the VoicePDU).
<P>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../protocol/DatagramChannel.html" title="class in protocol"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?protocol/CallContext.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="CallContext.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
