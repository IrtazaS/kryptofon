<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>VoIP Kryptofon: protocol.DatagramChannel Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="namespaceprotocol.html">protocol</a>      </li>
      <li><a class="el" href="classprotocol_1_1_datagram_channel.html">DatagramChannel</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a>  </div>
  <div class="headertitle">
<h1>protocol.DatagramChannel Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="protocol::DatagramChannel" -->
<p>Binds the UDP port.  
<a href="#_details">More...</a></p>
<!-- startSectionHeader --><div class="dynheader">
Collaboration diagram for protocol.DatagramChannel:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="classprotocol_1_1_datagram_channel__coll__graph.png" border="0" usemap="#protocol_8_datagram_channel_coll__map" alt="Collaboration graph"/></div>
<map name="protocol_8_datagram_channel_coll__map" id="protocol_8_datagram_channel_coll__map">
<area shape="rect" id="node4" href="classprotocol_1_1_remote_peer.html" title="Encapsulates the link between the UDP channel and a CallContext." alt="" coords="209,1017,372,1397"/><area shape="rect" id="node11" href="classprotocol_1_1_call_context.html" title="CallContext deals with all the packets that are part of a specific call." alt="" coords="107,1465,299,2053"/><area shape="rect" id="node14" href="interfaceaudio_1_1_audio_interface.html" title="The abstract audio interface." alt="" coords="5,1051,176,1362"/><area shape="rect" id="node16" href="classcrypto_1_1_symmetric_cipher.html" title="Instances of the Symmetric cipher class arew used to cipher peer&#45;to&#45;peer datagram packets..." alt="" coords="437,157,600,485"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center><!-- endSectionContent --></div>

<p><a href="classprotocol_1_1_datagram_channel-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#a56b14d993b94d6c4b22327e714e9e3ca">DatagramChannel</a> (int <a class="el" href="classprotocol_1_1_datagram_channel.html#a926c1ccc3eea5b56e4d9baa9a745174c">localPort</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the <a class="el" href="classprotocol_1_1_datagram_channel.html" title="Binds the UDP port.">DatagramChannel</a> object.  <a href="#a56b14d993b94d6c4b22327e714e9e3ca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#a6655236f8322711b91ef0f9b799f892f">getLocalPort</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns used local UDP port.  <a href="#a6655236f8322711b91ef0f9b799f892f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#a126ecd1b608a2e495e93ffc6d768c91b">useSymmetricCipher</a> (<a class="el" href="classcrypto_1_1_symmetric_cipher.html">SymmetricCipher</a> cipherEngine)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets cipher to be used for PDU ciphering.  <a href="#a126ecd1b608a2e495e93ffc6d768c91b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcrypto_1_1_symmetric_cipher.html">SymmetricCipher</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#a5396fcc387e78a8bb6c318153683069e">getUsedSymmetricCipher</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets current cipher used for PDU ciphering.  <a href="#a5396fcc387e78a8bb6c318153683069e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#aa27135d909a5593e235d3fbb5e87b3dd">addNewPeer</a> (<a class="el" href="classprotocol_1_1_remote_peer.html">RemotePeer</a> <a class="el" href="classprotocol_1_1_datagram_channel.html#ac90f54ba4db87ab51be77e1655a96d5c">remotePeer</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds new peer to receive incoming PDUs.  <a href="#aa27135d909a5593e235d3fbb5e87b3dd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#a221b7dbd0fef9631bb96cff8fc871cb2">hasRemotePeer</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns if there is active remote peer.  <a href="#a221b7dbd0fef9631bb96cff8fc871cb2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classprotocol_1_1_remote_peer.html">RemotePeer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#abe4c6003fc0e76a7082fc2a7e923a2d0">getRemotePeer</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the remote peer.  <a href="#abe4c6003fc0e76a7082fc2a7e923a2d0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#ae8dd033afe87b2135f8f004d05a7f62a">isPearDead</a> (int maxIdleTimeMillis)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns if peer seems to be dead (we are not receiving PDUs from it).  <a href="#ae8dd033afe87b2135f8f004d05a7f62a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#a353a747cc114cba3204e1fc2ecfc7ffc">removePeer</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Detaches peer and all its call from the UDP receiver.  <a href="#a353a747cc114cba3204e1fc2ecfc7ffc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#ac1d41f5824bc43b750eb6d681fd74b9c">stop</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops PDU receiver thread.  <a href="#ac1d41f5824bc43b750eb6d681fd74b9c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#a9d7deadc5f3168e247369bd6d60945fc">run</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives (and deciphers) PDUs from remote peers in a loop.  <a href="#a9d7deadc5f3168e247369bd6d60945fc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#a0c3aae3571025984a78e3ac058f227c3">send</a> (<a class="el" href="classutils_1_1_octet_buffer.html">OctetBuffer</a> pdu, InetAddress peerAddr, int peerPort)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Encrypts and sends PDUs to remote peer.  <a href="#a0c3aae3571025984a78e3ac058f227c3"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#ace11c2396adcbe1eb0ef32e95418964c">packetDump</a> (byte[] octets, int len, InetAddress addr, int port, boolean incoming)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dumps information of a frame (in bytes) to standard error.  <a href="#ace11c2396adcbe1eb0ef32e95418964c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#a926c1ccc3eea5b56e4d9baa9a745174c">localPort</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The local UDP port where datagram socket is bound.  <a href="#a926c1ccc3eea5b56e4d9baa9a745174c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DatagramSocket&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#aa0bc3cb9d61766e291f639eded0b841a">udpReceiver</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The UDP receiver socket.  <a href="#aa0bc3cb9d61766e291f639eded0b841a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#ad8c99e83debd3114da1ab7a97bdafdc8">pduReceiverThread</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The UDP receiver worker thread.  <a href="#ad8c99e83debd3114da1ab7a97bdafdc8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#a6432c9170e9d6bddf4715c703f1be431">running</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that worker thread should be running (receiving datagrams)  <a href="#a6432c9170e9d6bddf4715c703f1be431"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classprotocol_1_1_remote_peer.html">RemotePeer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#ac90f54ba4db87ab51be77e1655a96d5c">remotePeer</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Current remote peer receiving datagrams from UDP socket.  <a href="#ac90f54ba4db87ab51be77e1655a96d5c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcrypto_1_1_symmetric_cipher.html">SymmetricCipher</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#ad1e56450b9ae3d61b399680bd025caeb">usedPduCipher</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently used symmetric cipher.  <a href="#ad1e56450b9ae3d61b399680bd025caeb"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprotocol_1_1_datagram_channel.html#a156eef461140a705bf243814443ef5d5">INBOUND_UDP_BUFFER_SIZE</a> = 4096</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The default size for the inbound UDP buffer.  <a href="#a156eef461140a705bf243814443ef5d5"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Binds the UDP port. </p>
<p>Each peer is associated with one <a class="el" href="classprotocol_1_1_datagram_channel.html" title="Binds the UDP port.">DatagramChannel</a> object.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Mikica B Kocic </dd></dl>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00024">24</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a56b14d993b94d6c4b22327e714e9e3ca"></a><!-- doxytag: member="protocol::DatagramChannel::DatagramChannel" ref="a56b14d993b94d6c4b22327e714e9e3ca" args="(int localPort)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protocol.DatagramChannel.DatagramChannel </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>localPort</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor for the <a class="el" href="classprotocol_1_1_datagram_channel.html" title="Binds the UDP port.">DatagramChannel</a> object. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">localPort</td><td>local UDP port receiving peer's PDUs</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">SocketException</td><td>Thrown if the UDP socket cannot be created </td></tr>
    <tr><td class="paramname">UnknownHostException</td><td>Thrown if the remoteHost cannot be resolved </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00055">55</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>References <a class="el" href="_datagram_channel_8java_source.html#l00036">protocol.DatagramChannel.pduReceiverThread</a>, <a class="el" href="_datagram_channel_8java_source.html#l00042">protocol.DatagramChannel.remotePeer</a>, <a class="el" href="_datagram_channel_8java_source.html#l00039">protocol.DatagramChannel.running</a>, <a class="el" href="_datagram_channel_8java_source.html#l00033">protocol.DatagramChannel.udpReceiver</a>, and <a class="el" href="_datagram_channel_8java_source.html#l00045">protocol.DatagramChannel.usedPduCipher</a>.</p>
<div class="fragment"><pre class="fragment">    {
        this.<a class="code" href="classprotocol_1_1_datagram_channel.html#ac90f54ba4db87ab51be77e1655a96d5c" title="Current remote peer receiving datagrams from UDP socket.">remotePeer</a> = null;
        this.<a class="code" href="classprotocol_1_1_datagram_channel.html#ad1e56450b9ae3d61b399680bd025caeb" title="Currently used symmetric cipher.">usedPduCipher</a> = null;

        this.<a class="code" href="classprotocol_1_1_datagram_channel.html#a6432c9170e9d6bddf4715c703f1be431" title="Indicates that worker thread should be running (receiving datagrams)">running</a> = <span class="keyword">false</span>;
        this.<a class="code" href="classprotocol_1_1_datagram_channel.html#a926c1ccc3eea5b56e4d9baa9a745174c" title="The local UDP port where datagram socket is bound.">localPort</a> = -1;
        
        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = <a class="code" href="classprotocol_1_1_datagram_channel.html#a926c1ccc3eea5b56e4d9baa9a745174c" title="The local UDP port where datagram socket is bound.">localPort</a>; i &lt; <a class="code" href="classprotocol_1_1_datagram_channel.html#a926c1ccc3eea5b56e4d9baa9a745174c" title="The local UDP port where datagram socket is bound.">localPort</a> + 100; ++i )
        {
            <span class="keywordflow">try</span> {
                this.<a class="code" href="classprotocol_1_1_datagram_channel.html#aa0bc3cb9d61766e291f639eded0b841a" title="The UDP receiver socket.">udpReceiver</a> = <span class="keyword">new</span> DatagramSocket( i );
                this.localPort = i;
                <span class="keywordflow">break</span>;
            } <span class="keywordflow">catch</span>( SocketException e ) {
                <span class="comment">/* ignore error and continue search for unbound port */</span>
            }
        }
        
        <span class="comment">/* If binded UDP port, start worker thread.</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> ( this.localPort &gt; 0 ) 
        {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.trace( <span class="stringliteral">&quot;Bound to UDP port &quot;</span> + this.localPort );
            this.<a class="code" href="classprotocol_1_1_datagram_channel.html#a6432c9170e9d6bddf4715c703f1be431" title="Indicates that worker thread should be running (receiving datagrams)">running</a> = <span class="keyword">true</span>;
            <a class="code" href="classprotocol_1_1_datagram_channel.html#ad8c99e83debd3114da1ab7a97bdafdc8" title="The UDP receiver worker thread.">pduReceiverThread</a> = <span class="keyword">new</span> Thread( <span class="keyword">this</span>, <span class="stringliteral">&quot;UDP&quot;</span> );
            <a class="code" href="classprotocol_1_1_datagram_channel.html#ad8c99e83debd3114da1ab7a97bdafdc8" title="The UDP receiver worker thread.">pduReceiverThread</a>.setPriority( Thread.MAX_PRIORITY - 1 );
            <a class="code" href="classprotocol_1_1_datagram_channel.html#ad8c99e83debd3114da1ab7a97bdafdc8" title="The UDP receiver worker thread.">pduReceiverThread</a>.start ();
        }
    }
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aa27135d909a5593e235d3fbb5e87b3dd"></a><!-- doxytag: member="protocol::DatagramChannel::addNewPeer" ref="aa27135d909a5593e235d3fbb5e87b3dd" args="(RemotePeer remotePeer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void protocol.DatagramChannel.addNewPeer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classprotocol_1_1_remote_peer.html">RemotePeer</a>&#160;</td>
          <td class="paramname"> <em>remotePeer</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds new peer to receive incoming PDUs. </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00117">117</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>References <a class="el" href="_datagram_channel_8java_source.html#l00042">protocol.DatagramChannel.remotePeer</a>.</p>

<p>Referenced by <a class="el" href="_remote_peer_8java_source.html#l00056">protocol.RemotePeer.RemotePeer()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        this.<a class="code" href="classprotocol_1_1_datagram_channel.html#ac90f54ba4db87ab51be77e1655a96d5c" title="Current remote peer receiving datagrams from UDP socket.">remotePeer</a> = <a class="code" href="classprotocol_1_1_datagram_channel.html#ac90f54ba4db87ab51be77e1655a96d5c" title="Current remote peer receiving datagrams from UDP socket.">remotePeer</a>;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a6655236f8322711b91ef0f9b799f892f"></a><!-- doxytag: member="protocol::DatagramChannel::getLocalPort" ref="a6655236f8322711b91ef0f9b799f892f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int protocol.DatagramChannel.getLocalPort </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns used local UDP port. </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00089">89</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>References <a class="el" href="_datagram_channel_8java_source.html#l00033">protocol.DatagramChannel.udpReceiver</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01857">CryptoPhoneApp.acceptIncomingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01501">CryptoPhoneApp.deferredOnInvite()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">CryptoPhoneApp.executeCommand()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l00532">CryptoPhoneApp.startKryptofonServices()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">return</span> this.<a class="code" href="classprotocol_1_1_datagram_channel.html#aa0bc3cb9d61766e291f639eded0b841a" title="The UDP receiver socket.">udpReceiver</a>.getLocalPort ();
    }
</pre></div>
</div>
</div>
<a class="anchor" id="abe4c6003fc0e76a7082fc2a7e923a2d0"></a><!-- doxytag: member="protocol::DatagramChannel::getRemotePeer" ref="abe4c6003fc0e76a7082fc2a7e923a2d0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classprotocol_1_1_remote_peer.html">RemotePeer</a> protocol.DatagramChannel.getRemotePeer </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the remote peer. </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00133">133</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>References <a class="el" href="_datagram_channel_8java_source.html#l00042">protocol.DatagramChannel.remotePeer</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01188">CryptoPhoneApp.executeCommand()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l00738">CryptoPhoneApp.mainTimerEvent()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01121">CryptoPhoneApp.sendInstantMessage()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">return</span> this.<a class="code" href="classprotocol_1_1_datagram_channel.html#ac90f54ba4db87ab51be77e1655a96d5c" title="Current remote peer receiving datagrams from UDP socket.">remotePeer</a>;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a5396fcc387e78a8bb6c318153683069e"></a><!-- doxytag: member="protocol::DatagramChannel::getUsedSymmetricCipher" ref="a5396fcc387e78a8bb6c318153683069e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcrypto_1_1_symmetric_cipher.html">SymmetricCipher</a> protocol.DatagramChannel.getUsedSymmetricCipher </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets current cipher used for PDU ciphering. </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00109">109</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>References <a class="el" href="_datagram_channel_8java_source.html#l00045">protocol.DatagramChannel.usedPduCipher</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01750">CryptoPhoneApp.deferredOnInstantMessage()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01121">CryptoPhoneApp.sendInstantMessage()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">return</span> this.<a class="code" href="classprotocol_1_1_datagram_channel.html#ad1e56450b9ae3d61b399680bd025caeb" title="Currently used symmetric cipher.">usedPduCipher</a>;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a221b7dbd0fef9631bb96cff8fc871cb2"></a><!-- doxytag: member="protocol::DatagramChannel::hasRemotePeer" ref="a221b7dbd0fef9631bb96cff8fc871cb2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean protocol.DatagramChannel.hasRemotePeer </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns if there is active remote peer. </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00125">125</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>References <a class="el" href="_datagram_channel_8java_source.html#l00042">protocol.DatagramChannel.remotePeer</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01857">CryptoPhoneApp.acceptIncomingCall()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01624">CryptoPhoneApp.deferredOnAccept()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01714">CryptoPhoneApp.deferredOnBye()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01501">CryptoPhoneApp.deferredOnInvite()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01554">CryptoPhoneApp.deferredOnRing()</a>, <a class="el" href="_crypto_phone_app_8java_source.html#l01188">CryptoPhoneApp.executeCommand()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01775">CryptoPhoneApp.tryToVerifyInvitingCall()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">return</span> this.<a class="code" href="classprotocol_1_1_datagram_channel.html#ac90f54ba4db87ab51be77e1655a96d5c" title="Current remote peer receiving datagrams from UDP socket.">remotePeer</a> != null;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ae8dd033afe87b2135f8f004d05a7f62a"></a><!-- doxytag: member="protocol::DatagramChannel::isPearDead" ref="ae8dd033afe87b2135f8f004d05a7f62a" args="(int maxIdleTimeMillis)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean protocol.DatagramChannel.isPearDead </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>maxIdleTimeMillis</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns if peer seems to be dead (we are not receiving PDUs from it). </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00141">141</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>References <a class="el" href="_remote_peer_8java_source.html#l00112">protocol.RemotePeer.receiverIdleTime()</a>, and <a class="el" href="_datagram_channel_8java_source.html#l00042">protocol.DatagramChannel.remotePeer</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00738">CryptoPhoneApp.mainTimerEvent()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( this.<a class="code" href="classprotocol_1_1_datagram_channel.html#ac90f54ba4db87ab51be77e1655a96d5c" title="Current remote peer receiving datagrams from UDP socket.">remotePeer</a> == null ) {
            <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// cannot be dead if does not exists</span>
        }
        
        <span class="keywordflow">return</span> this.<a class="code" href="classprotocol_1_1_datagram_channel.html#ac90f54ba4db87ab51be77e1655a96d5c" title="Current remote peer receiving datagrams from UDP socket.">remotePeer</a>.receiverIdleTime () &gt; maxIdleTimeMillis;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ace11c2396adcbe1eb0ef32e95418964c"></a><!-- doxytag: member="protocol::DatagramChannel::packetDump" ref="ace11c2396adcbe1eb0ef32e95418964c" args="(byte[] octets, int len, InetAddress addr, int port, boolean incoming)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void protocol.DatagramChannel.packetDump </td>
          <td>(</td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"> <em>octets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InetAddress&#160;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"> <em>incoming</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dumps information of a frame (in bytes) to standard error. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">octets</td><td>The octets of the in- or outgoing PDU </td></tr>
    <tr><td class="paramname">len</td><td>The size of PDU </td></tr>
    <tr><td class="paramname">addr</td><td>The remote host address </td></tr>
    <tr><td class="paramname">port</td><td>The port number </td></tr>
    <tr><td class="paramname">incoming</td><td>Indicates if it is inbound (true) or outgoing (false) PDU </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00283">283</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>Referenced by <a class="el" href="_datagram_channel_8java_source.html#l00196">protocol.DatagramChannel.run()</a>, and <a class="el" href="_datagram_channel_8java_source.html#l00245">protocol.DatagramChannel.send()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( ! <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.isEnabled( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.PDU ) ) {
            <span class="keywordflow">return</span>;
        }
        
        StringBuffer sb = <span class="keyword">new</span> StringBuffer( 500 );
        
        sb.append( incoming ? <span class="stringliteral">&quot;Packet from &lt;--- &quot;</span> : <span class="stringliteral">&quot;Packet to ---&gt; &quot;</span> );
        
        sb.append( addr.getHostAddress() ).append( <span class="stringliteral">&quot;:&quot;</span> ).append( port );
        
        sb.append( <span class="stringliteral">&quot;, size = &quot;</span>).append( len ).append( <span class="stringliteral">&quot;\n\n&quot;</span> );
        
        sb.append( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.toHex( octets, len, <span class="stringliteral">&quot; &quot;</span> ) ).append( <span class="stringliteral">&quot;\n&quot;</span> );
        
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.pdu( sb.toString () );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a353a747cc114cba3204e1fc2ecfc7ffc"></a><!-- doxytag: member="protocol::DatagramChannel::removePeer" ref="a353a747cc114cba3204e1fc2ecfc7ffc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void protocol.DatagramChannel.removePeer </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Detaches peer and all its call from the UDP receiver. </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00153">153</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>References <a class="el" href="_remote_peer_8java_source.html#l00243">protocol.RemotePeer.cleanUp()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00042">protocol.DatagramChannel.remotePeer</a>, and <a class="el" href="_datagram_channel_8java_source.html#l00045">protocol.DatagramChannel.usedPduCipher</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01714">CryptoPhoneApp.deferredOnBye()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01188">CryptoPhoneApp.executeCommand()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        this.<a class="code" href="classprotocol_1_1_datagram_channel.html#ad1e56450b9ae3d61b399680bd025caeb" title="Currently used symmetric cipher.">usedPduCipher</a> = null;

        <span class="keywordflow">if</span> ( this.<a class="code" href="classprotocol_1_1_datagram_channel.html#ac90f54ba4db87ab51be77e1655a96d5c" title="Current remote peer receiving datagrams from UDP socket.">remotePeer</a> != null ) 
        {
            this.<a class="code" href="classprotocol_1_1_datagram_channel.html#ac90f54ba4db87ab51be77e1655a96d5c" title="Current remote peer receiving datagrams from UDP socket.">remotePeer</a>.cleanUp ();
            this.<a class="code" href="classprotocol_1_1_datagram_channel.html#ac90f54ba4db87ab51be77e1655a96d5c" title="Current remote peer receiving datagrams from UDP socket.">remotePeer</a> = null;
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a9d7deadc5f3168e247369bd6d60945fc"></a><!-- doxytag: member="protocol::DatagramChannel::run" ref="a9d7deadc5f3168e247369bd6d60945fc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void protocol.DatagramChannel.run </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Receives (and deciphers) PDUs from remote peers in a loop. </p>
<p>Dispatches inbound PDUs to associated instance of the <a class="el" href="classprotocol_1_1_remote_peer.html" title="Encapsulates the link between the UDP channel and a CallContext.">RemotePeer</a> that will handle PDUs. </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00196">196</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>References <a class="el" href="_remote_peer_8java_source.html#l00126">protocol.RemotePeer.addIncomingPDU()</a>, <a class="el" href="_symmetric_cipher_8java_source.html#l00228">crypto.SymmetricCipher.decrypt()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00027">protocol.DatagramChannel.INBOUND_UDP_BUFFER_SIZE</a>, <a class="el" href="_datagram_channel_8java_source.html#l00283">protocol.DatagramChannel.packetDump()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00042">protocol.DatagramChannel.remotePeer</a>, <a class="el" href="_datagram_channel_8java_source.html#l00039">protocol.DatagramChannel.running</a>, <a class="el" href="_datagram_channel_8java_source.html#l00033">protocol.DatagramChannel.udpReceiver</a>, and <a class="el" href="_datagram_channel_8java_source.html#l00045">protocol.DatagramChannel.usedPduCipher</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.trace( <span class="stringliteral">&quot;Thread started&quot;</span> );

        <span class="comment">/* Receive and dispatch datagrams</span>
<span class="comment">         */</span>
        byte[] buff = <span class="keyword">new</span> byte[ <a class="code" href="classprotocol_1_1_datagram_channel.html#a156eef461140a705bf243814443ef5d5" title="The default size for the inbound UDP buffer.">INBOUND_UDP_BUFFER_SIZE</a> ];
        
        <span class="keywordflow">while</span>( <a class="code" href="classprotocol_1_1_datagram_channel.html#a6432c9170e9d6bddf4715c703f1be431" title="Indicates that worker thread should be running (receiving datagrams)">running</a> )
        {
            DatagramPacket packet = <span class="keyword">new</span> DatagramPacket( buff, buff.length );
            
            <span class="keywordflow">try</span> 
            {
                <a class="code" href="classprotocol_1_1_datagram_channel.html#aa0bc3cb9d61766e291f639eded0b841a" title="The UDP receiver socket.">udpReceiver</a>.receive( packet );
                
                byte[] pdu = <span class="keyword">new</span> byte[ packet.getLength () ];
                System.arraycopy( buff, 0, pdu, 0, pdu.length );

                InetAddress peerAddr = packet.getAddress ();
                <span class="keywordtype">int</span> peerPort = packet.getPort ();

                <span class="comment">// packetDump( pdu, pdu.length, peerAddr, peerPort, true );</span>
                
                <span class="keywordflow">if</span> ( <a class="code" href="classprotocol_1_1_datagram_channel.html#ad1e56450b9ae3d61b399680bd025caeb" title="Currently used symmetric cipher.">usedPduCipher</a> != null ) {
                    pdu = <a class="code" href="classprotocol_1_1_datagram_channel.html#ad1e56450b9ae3d61b399680bd025caeb" title="Currently used symmetric cipher.">usedPduCipher</a>.decrypt( <span class="comment">/*randomPreambleLen*/</span> 8, pdu );
                }

                <span class="keywordflow">if</span> ( pdu != null ) 
                {
                    <a class="code" href="classprotocol_1_1_datagram_channel.html#ace11c2396adcbe1eb0ef32e95418964c" title="Dumps information of a frame (in bytes) to standard error.">packetDump</a>( pdu, pdu.length, peerAddr, peerPort, <span class="keyword">true</span> );
    
                    <span class="keywordflow">if</span> ( <a class="code" href="classprotocol_1_1_datagram_channel.html#ac90f54ba4db87ab51be77e1655a96d5c" title="Current remote peer receiving datagrams from UDP socket.">remotePeer</a> != null ) {
                        <a class="code" href="classprotocol_1_1_datagram_channel.html#ac90f54ba4db87ab51be77e1655a96d5c" title="Current remote peer receiving datagrams from UDP socket.">remotePeer</a>.addIncomingPDU( pdu );
                    }
                }
            }
            <span class="keywordflow">catch</span>( IOException e )
            {
                <span class="keywordflow">if</span> ( <a class="code" href="classprotocol_1_1_datagram_channel.html#a6432c9170e9d6bddf4715c703f1be431" title="Indicates that worker thread should be running (receiving datagrams)">running</a> ) {
                    <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.exception( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.WARN, e );
                }
            }
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a0c3aae3571025984a78e3ac058f227c3"></a><!-- doxytag: member="protocol::DatagramChannel::send" ref="a0c3aae3571025984a78e3ac058f227c3" args="(OctetBuffer pdu, InetAddress peerAddr, int peerPort)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void protocol.DatagramChannel.send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classutils_1_1_octet_buffer.html">OctetBuffer</a>&#160;</td>
          <td class="paramname"> <em>pdu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InetAddress&#160;</td>
          <td class="paramname"> <em>peerAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>peerPort</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Encrypts and sends PDUs to remote peer. </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00245">245</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>References <a class="el" href="_symmetric_cipher_8java_source.html#l00181">crypto.SymmetricCipher.encrypt()</a>, <a class="el" href="_octet_buffer_8java_source.html#l00087">utils.OctetBuffer.getPosition()</a>, <a class="el" href="_octet_buffer_8java_source.html#l00063">utils.OctetBuffer.getStore()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00283">protocol.DatagramChannel.packetDump()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00033">protocol.DatagramChannel.udpReceiver</a>, and <a class="el" href="_datagram_channel_8java_source.html#l00045">protocol.DatagramChannel.usedPduCipher</a>.</p>

<p>Referenced by <a class="el" href="_remote_peer_8java_source.html#l00255">protocol.RemotePeer.send()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">try</span>
        {
            <a class="code" href="classprotocol_1_1_datagram_channel.html#ace11c2396adcbe1eb0ef32e95418964c" title="Dumps information of a frame (in bytes) to standard error.">packetDump</a>( pdu.getStore (), pdu.getPosition (), peerAddr, peerPort, false );

            byte[] datagram = <span class="keyword">new</span> byte[ pdu.getPosition () ];
            System.arraycopy( pdu.getStore (), 0, datagram, 0, datagram.length );
            
            <span class="keywordflow">if</span> ( <a class="code" href="classprotocol_1_1_datagram_channel.html#ad1e56450b9ae3d61b399680bd025caeb" title="Currently used symmetric cipher.">usedPduCipher</a> != null ) {
                datagram = <a class="code" href="classprotocol_1_1_datagram_channel.html#ad1e56450b9ae3d61b399680bd025caeb" title="Currently used symmetric cipher.">usedPduCipher</a>.encrypt( <span class="comment">/*randomPreambleLen*/</span> 8, datagram );
            }

            <span class="keywordflow">if</span> ( datagram != null ) 
            {
                <span class="comment">// packetDump( datagram, datagram.length, peerAddr, peerPort, false );</span>
                
                DatagramPacket packet = <span class="keyword">new</span> DatagramPacket(
                        datagram, datagram.length, peerAddr, peerPort );
    
                this.<a class="code" href="classprotocol_1_1_datagram_channel.html#aa0bc3cb9d61766e291f639eded0b841a" title="The UDP receiver socket.">udpReceiver</a>.send( packet );
            }
        }
        <span class="keywordflow">catch</span>( Exception e )
        {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.exception( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.WARN, e );
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ac1d41f5824bc43b750eb6d681fd74b9c"></a><!-- doxytag: member="protocol::DatagramChannel::stop" ref="ac1d41f5824bc43b750eb6d681fd74b9c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void protocol.DatagramChannel.stop </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stops PDU receiver thread. </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00167">167</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>References <a class="el" href="_datagram_channel_8java_source.html#l00036">protocol.DatagramChannel.pduReceiverThread</a>, <a class="el" href="_datagram_channel_8java_source.html#l00039">protocol.DatagramChannel.running</a>, and <a class="el" href="_datagram_channel_8java_source.html#l00033">protocol.DatagramChannel.udpReceiver</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l00558">CryptoPhoneApp.stopKryptofonServices()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="classprotocol_1_1_datagram_channel.html#a6432c9170e9d6bddf4715c703f1be431" title="Indicates that worker thread should be running (receiving datagrams)">running</a> = <span class="keyword">false</span>;
        
        <span class="keywordflow">if</span> ( <a class="code" href="classprotocol_1_1_datagram_channel.html#ad8c99e83debd3114da1ab7a97bdafdc8" title="The UDP receiver worker thread.">pduReceiverThread</a> != null )
        {
            <a class="code" href="classprotocol_1_1_datagram_channel.html#aa0bc3cb9d61766e291f639eded0b841a" title="The UDP receiver socket.">udpReceiver</a>.close ();
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.debug( <span class="stringliteral">&quot;Closed Socket&quot;</span> );
            
            <span class="keywordflow">try</span>
            {
                <a class="code" href="classprotocol_1_1_datagram_channel.html#ad8c99e83debd3114da1ab7a97bdafdc8" title="The UDP receiver worker thread.">pduReceiverThread</a>.join ();
                <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.debug( <span class="stringliteral">&quot;Joined binder thread&quot;</span> );
            }
            <span class="keywordflow">catch</span>( InterruptedException e )
            {
                <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.exception( <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.WARN, e );
            }
            
            <a class="code" href="classprotocol_1_1_datagram_channel.html#ad8c99e83debd3114da1ab7a97bdafdc8" title="The UDP receiver worker thread.">pduReceiverThread</a> = null;
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a126ecd1b608a2e495e93ffc6d768c91b"></a><!-- doxytag: member="protocol::DatagramChannel::useSymmetricCipher" ref="a126ecd1b608a2e495e93ffc6d768c91b" args="(SymmetricCipher cipherEngine)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void protocol.DatagramChannel.useSymmetricCipher </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcrypto_1_1_symmetric_cipher.html">SymmetricCipher</a>&#160;</td>
          <td class="paramname"> <em>cipherEngine</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets cipher to be used for PDU ciphering. </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00097">97</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>References <a class="el" href="_symmetric_cipher_8java_source.html#l00168">crypto.SymmetricCipher.getAlgorithmDesc()</a>, and <a class="el" href="_datagram_channel_8java_source.html#l00045">protocol.DatagramChannel.usedPduCipher</a>.</p>

<p>Referenced by <a class="el" href="_crypto_phone_app_8java_source.html#l01857">CryptoPhoneApp.acceptIncomingCall()</a>, and <a class="el" href="_crypto_phone_app_8java_source.html#l01624">CryptoPhoneApp.deferredOnAccept()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="classprotocol_1_1_datagram_channel.html#ad1e56450b9ae3d61b399680bd025caeb" title="Currently used symmetric cipher.">usedPduCipher</a> = cipherEngine;
        
        <span class="keywordflow">if</span> ( cipherEngine != null ) {
            <a class="code" href="namespaceutils.html#acdfe27a467c82e100aa74ce6d94e9b71" title="Common application message logger facility (static implementation)">Log</a>.trace( <span class="stringliteral">&quot;Using PDU cipher: &quot;</span> + cipherEngine.getAlgorithmDesc () );
        }
    }
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a156eef461140a705bf243814443ef5d5"></a><!-- doxytag: member="protocol::DatagramChannel::INBOUND_UDP_BUFFER_SIZE" ref="a156eef461140a705bf243814443ef5d5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final int <a class="el" href="classprotocol_1_1_datagram_channel.html#a156eef461140a705bf243814443ef5d5">protocol.DatagramChannel.INBOUND_UDP_BUFFER_SIZE</a> = 4096<code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The default size for the inbound UDP buffer. </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00027">27</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>Referenced by <a class="el" href="_datagram_channel_8java_source.html#l00196">protocol.DatagramChannel.run()</a>.</p>

</div>
</div>
<a class="anchor" id="a926c1ccc3eea5b56e4d9baa9a745174c"></a><!-- doxytag: member="protocol::DatagramChannel::localPort" ref="a926c1ccc3eea5b56e4d9baa9a745174c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classprotocol_1_1_datagram_channel.html#a926c1ccc3eea5b56e4d9baa9a745174c">protocol.DatagramChannel.localPort</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The local UDP port where datagram socket is bound. </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00030">30</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

</div>
</div>
<a class="anchor" id="ad8c99e83debd3114da1ab7a97bdafdc8"></a><!-- doxytag: member="protocol::DatagramChannel::pduReceiverThread" ref="ad8c99e83debd3114da1ab7a97bdafdc8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Thread <a class="el" href="classprotocol_1_1_datagram_channel.html#ad8c99e83debd3114da1ab7a97bdafdc8">protocol.DatagramChannel.pduReceiverThread</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The UDP receiver worker thread. </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00036">36</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>Referenced by <a class="el" href="_datagram_channel_8java_source.html#l00055">protocol.DatagramChannel.DatagramChannel()</a>, and <a class="el" href="_datagram_channel_8java_source.html#l00167">protocol.DatagramChannel.stop()</a>.</p>

</div>
</div>
<a class="anchor" id="ac90f54ba4db87ab51be77e1655a96d5c"></a><!-- doxytag: member="protocol::DatagramChannel::remotePeer" ref="ac90f54ba4db87ab51be77e1655a96d5c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classprotocol_1_1_remote_peer.html">RemotePeer</a> <a class="el" href="classprotocol_1_1_datagram_channel.html#ac90f54ba4db87ab51be77e1655a96d5c">protocol.DatagramChannel.remotePeer</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Current remote peer receiving datagrams from UDP socket. </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00042">42</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>Referenced by <a class="el" href="_datagram_channel_8java_source.html#l00117">protocol.DatagramChannel.addNewPeer()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00055">protocol.DatagramChannel.DatagramChannel()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00133">protocol.DatagramChannel.getRemotePeer()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00125">protocol.DatagramChannel.hasRemotePeer()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00141">protocol.DatagramChannel.isPearDead()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00153">protocol.DatagramChannel.removePeer()</a>, and <a class="el" href="_datagram_channel_8java_source.html#l00196">protocol.DatagramChannel.run()</a>.</p>

</div>
</div>
<a class="anchor" id="a6432c9170e9d6bddf4715c703f1be431"></a><!-- doxytag: member="protocol::DatagramChannel::running" ref="a6432c9170e9d6bddf4715c703f1be431" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile boolean <a class="el" href="classprotocol_1_1_datagram_channel.html#a6432c9170e9d6bddf4715c703f1be431">protocol.DatagramChannel.running</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Indicates that worker thread should be running (receiving datagrams) </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00039">39</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>Referenced by <a class="el" href="_datagram_channel_8java_source.html#l00055">protocol.DatagramChannel.DatagramChannel()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00196">protocol.DatagramChannel.run()</a>, and <a class="el" href="_datagram_channel_8java_source.html#l00167">protocol.DatagramChannel.stop()</a>.</p>

</div>
</div>
<a class="anchor" id="aa0bc3cb9d61766e291f639eded0b841a"></a><!-- doxytag: member="protocol::DatagramChannel::udpReceiver" ref="aa0bc3cb9d61766e291f639eded0b841a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DatagramSocket <a class="el" href="classprotocol_1_1_datagram_channel.html#aa0bc3cb9d61766e291f639eded0b841a">protocol.DatagramChannel.udpReceiver</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The UDP receiver socket. </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00033">33</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>Referenced by <a class="el" href="_datagram_channel_8java_source.html#l00055">protocol.DatagramChannel.DatagramChannel()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00089">protocol.DatagramChannel.getLocalPort()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00196">protocol.DatagramChannel.run()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00245">protocol.DatagramChannel.send()</a>, and <a class="el" href="_datagram_channel_8java_source.html#l00167">protocol.DatagramChannel.stop()</a>.</p>

</div>
</div>
<a class="anchor" id="ad1e56450b9ae3d61b399680bd025caeb"></a><!-- doxytag: member="protocol::DatagramChannel::usedPduCipher" ref="ad1e56450b9ae3d61b399680bd025caeb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcrypto_1_1_symmetric_cipher.html">SymmetricCipher</a> <a class="el" href="classprotocol_1_1_datagram_channel.html#ad1e56450b9ae3d61b399680bd025caeb">protocol.DatagramChannel.usedPduCipher</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Currently used symmetric cipher. </p>

<p>Definition at line <a class="el" href="_datagram_channel_8java_source.html#l00045">45</a> of file <a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a>.</p>

<p>Referenced by <a class="el" href="_datagram_channel_8java_source.html#l00055">protocol.DatagramChannel.DatagramChannel()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00109">protocol.DatagramChannel.getUsedSymmetricCipher()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00153">protocol.DatagramChannel.removePeer()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00196">protocol.DatagramChannel.run()</a>, <a class="el" href="_datagram_channel_8java_source.html#l00245">protocol.DatagramChannel.send()</a>, and <a class="el" href="_datagram_channel_8java_source.html#l00097">protocol.DatagramChannel.useSymmetricCipher()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>protocol/<a class="el" href="_datagram_channel_8java_source.html">DatagramChannel.java</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Dec 16 2010 14:44:44 for VoIP Kryptofon by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
